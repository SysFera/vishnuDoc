<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>VISHNU - Le guide de l'administrateur</title><meta name="generator" content="DocBook XSL Stylesheets V1.75.2" /></head><body><div class="book" title="VISHNU - Le guide de l'administrateur"><div class="titlepage"><div><div><h1 class="title"><a id="idm14590600"></a>VISHNU - Le guide de l'administrateur</h1></div><div><div class="author"><h3 class="author"><span class="firstname">Benjamin</span> <span class="surname">Isnard</span></h3></div></div><div><div class="author"><h3 class="author"><span class="firstname">Daouda</span> <span class="surname">Traoré</span></h3></div></div><div><div class="author"><h3 class="author"><span class="firstname">Eugène</span> <span class="surname">Pamba Capo-Chichi</span></h3></div></div><div><div class="author"><h3 class="author"><span class="firstname">Kevin</span> <span class="surname">Coulomb</span></h3></div></div><div><div class="author"><h3 class="author"><span class="firstname">Ibrahima</span> <span class="surname">Cissé</span></h3></div></div><div><div class="author"><h3 class="author"><span class="firstname">Rodrigue</span> <span class="surname">Chakode</span></h3></div></div><div><div class="author"><h3 class="author"><span class="firstname">Benjamin</span> <span class="surname">Depardon</span></h3></div></div><div><div class="author"><h3 class="author"><span class="firstname">Haïkel</span> <span class="surname">Guémar</span></h3></div></div><div><div class="revhistory"><table border="1" width="100%" summary="Revision history"><tr><th align="left" valign="top" colspan="3"><b>Revision History</b></th></tr><tr><td align="left">Revision 1</td><td align="left">08/03/2011</td><td align="left">K. COULOMB</td></tr><tr><td align="left" colspan="3">

<p>Version initiale pour le module UMS uniquement</p></td></tr><tr><td align="left">Revision 2</td><td align="left">18/03/2011</td><td align="left">K. COULOMB</td></tr><tr><td align="left" colspan="3">

<p>Ajout du lancement manuel avec forwarder et d'image de fichiers de configuration exemple</p></td></tr><tr><td align="left">Revision 3</td><td align="left">22/03/2011</td><td align="left">K. COULOMB</td></tr><tr><td align="left" colspan="3">

<p>Ajout des web services</p></td></tr><tr><td align="left">Revision 4</td><td align="left">11/05/2011</td><td align="left">K. COULOMB, B.ISNARD</td></tr><tr><td align="left" colspan="3">



<p>Réécriture du lancement avec fichier de configuration.</p><p>Ajout d'un paragraphe pour le sendmail.</p><p>Ajout de l'administration de TMS.</p></td></tr><tr><td align="left">Revision 5</td><td align="left">18/05/2011</td><td align="left">B.ISNARD</td></tr><tr><td align="left" colspan="3">

<p>Ajout du parametre de configuration dbConnectionsNb.</p></td></tr><tr><td align="left">Revision 6</td><td align="left">10/06/2011</td><td align="left">K.COULOMB</td></tr><tr><td align="left" colspan="3">

<p>Documentation pour IMS.</p></td></tr><tr><td align="left">Revision 7</td><td align="left">15/06/2011</td><td align="left">I.CISSE</td></tr><tr><td align="left" colspan="3">

<p>Documentation pour FMS.</p></td></tr><tr><td align="left">Revision 8</td><td align="left">22/06/2011</td><td align="left">B.ISNARD</td></tr><tr><td align="left" colspan="3">

<p>Ajout de l'option ENABLE_SWIG.</p></td></tr><tr><td align="left">Revision 9</td><td align="left">24/06/2011</td><td align="left">I.CISSE</td></tr><tr><td align="left" colspan="3">
      
      <p>Ajout de l'option vishnuMachineId dans les fichiers de
      configuration de UMS, IMS et FMS .</p></td></tr><tr><td align="left">Revision 10</td><td align="left">13/07/2011</td><td align="left">K.COULOMB</td></tr><tr><td align="left" colspan="3">
      
      <p>Mise à jour du document suites aux premiers retours .</p></td></tr><tr><td align="left">Revision 11</td><td align="left">11/08/2011</td><td align="left">D.TRAORE</td></tr><tr><td align="left" colspan="3">
      <p>Prise en compte du gestionnaire de resources SLURM</p></td></tr><tr><td align="left">Revision 12</td><td align="left">23/08/2011</td><td align="left">K.COULOMB</td></tr><tr><td align="left" colspan="3">
      <p>Ajout d'un lien sur des sites expliquant comment installer une base de
      données postgresql/mysql. Suppression des informations de mise à jour de la
      base (maintenant le script de création contient tout). Ajout d'une
       référence vers 'VISHNU_API'</p></td></tr><tr><td align="left">Revision 13</td><td align="left">14/12/2011</td><td align="left">K.COULOMB</td></tr><tr><td align="left" colspan="3">
      <p>
      Mise à jour pour les nouveaux forwarder de DIET.
      </p></td></tr><tr><td align="left">Revision 14</td><td align="left">15/12/2011</td><td align="left">I.CISSE</td></tr><tr><td align="left" colspan="3">
      <p>
      Mise à jour de la section configuration des clés ssh requises pour FMS.
      </p></td></tr><tr><td align="left">Revision 15</td><td align="left">16/12/2011</td><td align="left">D.TRAORE</td></tr><tr><td align="left" colspan="3">
      <p>
      Ajout de la section configuration des clés ssh requises pour TMS.
      </p></td></tr><tr><td align="left">Revision 16</td><td align="left">30/01/2012</td><td align="left">K. COULOMB</td></tr><tr><td align="left" colspan="3">
      <p>
      Modifie les requirements en fonction de la version de DIET
      </p></td></tr><tr><td align="left">Revision 17</td><td align="left">27/02/2012</td><td align="left">K. COULOMB</td></tr><tr><td align="left" colspan="3">
      <p>
      Liste les libs de boost nécessaire
      </p></td></tr><tr><td align="left">Revision 18</td><td align="left">02/03/2012</td><td align="left">D.TRAORE</td></tr><tr><td align="left" colspan="3">
      <p>Prise en compte du gestionnaire de resources LSF</p></td></tr><tr><td align="left">Revision 19</td><td align="left">22/03/2012</td><td align="left">K. COULOMB</td></tr><tr><td align="left" colspan="3">
      <p>Ajout pour le support de LDAP</p></td></tr><tr><td align="left">Revision 20</td><td align="left">11/04/2012</td><td align="left">E. PAMBA CAPO-CHICHI</td></tr><tr><td align="left" colspan="3">
      <p>Prise en compte du gestionnaire de resources Grid Engine</p></td></tr><tr><td align="left">Revision 21</td><td align="left">30/05/2012</td><td align="left">E. PAMBA CAPO-CHICHI</td></tr><tr><td align="left" colspan="3">
      <p> Ajout des versions de LoadLeveler, GLIBC pour libcrypt et ssh</p></td></tr><tr><td align="left">Revision 22</td><td align="left">27/08/2012</td><td align="left">K. COULOMB</td></tr><tr><td align="left" colspan="3">
      <p> Nouvelle compilation avec les batchs</p></td></tr><tr><td align="left">Revision 23</td><td align="left">01/10/2012</td><td align="left">R. Chakode</td></tr><tr><td align="left" colspan="3">
      <p>Ajout des prérequis en termes de connaissances systèmes et raffinement
      de la procédure d'installation</p></td></tr><tr><td align="left">Revision 24</td><td align="left">08/11/2012</td><td align="left">K. COULOMB</td></tr><tr><td align="left" colspan="3">
      <p>Ajout d'un paragraphe sur l'utilisation d'une base de données distante</p></td></tr><tr><td align="left">Revision 25</td><td align="left">08/11/2012</td><td align="left">A. BSILA</td></tr><tr><td align="left" colspan="3">
      <p>Prise en compte du gestionnaire de resources PBSPro</p></td></tr><tr><td align="left">Revision 26</td><td align="left">21/11/2012</td><td align="left">K. Coulomb</td></tr><tr><td align="left" colspan="3">
      <p>Première MAJ pour ZeroMQ</p></td></tr><tr><td align="left">Revision 27</td><td align="left">04/01/2013</td><td align="left">B. Depardon</td></tr><tr><td align="left" colspan="3">
      <p>Maj documentation du dispatcher</p></td></tr><tr><td align="left">Revision 28</td><td align="left">15/01/2013</td><td align="left">H. Guémar</td></tr><tr><td align="left" colspan="3">
      
      <p>
      Ajout d'une FAQ pour la résolution des problèmes d'administration.
      Ajout d'une entrée dans la FAQ à propos du chargement des plugins TMS
      </p></td></tr><tr><td align="left">Revision 29</td><td align="left">15/01/2013</td><td align="left">R. Chakode</td></tr><tr><td align="left" colspan="3">
      
      <p>Mise à jour des dépendences d'installation avec ZeroMQ et
      suppression du chapite lié aux web services</p></td></tr></table></div></div></div><hr /></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="chapter"><a href="#idp42720">1. Présentation du document</a></span></dt><dd><dl><dt><span class="section"><a href="#idp43096">Objectifs du document</a></span></dt><dt><span class="section"><a href="#idp44016">Prérequis</a></span></dt><dt><span class="section"><a href="#idp46976">Structure du document</a></span></dt><dt><span class="section"><a href="#idp63864">Documents de références</a></span></dt></dl></dd><dt><span class="chapter"><a href="#idp66088">2. Acronymes et Glossaire</a></span></dt><dd><dl><dt><span class="section"><a href="#idp66440">Terminologies</a></span></dt></dl></dd><dt><span class="chapter"><a href="#idp79456">3. Installation à partir des sources</a></span></dt><dd><dl><dt><span class="section"><a href="#idp80200">Prérequis</a></span></dt><dt><span class="section"><a href="#idp97656"> Compilation des sources </a></span></dt><dt><span class="section"><a href="#idp132864">Vérifier l'installation</a></span></dt></dl></dd><dt><span class="chapter"><a href="#idp139648">4. Configuration de la base de données</a></span></dt><dd><dl><dt><span class="section"><a href="#idp140944">Utiliser une base de données MySQL</a></span></dt><dt><span class="section"><a href="#idp148632">Utiliser une base de données PostGreSQL</a></span></dt><dt><span class="section"><a href="#idp155880">Utilisation de TMS en mode natif: TMS Posix Shell</a></span></dt><dt><span class="section"><a href="#idp158016">Utilisation de LDAP</a></span></dt><dt><span class="section"><a href="#idp162784">Utilisation d'une base de données distante</a></span></dt></dl></dd><dt><span class="chapter"><a href="#idp170304">5. Déploiement</a></span></dt><dd><dl><dt><span class="section"><a href="#idp170656">Composants serveurs</a></span></dt><dt><span class="section"><a href="#idp173728">Configuration des composants</a></span></dt><dd><dl><dt><span class="section"><a href="#idp175480">Configuration de Supervisod</a></span></dt></dl></dd><dt><span class="section"><a href="#idp181264">Déploiement dans un même sous-réseau</a></span></dt><dt><span class="section"><a href="#idp184432">Le cas multi-réseaux</a></span></dt><dt><span class="section"><a href="#idp187760">Configuration de l'envoi des emails par VISHNU</a></span></dt><dt><span class="section"><a href="#idp196344">Configuration des clés privées/publiques ssh requises pour FMS</a></span></dt><dt><span class="section"><a href="#idp202416">Configuration des clés privées/publiques ssh requises pour TMS</a></span></dt><dt><span class="section"><a href="#idp203848">Test d'exécution d'un service depuis une machine client par shell</a></span></dt><dt><span class="section"><a href="#idp210632">Les scripts de démarage automatique</a></span></dt></dl></dd><dt><span class="chapter"><a href="#idp261384">6. Administration</a></span></dt><dd><dl><dt><span class="section"><a href="#idp261728">Présentation</a></span></dt><dt><span class="section"><a href="#idp263192">Gestion des utilisateurs (UMS)</a></span></dt><dt><span class="section"><a href="#idp268944">Gestion des machines (UMS+IMS)</a></span></dt><dt><span class="section"><a href="#idp274744">Gestion de la plateforme (UMS)</a></span></dt><dt><span class="section"><a href="#idp280816">Options propres à l'administrateur dans les commandes utilisateurs(UMS+FMS)</a></span></dt><dt><span class="section"><a href="#idp287256">Gestion des processus VISHNU et délestage (IMS)</a></span></dt><dt><span class="section"><a href="#idp291232">Surveillance de l'état des machines (IMS)</a></span></dt><dt><span class="section"><a href="#idp295176">Définition des formats des identifiants (IMS)</a></span></dt><dt><span class="section"><a href="#idp301128">FAQ</a></span></dt></dl></dd><dt><span class="reference"><a href="#idp302896">I. UMS Command reference</a></span></dt><dd><dl><dt><span class="refentrytitle"><a href="#idp303272">vishnu_add_user</a></span><span class="refpurpose"> — adds a new VISHNU user</span></dt><dt><span class="refentrytitle"><a href="#idp322816">vishnu_update_user</a></span><span class="refpurpose"> — updates the user information except the userId and the password</span></dt><dt><span class="refentrytitle"><a href="#idp348880">vishnu_delete_user</a></span><span class="refpurpose"> — removes a user from VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp366000">vishnu_reset_password</a></span><span class="refpurpose"> — resets the password of a user</span></dt><dt><span class="refentrytitle"><a href="#idp383104">vishnu_save_configuration</a></span><span class="refpurpose"> — saves the configuration of VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp398280">vishnu_restore_configuration</a></span><span class="refpurpose"> — restores the configuration of VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp414232">vishnu_add_machine</a></span><span class="refpurpose"> — adds a new machine in VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp433152">vishnu_update_machine</a></span><span class="refpurpose"> — updates machine description</span></dt><dt><span class="refentrytitle"><a href="#idp459392">vishnu_delete_machine</a></span><span class="refpurpose"> — removes a machine from VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp475936">vishnu_list_users</a></span><span class="refpurpose"> — lists VISHNU users</span></dt><dt><span class="refentrytitle"><a href="#idp495112">vishnu_configure_default_option</a></span><span class="refpurpose"> — configures a default option value</span></dt><dt><span class="refentrytitle"><a href="#idp513576">vishnu_add_auth_system</a></span><span class="refpurpose"> — adds a new user-authentication system in VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp534608">vishnu_update_auth_system</a></span><span class="refpurpose"> — updates a user-authentication system in VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp564992">vishnu_delete_auth_system</a></span><span class="refpurpose"> — removes a user-authentication system from VISHNU</span></dt></dl></dd><dt><span class="reference"><a href="#idp581664">II. UMS C++ API Reference</a></span></dt><dd><dl><dt><span class="refentrytitle"><a href="#idp582016">addUser</a></span><span class="refpurpose"> — adds a new VISHNU user</span></dt><dt><span class="refentrytitle"><a href="#idp596408">updateUser</a></span><span class="refpurpose"> — updates the user information except the userId and the password</span></dt><dt><span class="refentrytitle"><a href="#idp610728">deleteUser</a></span><span class="refpurpose"> — removes a user from VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp623888">resetPassword</a></span><span class="refpurpose"> — resets the password of a user</span></dt><dt><span class="refentrytitle"><a href="#idp638224">saveConfiguration</a></span><span class="refpurpose"> — saves the configuration of VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp649792">restoreConfiguration</a></span><span class="refpurpose"> — restores the configuration of VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp661728">addMachine</a></span><span class="refpurpose"> — adds a new machine in VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp675176">updateMachine</a></span><span class="refpurpose"> — updates machine description</span></dt><dt><span class="refentrytitle"><a href="#idp688240">deleteMachine</a></span><span class="refpurpose"> — removes a machine from VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp700768">listUsers</a></span><span class="refpurpose"> — lists VISHNU users</span></dt><dt><span class="refentrytitle"><a href="#idp714568">configureDefaultOption</a></span><span class="refpurpose"> — configures a default option value</span></dt><dt><span class="refentrytitle"><a href="#idp728672">addAuthSystem</a></span><span class="refpurpose"> — adds a new user-authentication system in VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp742168">updateAuthSystem</a></span><span class="refpurpose"> — updates a user-authentication system in VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp756176">deleteAuthSystem</a></span><span class="refpurpose"> — removes a user-authentication system from VISHNU</span></dt></dl></dd><dt><span class="reference"><a href="#idp768808">III. UMS Python API Reference</a></span></dt><dd><dl><dt><span class="refentrytitle"><a href="#idp769160">VISHNU.addUser</a></span><span class="refpurpose"> — adds a new VISHNU user</span></dt><dt><span class="refentrytitle"><a href="#idp786056">VISHNU.updateUser</a></span><span class="refpurpose"> — updates the user information except the userId and the password</span></dt><dt><span class="refentrytitle"><a href="#idp802944">VISHNU.deleteUser</a></span><span class="refpurpose"> — removes a user from VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp818488">VISHNU.resetPassword</a></span><span class="refpurpose"> — resets the password of a user</span></dt><dt><span class="refentrytitle"><a href="#idp835696">VISHNU.saveConfiguration</a></span><span class="refpurpose"> — saves the configuration of VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp849472">VISHNU.restoreConfiguration</a></span><span class="refpurpose"> — restores the configuration of VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp863592">VISHNU.addMachine</a></span><span class="refpurpose"> — adds a new machine in VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp879856">VISHNU.updateMachine</a></span><span class="refpurpose"> — updates machine description</span></dt><dt><span class="refentrytitle"><a href="#idp895352">VISHNU.deleteMachine</a></span><span class="refpurpose"> — removes a machine from VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp910240">VISHNU.listUsers</a></span><span class="refpurpose"> — lists VISHNU users</span></dt><dt><span class="refentrytitle"><a href="#idp926056">VISHNU.configureDefaultOption</a></span><span class="refpurpose"> — configures a default option value</span></dt><dt><span class="refentrytitle"><a href="#idp942672">VISHNU.addAuthSystem</a></span><span class="refpurpose"> — adds a new user-authentication system in VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp958904">VISHNU.updateAuthSystem</a></span><span class="refpurpose"> — updates a user-authentication system in VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp975424">VISHNU.deleteAuthSystem</a></span><span class="refpurpose"> — removes a user-authentication system from VISHNU</span></dt></dl></dd><dt><span class="reference"><a href="#idp990416">IV. IMS Command reference</a></span></dt><dd><dl><dt><span class="refentrytitle"><a href="#idp990768">vishnu_get_processes</a></span><span class="refpurpose"> — displays the list of the VISHNU processes running on machines</span></dt><dt><span class="refentrytitle"><a href="#idp1003856">vishnu_set_system_info</a></span><span class="refpurpose"> — updates the system information of a machine</span></dt><dt><span class="refentrytitle"><a href="#idp1019408">vishnu_set_system_threshold</a></span><span class="refpurpose"> — sets a threshold on a machine of a system</span></dt><dt><span class="refentrytitle"><a href="#idp1033336">vishnu_get_system_threshold</a></span><span class="refpurpose"> — gets a system threshold on a machine</span></dt><dt><span class="refentrytitle"><a href="#idp1048592">vishnu_define_user_identifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the users</span></dt><dt><span class="refentrytitle"><a href="#idp1061568">vishnu_define_machine_identifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the machines</span></dt><dt><span class="refentrytitle"><a href="#idp1074608">vishnu_define_job_identifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the jobs</span></dt><dt><span class="refentrytitle"><a href="#idp1087528">vishnu_define_transfer_identifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the file transfers</span></dt><dt><span class="refentrytitle"><a href="#idp1100496">vishnu_define_auth_identifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the authentication system</span></dt><dt><span class="refentrytitle"><a href="#idp1113472">vishnu_load_shed</a></span><span class="refpurpose"> — sheds load on a machine</span></dt><dt><span class="refentrytitle"><a href="#idp1130120">vishnu_set_update_frequency</a></span><span class="refpurpose"> — sets the update frequency of the IMS tables</span></dt><dt><span class="refentrytitle"><a href="#idp1142536">vishnu_stop</a></span><span class="refpurpose"> — To stop (and do not try to relaunch) a SeD</span></dt><dt><span class="refentrytitle"><a href="#idp1157912">vishnu_restart</a></span><span class="refpurpose"> — To restart a SeD or a MA</span></dt><dt><span class="refentrytitle"><a href="#idp1173296">vishnu_define_work_identifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the work</span></dt></dl></dd><dt><span class="reference"><a href="#idp1186312">V. IMS C++ API Reference</a></span></dt><dd><dl><dt><span class="refentrytitle"><a href="#idp1186664">getProcesses</a></span><span class="refpurpose"> — displays the list of the VISHNU processes running on machines</span></dt><dt><span class="refentrytitle"><a href="#idp1195744">setSystemInfo</a></span><span class="refpurpose"> — updates the system information of a machine</span></dt><dt><span class="refentrytitle"><a href="#idp1204216">setSystemThreshold</a></span><span class="refpurpose"> — sets a threshold on a machine of a system</span></dt><dt><span class="refentrytitle"><a href="#idp1212920">getSystemThreshold</a></span><span class="refpurpose"> — gets a system threshold on a machine</span></dt><dt><span class="refentrytitle"><a href="#idp1222600">defineUserIdentifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the users</span></dt><dt><span class="refentrytitle"><a href="#idp1231464">defineMachineIdentifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the machines</span></dt><dt><span class="refentrytitle"><a href="#idp1240376">defineJobIdentifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the jobs</span></dt><dt><span class="refentrytitle"><a href="#idp1249160">defineTransferIdentifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the file transfers</span></dt><dt><span class="refentrytitle"><a href="#idp1258000">defineAuthIdentifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the authentication system</span></dt><dt><span class="refentrytitle"><a href="#idp1266856">loadShed</a></span><span class="refpurpose"> — sheds load on a machine</span></dt><dt><span class="refentrytitle"><a href="#idp1279232">setUpdateFrequency</a></span><span class="refpurpose"> — sets the update frequency of the IMS tables</span></dt><dt><span class="refentrytitle"><a href="#idp1287560">stop</a></span><span class="refpurpose"> — To stop (and do not try to relaunch) a SeD</span></dt><dt><span class="refentrytitle"><a href="#idp1297136">restart</a></span><span class="refpurpose"> — To restart a SeD or a MA</span></dt><dt><span class="refentrytitle"><a href="#idp1306608">defineWorkIdentifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the work</span></dt></dl></dd><dt><span class="reference"><a href="#idp1315512">VI. IMS Python API Reference</a></span></dt><dd><dl><dt><span class="refentrytitle"><a href="#idp1315864">VISHNU.getProcesses</a></span><span class="refpurpose"> — displays the list of the VISHNU processes running on machines</span></dt><dt><span class="refentrytitle"><a href="#idp1326384">VISHNU.setSystemInfo</a></span><span class="refpurpose"> — updates the system information of a machine</span></dt><dt><span class="refentrytitle"><a href="#idp1336688">VISHNU.setSystemThreshold</a></span><span class="refpurpose"> — sets a threshold on a machine of a system</span></dt><dt><span class="refentrytitle"><a href="#idp1347232">VISHNU.getSystemThreshold</a></span><span class="refpurpose"> — gets a system threshold on a machine</span></dt><dt><span class="refentrytitle"><a href="#idp1358448">VISHNU.defineUserIdentifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the users</span></dt><dt><span class="refentrytitle"><a href="#idp1369136">VISHNU.defineMachineIdentifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the machines</span></dt><dt><span class="refentrytitle"><a href="#idp1379888">VISHNU.defineJobIdentifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the jobs</span></dt><dt><span class="refentrytitle"><a href="#idp1390520">VISHNU.defineTransferIdentifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the file transfers</span></dt><dt><span class="refentrytitle"><a href="#idp1401200">VISHNU.defineAuthIdentifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the authentication system</span></dt><dt><span class="refentrytitle"><a href="#idp1411880">VISHNU.loadShed</a></span><span class="refpurpose"> — sheds load on a machine</span></dt><dt><span class="refentrytitle"><a href="#idp1425552">VISHNU.setUpdateFrequency</a></span><span class="refpurpose"> — sets the update frequency of the IMS tables</span></dt><dt><span class="refentrytitle"><a href="#idp1435728">VISHNU.stop</a></span><span class="refpurpose"> — To stop (and do not try to relaunch) a SeD</span></dt><dt><span class="refentrytitle"><a href="#idp1447104">VISHNU.restart</a></span><span class="refpurpose"> — To restart a SeD or a MA</span></dt><dt><span class="refentrytitle"><a href="#idp1458392">VISHNU.defineWorkIdentifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the work</span></dt></dl></dd></dl></div><div class="chapter" title="Chapter 1. Présentation du document"><div class="titlepage"><div><div><h2 class="title"><a id="idp42720"></a>Chapter 1. Présentation du document</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#idp43096">Objectifs du document</a></span></dt><dt><span class="section"><a href="#idp44016">Prérequis</a></span></dt><dt><span class="section"><a href="#idp46976">Structure du document</a></span></dt><dt><span class="section"><a href="#idp63864">Documents de références</a></span></dt></dl></div><div class="section" title="Objectifs du document"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp43096"></a>Objectifs du document</h2></div></div></div><p>
      Ce document décrit l'installation, la configuration et l'administration
      des différents composants de la suite logicielle VISHNU.
      </p></div><div class="section" title="Prérequis"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp44016"></a>Prérequis</h2></div></div></div><p>
    Pour s'assurer un bon confort lors de la lecture de ce document, le lecteur
    doit au moins avoir des connaissances basiques en administration système
    en environnement GNU/Linux. En particulier et selon votre système d'exploitation,
    la maitrise d'un outil de gestion de paquets tels que
    <span class="emphasis"><em>apt-get</em></span>, <span class="emphasis"><em>dpkg</em></span>, <span class="emphasis"><em>rpm</em></span>,
    <span class="emphasis"><em>yum</em></span> ou <span class="emphasis"><em>zypper</em></span>
    est vivement recommandée pour faciliter la recherche et l'installation des
    dépendances logicielles de VISHNU.
    </p><p>Par ailleurs, vous devez avoir bien compris l'architecture de déploiement
    de VISHNU. Cf. chapitre 4 du document [ARCH].</p></div><div class="section" title="Structure du document"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp46976"></a>Structure du document</h2></div></div></div><p>Ce document contient les parties suivantes:
      </p><p>
      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Définitions</p></li><li class="listitem"><p>Installation</p></li><li class="listitem"><p>Déploiement</p></li><li class="listitem"><p>Administration</p></li><li class="listitem"><p>Référence des commandes (en anglais)</p></li><li class="listitem"><p>Référence de l'API C++ (en anglais)</p></li><li class="listitem"><p>Référence de l'API Python (en anglais)</p></li></ul></div><p>
      </p></div><div class="section" title="Documents de références"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp63864"></a>Documents de références</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>[ARCH] D1.1g-VISHNU Technical Architecture : description de l'architecture de l'application VISHNU</p></li><li class="listitem"><p>[VISHNU_USERMANUAL] VISHNU User Manual : guide de l'utilisateur VISHNU.</p></li><li class="listitem"><p>[VISHNU_API] VISHNU API : API VISHNU contenant les signatures et la définition des objets.</p></li></ul></div></div></div><div class="chapter" title="Chapter 2. Acronymes et Glossaire"><div class="titlepage"><div><div><h2 class="title"><a id="idp66088"></a>Chapter 2. Acronymes et Glossaire</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#idp66440">Terminologies</a></span></dt></dl></div><div class="section" title="Terminologies"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp66440"></a>Terminologies</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Sysfera-DS : Désigne la suite de logiciel open source développé par SysFera
  pour simplifier et l'utilisation des ressources de calcul à grande échelle.
  La suite comprend VISHNU, SysFera WebBoard et DIET.
  </p></li><li class="listitem"><p>VISHNU est une boite à outil qui permet la fédération et l'accès unifié
  à des plateformes de calcul distribués (clusters, grilles et cloud).
  </p></li><li class="listitem"><p>FMS  (File Management Service): désigne le système de gestion de données dans
  VISHNU.</p></li><li class="listitem"><p>IMS (Information Management Service): désigne le système de gestion
  d'information dans VISHNU.</p></li><li class="listitem"><p>TMS : Task Management Service ou système de gestion de tâches</p></li><li class="listitem"><p>UMS : User Management Service ou système de gestion des utilisateurs</p></li><li class="listitem"><p>SeD FMS : désigne l'exécutable qui supporte le service FMS. </p></li><li class="listitem"><p>SeD IMS : désigne l'exécutable qui supporte le service VISHNU. </p></li><li class="listitem"><p>SeD TMS : désigne l'exécutable qui supporte le service TMS. </p></li><li class="listitem"><p>SeD UMS : désigne l'exécutable qui supporte le service UMS. </p></li><li class="listitem"><p>Client FMS : désigne l'ensemble des programmes pour accéder
  aux services FMS. </p></li><li class="listitem"><p>Client IMS : désigne l'ensemble des programmes  pour accéder aux services IMS. </p></li><li class="listitem"><p>Client TMS : désigne l'ensemble des programmes qui permettent d'accéder
  aux services offerts par le Sed TMS. </p></li><li class="listitem"><p>Client UMS : désigne l'ensemble pour accéder aux services UMS. </p></li><li class="listitem"><p>
   Dispatcher: est un composant de VISHNU ayant pour rôle de simplifier la configuration
   des clients dans des achitectures complexes. Comme décrit dans le document d'architecture [ARCH],
   il sert de broker entre les clients et différents batch schedulers dont il rend
   l'accès transparent pour les utilisateurs.
   </p></li><li class="listitem"><p>
   Supervisord est un outil de supervision externe que l'on peut intégrer dans
   l'environnement de déploiement pour contrôler le démarrage, l'arrêt et le
   redemarrage automatique des services.
   </p></li><li class="listitem"><p>LDAP : Lightweight Directory Access Protocol, est un protocole de gestion
  d'annuaires.</p></li><li class="listitem"><p>SQL (Structured Query Language) : est un langage avancée de requêtes sur
  les bases de données.</p></li><li class="listitem"><p>ZeroMQ aussi appelé ZMQ est une bibliothèque de communication par passage
  de messages asynchrones utilisé dans VISHNU pour assurer la communication entre
  les différents composants (clients, SeD et Dispatcher).</p></li><li class="listitem"><p>Préfrontale : c'est une machine mise en amont des frontales des serveurs de calcul. </p></li></ul></div></div></div><div class="chapter" title="Chapter 3. Installation à partir des sources"><div class="titlepage"><div><div><h2 class="title"><a id="idp79456"></a>Chapter 3. Installation à partir des sources</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#idp80200">Prérequis</a></span></dt><dt><span class="section"><a href="#idp97656"> Compilation des sources </a></span></dt><dt><span class="section"><a href="#idp132864">Vérifier l'installation</a></span></dt></dl></div><p>Ce chapitre décrit l'installation de VISHNU à partir des sources.
  </p><div class="section" title="Prérequis"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp80200"></a>Prérequis</h2></div></div></div><p>La compilation nécessite les bibliothèques suivantes :
  </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><span class="bold"><strong>Dépendances obligatoires</strong></span></p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>GCC : Version 4.4.3 ou ultérieure.</p></li><li class="listitem"><p>CMAKE : Version 2.8 ou ultérieure.</p><p>GNU Make ou Ninja: Générateurs exécutables. Comme alternative à Make, le générateur Ninja
  est plus rapide et est utile pour réduire la durée de compilation.Surtout quand vous avez besoin
  de compiler plusieurs modules de VISHNU sur la même machine.
  </p></li><li class="listitem"><p>BOOST 1.46.1 ou ultérieure. Au   moins les modules <span class="emphasis"><em>program_options</em></span>, <span class="emphasis"><em>date_time, thread, filesystem,
  system, unit_test_framework, serialization, random</em></span> et <span class="emphasis"><em>regex</em></span> doivent
  être installés
  </p></li><li class="listitem"><p>ZeroMQ 2.x. Non testé avec les versions 3.x</p></li><li class="listitem"><p>libuuid : est une dépendance de ZeroMQ</p></li><li class="listitem"><p> GLIBC 2.7 ou ultérieure</p></li><li class="listitem"><p>OpenSSH 4.2 ou ultérieure</p></li><li class="listitem"><p>Moteur de base de données :</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem"><p>PostGreSQL 8.0 minimum, ou</p></li><li class="listitem"><p>MySQL 5.1 minimum</p></li></ul></div></li></ul></div></li><li class="listitem"><p><span class="bold"><strong>Dépendances spécifiques pour le module UMS</strong></span></p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>OpenLDAP 2.4 ou ultérieure</p></li></ul></div></li><li class="listitem"><p><span class="bold"><strong>Dépendances spécifiques pour IMS</strong></span></p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>Sigar 1.6.4 disponible sur sourceforge (http://sourceforge.net/projects/sigar/files/sigar/1.6/)</p></li><li class="listitem"><p>Supervisord 3.0.a, installable à partir des outils Python (ex. pip install supervisord)</p></li><li class="listitem"><p>Xmlrpc-c  2.1.19
  </p></li></ul></div></li><li class="listitem"><p><span class="bold"><strong>Dépendances spécifiques aux batch schedulers</strong></span></p><p>Seules les versions indiquées sont actuellements supportées.</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>Torque 2.3.6</p></li><li class="listitem"><p>IBM LoadLeveler 2.x ou 3.x</p></li><li class="listitem"><p>SLURM 2.2.x, 2.3.x ou 2.4.x</p></li><li class="listitem"><p>LSF 7.0.6.134609</p></li><li class="listitem"><p>Grid Engine 2011.11</p></li><li class="listitem"><p>PBSPro 10.4</p></li></ul></div></li><li class="listitem"><p><span class="bold"><strong>Dépendences nécessaires à la génération des APIs Python et Java</strong></span></p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>SWIG 1.3.40 (ATTENTION : la version 2 de SWIG n'est pas supporté).</p></li><li class="listitem"><p>JAVA SDK 1.6.</p></li><li class="listitem"><p>Python 2.6</p></li></ul></div></li></ul></div></div><div class="section" title="Compilation des sources"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp97656"></a> Compilation des sources </h2></div></div></div><p>
  VISHNU utilise CMake comme système de construction. Les différentes fonctionnalités
  sont activées ou désactivées à la demande grâce à des variables Cmake spécifiques.
  Positionnée à <span class="emphasis"><em>ON</em></span> une variable permet d'activer la fonctionnalité
  associée. Ex. -DCOMPILE_UMS=ON active la compilation du module UMS.
  Un positionnement à <span class="emphasis"><em>OFF</em></span> désactive la compilation de la fonctionnée.
  Ex. -DCOMPILE_UMS=ON désactive la compilation du module UMS.
  </p><p>
  Dans certains cas on peut avoir besoin de mots clés spécifiques pour activer une fonctionnalité.
  Ex. -DVISHNU_BATCH=SLURM permet de sélectionner SLURM comme batch scheduler sous-jacent à TMS.
  </p><p>
  La liste ci-dessous décrit les variables disponibles :
  </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  CLIENT_ONLY permet si on le souhaite de ne compiler les codes clients. Par défault les
  codes clients et serveurs sont compilés.
  </p></li><li class="listitem"><p>
  CMAKE_INSTALL_PREFIX définit le répertoire d'installation. Par défault l'installation est
  réalisée dans <span class="emphasis"><em>/usr/local</em></span>.
  </p></li><li class="listitem"><p> COMPILE_UMS indique si le module UMS sera compilé.</p><p>Ce module est activé par défault (-DCOMPILE_UMS=ON).
  </p></li><li class="listitem"><p>
  COMPILE_FMS spécifie si le module FMS sera compilé. </p><p>FMS est désactivé par défaut (-DCOMPILE_FMS=OFF),
  lorsqu'il est activé le module COMPILE_UMS dont il dépend doit être également activé (-DCOMPILE_UMS=ON).
  </p></li><li class="listitem"><p>
  COMPILE_TMS permet de préciser si le module TMS sera compilé. </p><p>
  Par défaut désactivé, si TMS est activé (-DCOMPILE_TMS=ON), alors les modules UMS et FMS dont il
  dépend doivent être égalements activés (-DCOMPILE_UMS=ON et -DCOMPILE_FMS=ON).
  </p><p>Par ailleurs lorsque TMS est activé, on doit obligatoirement sélectionner un batch scheduler
  grâce aux options VISHNU_BATCH et VISHNU_BATCH_VERSION (ex. VISHNU_BATCH=SLURM et VISHNU_BATCH_VERSION=2.2).
  </p></li><li class="listitem"><p>
  COMPILE_IMS indique si le module IMS sera compilé. </p><p>IMS est désactivé par défaut. Lorsqu'il est activé, tous les autres modules doivent
  l'être également (-DCOMPILE_UMS=ON, -DCOMPILE_TMS=ON et -DCOMPILE_FMS=ON).
  </p></li><li class="listitem"><p>
  ENABLE_PYTHON : Désactivée par défaut cette option permet d'activer ou non la compilation du code PYTHON.
  </p></li><li class="listitem"><p>
  ENABLE_JAVA : Désactivée par défaut cette option permet d'activer ou non la compilation du code JAVA.
  </p></li><li class="listitem"><p>
  VISHNU_USE_LDAP permet d'activer le support LDAP pour l'authentification. Option Désactivée par défaut.
  </p></li><li class="listitem"><p>
  ENABLE_SWIG permet d'activer la generation du code des adapteurs Python et Java.
  </p><p>Désactivée par défaut cette option doit obligatoirement être activée si on choisit de ne pas compiler
  tous les modules VISHNU. C'est-à-dire lorsqu'au moins l'une des options COMPILE_UMS, COMPILE_TMS, COMPILE_FMS
  ou COMPILE_IMS est à OFF. Par ailleurs, l'activation de cette option nécessite que SWIG ait été installé au préalable.
  </p></li><li class="listitem"><p>VISHNU_BATCH indique le batch scheduler à activer (TORQUE par défaut).</p><p>Les variables (BATCHNAME)_INCLUDE_DIR et (BATCHNAME)_LIB doivent être renseignées.</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>
  LOADLEVELER_INCLUDE_DIR doit pointer vers le chemin absolu du fichier llapi.h
  </p></li><li class="listitem"><p>
  LOADLEVELER_LIB doit pointer vers le chemin absolu vers la librairie llapi.so
  </p></li><li class="listitem"><p>
  TORQUE_INCLUDE_DIR indique le chemin absolu vers le fichier pbs_ifl.h
  </p></li><li class="listitem"><p>
  TORQUE_LIB indique le chemin absolu jusqu'à la librairie libtorque.so
  </p></li><li class="listitem"><p>
  SLURM_INCLUDE_DIR indique le chemin absolu vers le fichier slurm/slurm.h
  </p></li><li class="listitem"><p>
  SLURM_LIB indique le chemin absolu jusqu'à la librairie libslurm.so
  </p></li><li class="listitem"><p>
  LSF_INCLUDE_DIR indique le chemin absolu vers le fichier lsf/lsbatch.h
  </p></li><li class="listitem"><p>
  LSBATCH_LIB indique le chemin absolu jusqu'à la librairie libbat.so
  </p></li><li class="listitem"><p>
  LSF_LIB indique le chemin absolu jusqu'à la librairie liblsf.so
  </p></li><li class="listitem"><p>
  SGE_ROOT indique le chemin absolu jusqu'au répertoire d'installation de Grid Engine
  </p></li><li class="listitem"><p>
  SGE_INCLUDE_DIR indique le chemin absolu vers le fichier drmaa.h
  </p></li><li class="listitem"><p>
  SGE_BIN_DIR indique le chemin absolu jusqu'aux binaires de Grid Engine
  </p></li><li class="listitem"><p>
  SGE_LIB indique le chemin absolu jusqu'à la librairie libdrmaa.so
  </p></li><li class="listitem"><p>
  PBS_INCLUDE_DIR indique le chemin absolu vers le fichier pbs_ifl.h
  </p></li><li class="listitem"><p>
  PBS_LIB indique le chemin absolu jusqu'à la librairie libpbs.so
  </p></li></ul></div></li><li class="listitem"><p>
  VISHNU_BATCH_VERSION indique la version du batch scheduler utilisée
  </p></li><li class="listitem"><p>
  BUILD_TESTING: Désactivée par défaut cette variable spécifie si le module de test sera compilé.
  </p></li></ul></div><p>
  </p><p>
  Ci-dessous nous décrirons les étapes pour installer les clients et les serveurs d'UMS et TMS dans /opt/vishnu.
  TORQUE est utilisé comme backend à TMS. La compilation des APIs Python sera également activée.
  </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>1. Créer un répertoire build à la racine du projet et se placer dedans</p><p>$ <span class="emphasis"><em>mkdir build</em></span></p><p>$ <span class="emphasis"><em>cd build</em></span></p></li><li class="listitem"><p>2. Générer le Makefile </p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>En utilisant Make</p><p>$ <span class="emphasis"><em>cmake -DCMAKE_INSTALL_PREFIX=/opt/vishnu ..  \</em></span></p><p><span class="emphasis"><em>  -DENABLE_SWIG=ON  \</em></span></p><p><span class="emphasis"><em>  -DENABLE_PYTHON=ON  \</em></span></p><p><span class="emphasis"><em>  -DCOMPILE_UMS=ON  \</em></span></p><p><span class="emphasis"><em>  -DCOMPILE_TMS=ON  \</em></span></p><p><span class="emphasis"><em>  -DVISHNU_BATCH=TORQUE  \</em></span></p><p><span class="emphasis"><em>  -DVISHNU_BATCH_VERSION=2.3  \</em></span></p><p><span class="emphasis"><em>  -DTORQUE_DIR=/opt/torque</em></span></p></li><li class="listitem"><p>En utilisant Ninja : changement du générateur via le flag CMAKE_GENERATOR.</p><p>$ <span class="emphasis"><em>cmake -DCMAKE_INSTALL_PREFIX=/opt/vishnu ..  \</em></span></p><p><span class="emphasis"><em>  -DENABLE_SWIG=ON  \</em></span></p><p><span class="emphasis"><em>  -DENABLE_PYTHON=ON \</em></span></p><p><span class="emphasis"><em>  -DCOMPILE_UMS=ON  \</em></span></p><p><span class="emphasis"><em>  -DCOMPILE_TMS=ON  \</em></span></p><p><span class="emphasis"><em>  -DVISHNU_BATCH=TORQUE  \</em></span></p><p><span class="emphasis"><em>  -DVISHNU_BATCH_VERSION=2.3  \</em></span></p><p><span class="emphasis"><em>  -DTORQUE_DIR=/opt/torque \</em></span></p><p><span class="bold"><strong>  -DCMAKE_GENERATOR=Ninja</strong></span></p></li></ul></div></li><li class="listitem"><p>3. Lancer la compilation</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>En utilisant Make</p><p>$ <span class="emphasis"><em>make -j 2</em></span></p><p>L'option -j 2 permet de lancer la compilation avec deux processus.</p></li><li class="listitem"><p>En utilisant Ninja</p><p>$ <span class="emphasis"><em>ninja -j 2</em></span></p><p>L'option -j 2 permet de lancer la compilation avec deux processus.</p></li></ul></div></li><li class="listitem"><p>4. Installer les binaires</p><p>$ <span class="emphasis"><em>make install</em></span></p><p>Cette étape peut nécessiter des droits d'administrateur.</p></li></ul></div><p><span class="bold"><strong>Note</strong></span>: pensez à ajouter le répertoire
  d'installation dans le $PATH.</p></div><div class="section" title="Vérifier l'installation"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp132864"></a>Vérifier l'installation</h2></div></div></div><p>
    En supposant que la variable d'environnement INSTALL_PREFIX pointe à la racine
    du repertoire d'installation (/opt/vishnu dans notre exemple), vous devez avoir les
    programmes suivantes en fonction des modules installés:
    </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
     $INSTALL_PREFIX/sbin/dispatcher : binaire du Dispatcher
     </p></li><li class="listitem"><p>
     $INSTALL_PREFIX/sbin/umssed : binaire du SeD UMS
     </p></li><li class="listitem"><p>
     $INSTALL_PREFIX/sbin/fmssed : binaire du SeD FMS
     </p></li><li class="listitem"><p>
     $INSTALL_PREFIX/sbin/tmssed : binaire du SeD TMS
     </p></li><li class="listitem"><p>
     $INSTALL_PREFIX/sbin/imssed : binaire du SeD IMS
     </p></li><li class="listitem"><p>
     $INSTALL_PREFIX/bin : contient les clients ligne de commande dont les noms sont
     préfixés par <span class="emphasis"><em>vishnu_*</em></span>.
     </p><p>
     Ex. vishnu_connect est le client ligne de commande pour se connecter à VISHNU.
     </p></li><li class="listitem"><p>
     $INSTALL_PREFIX/lib : contient les librairies dynamiques nommées sous la
     forme <span class="emphasis"><em>libvishnu*</em></span>.
     </p></li><li class="listitem"><p>
     $INSTALL_PREFIX/share : contient les pages de manuel pour les différents
     programmes ligne de commande.
     </p></li><li class="listitem"><p>
     $INSTALL_PREFIX/etc : contient des exemples de fichiers de configuration.
     </p></li></ul></div><p>
    </p></div></div><div class="chapter" title="Chapter 4. Configuration de la base de données"><div class="titlepage"><div><div><h2 class="title"><a id="idp139648"></a>Chapter 4. Configuration de la base de données</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#idp140944">Utiliser une base de données MySQL</a></span></dt><dt><span class="section"><a href="#idp148632">Utiliser une base de données PostGreSQL</a></span></dt><dt><span class="section"><a href="#idp155880">Utilisation de TMS en mode natif: TMS Posix Shell</a></span></dt><dt><span class="section"><a href="#idp158016">Utilisation de LDAP</a></span></dt><dt><span class="section"><a href="#idp162784">Utilisation d'une base de données distante</a></span></dt></dl></div><p>Les fichiers de configuration de la base de données sont disponibles dans
  le répertoire core/database du package d'installation VISHNU. Seules des bases
  de données PostgreSQL ou MySQL sont actuellement supportées. Une seule base de
  données est nécessaire et suffisante pour l'ensemble des composants d'une
  infrastructure VISHNU (UMS, TMS, IMS et IMS).</p><div class="section" title="Utiliser une base de données MySQL"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp140944"></a>Utiliser une base de données MySQL</h2></div></div></div><p>Nous supposons ici que vous avez déjà une installation de MySQL opérationnelle.
    Si ce n'est pas le cas référez-vous à la documentation officielle pour procéder à
    l'installation.
    </p><p>Vous devez également disposer des droits d'administration sur cette
    installation (connexion à MySQL en tant l'utilisateur 'root').</p><p>Vous aurez besoin des scripts <span class="emphasis"><em>mysql_create.sql</em></span>
    et <span class="emphasis"><em>database_init.sql</em></span> disponibles dans le dossier
    <span class="emphasis"><em>./core/database</em></span> de l'arborescence des sources.
    Le premier script (<span class="emphasis"><em>mysql_create.sql</em></span>) sert à créer
    les tables de la base de données tandis que le second sert à initialiser
    les données de la base.
    </p><p>Pour la création de la base de données VISHNU, suivez les étapes suivantes :
    </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Se connecter au serveur MySQL en tant que root :</p><p>$ <span class="emphasis"><em>mysql -h mysql@server- -u root -p </em></span> # replacer mysql@server par l'adresse de votre serveur MySQL</p></li><li class="listitem"><p>Créer la base de données Vishnu</p><p>$ <span class="emphasis"><em>create database vishnu ; </em></span></p></li><li class="listitem"><p>Se connecter sur la base de données</p><p>$ <span class="emphasis"><em>use vishnu ; </em></span></p></li><li class="listitem"><p>Créer les tables</p><p>$ <span class="emphasis"><em>source /path/to/mysql_create.sql</em></span></p></li><li class="listitem"><p>Initialiser la base de données</p><p>$ <span class="emphasis"><em>source /path/to/database_init.sql</em></span></p></li></ul></div><p>
    </p></div><div class="section" title="Utiliser une base de données PostGreSQL"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp148632"></a>Utiliser une base de données PostGreSQL</h2></div></div></div><p>Nous supposons également que vous avez déjà une installation de PostGreSQL
    opérationnelle. Si ce n'est pas le cas référez-vous à la documentation officielle pour
    procéder à l'installation.</p><p>Vous devez également disposer des droits d'administration sur cette installation
    (accès en tant qu'utilisateur système 'postgres').
    </p><p>Pour une nouvelle installation de la base de données, les scripts
    <span class="emphasis"><em>postgre_create.sql</em></span> et <span class="emphasis"><em>database_init.sql</em></span>
    doivent respectivement être utilisés pour créer et initialiser la base de données.
    </p><p>Pour créer et initialiser la base de données, exécuter les étapes
    suivantes à partir de votre serveur PostGreSQL :
    </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Se connecter en tant que l'utilisateur 'postgres' (root):</p><p>$ <span class="emphasis"><em>su postgres</em></span></p></li><li class="listitem"><p>Créer la base de données vishnu</p><p>$ <span class="emphasis"><em>createdb vishnu ; </em></span></p></li><li class="listitem"><p>Se connecter à la base de données</p><p>$ <span class="emphasis"><em>psql vishnu ; </em></span></p></li><li class="listitem"><p>Créer le schéma de la base de données</p><p>$ <span class="emphasis"><em>\i /path/to/mysql_create.sql </em></span></p></li><li class="listitem"><p>Initialiser la base de données</p><p>$ <span class="emphasis"><em>\i /path/to/database_init.sql</em></span></p></li></ul></div><p>
    </p></div><div class="section" title="Utilisation de TMS en mode natif: TMS Posix Shell"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp155880"></a>Utilisation de TMS en mode natif: TMS Posix Shell</h2></div></div></div><p>
      Après installation, il est possible d'utiliser les fonctionnalités de TMS sur une machine
      ne possédant pas de batch scheduler sous jacent. Pour ce faire, il faut mettre le batch
      scheduler à la valeur "POSIX" lors de la compilation. Le flag dans le fichier de configuration
      du serveur TMS sera également POSIX. Il faut noter que lors de la compilation de
      VISHNU pour un batch scheduler classique, ce pseudo batch est automatiquement compilé,
      et l'utilisateur peut lors du submit explicitement demander à soumettre sur le batch
      posix en utilisant l'option -p. Sinon, c'est systématiquement le vrai batch scheduler
      auquel vishnu soumet. Cela implique que d'un point de vu système, vishnu a constamment
      3 processus 'tmssed' dans le cas d'un batch scheduler classique, un premier qui est le
      serveur réalisant les services, et les 2 autres correspondent à des moniteurs utilisés
      par vishnu (pour interroger les batchs schedulers sous-jacents) pour avoir les données
      associées aux jobs à jour. De plus, afin de gérer les jobs utilisateurs et pouvoir les
      annuler, pour chaque utilisateur ayant un job, cet utilisateur aura un démon qui
      tournera et pouvant controller les jobs, et fournir des informations au moniteur au
      travers d'une socket unix.
      </p></div><div class="section" title="Utilisation de LDAP"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp158016"></a>Utilisation de LDAP</h2></div></div></div><p>Nous supposons que vous avez déjà une installation de LDAP opérationnelle.
    Si ce n'est pas le cas, référer à la documentation officielle pour procéder à
    l'installation. Vous pouvez également installer ces dépendances à partir du
    gestionnaire de paquets de votre système.  Sur les systèmes basés sur Debian
    par exemple, vous devez installer les paquets suivants: <span class="emphasis"><em>slapd,
    libldap-2.4-2, libldap2-dev</em></span> et <span class="emphasis"><em>ldap-utils</em></span></p><p>Pour pouvoir utiliser l'authentification avec LDAP, le flag de compilation
    VISHNU_USE_LDAP doit être activé à la compilation. Une fois VISHNU compilé,
    une option de configuration du serveur UMS doit être mise dans le fichier de
    configuration. Cette option est nommée 'authenticationType' et peut actuellement
    supporter 4 valeurs :
    </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
    UMS : Authentifie uniquement en utilisant la base de données
    </p></li><li class="listitem"><p>
    LDAPUMS : Pour chaque couple (nom d'utilisateur, mot de passe), essaye
    d'authentifier avec LDAP en premier puis avec UMS
    </p></li><li class="listitem"><p>
    UMSLDAP : Pour chaque couple (nom d'utilisateur, mot de passe), essaye
    d'authentifier avec UMS en premier puis avec LDAP
    </p></li><li class="listitem"><p>
    LDAP : Authentifie uniquement en utilisant LDAP
    </p></li></ul></div><p>
    </p></div><div class="section" title="Utilisation d'une base de données distante"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp162784"></a>Utilisation d'une base de données distante</h2></div></div></div><p>
    Vishnu repose sur une base de données. Les serveurs de Vishnu ont besoin de
    s'y connecter pour fonctionner. Lorsqu'il n'y a aucune restriction sur les
    ports accessibles entre différentes machines (cas fréquent dans un réseau
    local), il n'y a généralement pas de problème pour se connecter à une base
    de données distante en spécifiant correctement le databaseHost dans les
    fichiers de configuration des éléments de Vishnu.
    Dans le cas où il y a des restrictions sur les ports ouverts, ou dans le cas
    de réseaux complexes avec du NAT par exemple, il est souvent plus facile de
    passer par des tunnels ssh pour encapsuler les connexions vers la base de
    données.

    Nous avons deux cas différents pour ouvrir le tunnel. Supposons que la
    base de donnée soit sur une machine A, et l'élément Vishnu sur une machine B.
    Nous pouvons ouvrir le tunnel depuis A ou depuis B (parfois seule une de
    ces deux configuration est possible dans le cas où le ssh ne passe que dans
    un sens).
    Nous supposons que le port d'écoute de la base de données est 3306.
    </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
        Ouverture depuis la machine A vers la machine B, il faut ouvrir un tunnel
        "reverse" :
        </p><p>
        ssh -t -t -R 3306:localhost:3306 user@B
        </p></li><li class="listitem"><p>
        Ouverture depuis la machine B vers la machine A, il faut ouvrir un tunnel
        "forward" :
        </p><p>
        ssh -t -t -L 3306:localhost:3306 user@A
        </p></li></ul></div><p> Il convient maintenant de tester la connexion à la base de données.
      Sur la machine B, essayer de vous connecter avec la commande suivante :
      </p><pre class="programlisting">
      mysql -u vishnu_user -h 127.0.0.1 -p
      </pre><p>
      Après avoir tapé le mot de passe, vous devriez vous retrouver connecter
      sur la base de données sur la machine A.

      Il ne vous reste plus qu'à configurer le fichier de configuration de
      l'élément vishnu avec les éléments suivants (à adapter en fonction de votre
      configuration) :
      </p><pre class="programlisting">
      databaseType=mysql
      databaseHost=127.0.0.1
      databaseName=vishnu
      databaseUserName=vishnu_user
      databaseUserPassword=vishnu_user
      databaseConnectionsNb=5
      </pre><p>
      Attention : si vous utilisez localhost comme nom de machine pour vous connecter
      à la base de données, vous risquez de rencontrer des problèmes si mysql est installé
      sur B. En effet, mysql tente de se connecter en utilisant une socket linux
      (généralement /var/run/mysqld/mysqld.sock), au lieu de tenter de se connecter
      à une machine distante. Utilisez bien 127.0.0.1 pour databaseHost.
      </p></div></div><div class="chapter" title="Chapter 5. Déploiement"><div class="titlepage"><div><div><h2 class="title"><a id="idp170304"></a>Chapter 5. Déploiement</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#idp170656">Composants serveurs</a></span></dt><dt><span class="section"><a href="#idp173728">Configuration des composants</a></span></dt><dd><dl><dt><span class="section"><a href="#idp175480">Configuration de Supervisod</a></span></dt></dl></dd><dt><span class="section"><a href="#idp181264">Déploiement dans un même sous-réseau</a></span></dt><dt><span class="section"><a href="#idp184432">Le cas multi-réseaux</a></span></dt><dt><span class="section"><a href="#idp187760">Configuration de l'envoi des emails par VISHNU</a></span></dt><dt><span class="section"><a href="#idp196344">Configuration des clés privées/publiques ssh requises pour FMS</a></span></dt><dt><span class="section"><a href="#idp202416">Configuration des clés privées/publiques ssh requises pour TMS</a></span></dt><dt><span class="section"><a href="#idp203848">Test d'exécution d'un service depuis une machine client par shell</a></span></dt><dt><span class="section"><a href="#idp210632">Les scripts de démarage automatique</a></span></dt></dl></div><div class="section" title="Composants serveurs"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp170656"></a>Composants serveurs</h2></div></div></div><p>
    </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
     $INSTALL_PREFIX/sbin/dispatcher : binaire du Dispatcher
     </p></li><li class="listitem"><p>
     $INSTALL_PREFIX/sbin/umssed : binaire du SeD UMS
     </p></li><li class="listitem"><p>
     $INSTALL_PREFIX/sbin/fmssed : binaire du SeD FMS
     </p></li><li class="listitem"><p>
     $INSTALL_PREFIX/sbin/tmssed : binaire du SeD TMS
     </p></li><li class="listitem"><p>
     $INSTALL_PREFIX/sbin/imssed : binaire du SeD IMS
     </p></li></ul></div><p>
    </p></div><div class="section" title="Configuration des composants"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp173728"></a>Configuration des composants</h2></div></div></div><p>Cette section présente les clés de configuration des différents composants de VISHNU.
    Pour une première configuration, vous pouvez vous inspirer du fichier d'exemple
    <span class="emphasis"><em>vishnu-sample.cfg</em></span> situé dans le dossier $INSTALL_PREFIX/etc.</p><p>Les textes après un dièse '#' sont des commentaires. </p><pre class="programlisting">

# This is a commented sample configuration file for VISHNU
# Copyright (c) SysFera SA
# Last update: 16/01/2013
#

# Legends:
#  (M): Indicates that a key is mandatory for all components and MUST not be empty.
#  (M&lt;List of Components&gt;): Indicates a key is specific and mandatory for the
#                           listed components.
#  (O): Indicates that a key is optional.
#  (O)&lt;List of Components&gt;: Indicates that a key is optional only for the
#                           listed components.
#  (OS&lt;List of Components&gt;): Indicates a key is optional and specific to
#                             the listed components.
#   E.g. (OS&lt;TMS&gt;) means that a key is optional and specific to the Task
#   Management System (TMS) module.
#
# Definitions
# FMS: File Management System
# IMS: Information Management System
# TMS: Task Management System
# UMS: User Management System
# FQDN: Full Qualified Domain Name


###############################################################################
#               Common Parameters                                             #
###############################################################################
# vishnuId (M&lt;FMS,IMS,TMS,UMS&gt;): Sets the identifier of the VISHNU instance
#
vishnuId=1

# databaseType (M&lt;FMS,IMS,TMS,UMS&gt;): Defines the type of the database.
# Possible values are 'mysql' or 'postgresql'
#
databaseType=mysql

# databaseHost (M&lt;FMS,IMS,TMS,UMS&gt;): Defines the IP address or the FQDN of the
# database server.
# Here we assume that the database and VISHNU are hosted on the same server
#
databaseHost=localhost

# databaseName (M&lt;FMS,IMS,TMS,UMS&gt;): Sets the name of the database instance
#
databaseName=vishnu

# databaseUserName (M&lt;FMS,IMS,TMS,UMS&gt;): Sets the login name for authenticating
# against the database
#
databaseUserName=vishnu

# databaseUserPassword (M&lt;FMS,IMS,TMS,UMS&gt;): Sets the password associated to
# the database user
#
databaseUserPassword=vishnu


###############################################################################
#                Dispatcher Related Parameters                                #
###############################################################################


# disp_uriAddr (M&lt;Dispatcher,Client&gt;):
#  * For Dispatcher this corresponds to the address on which it'll listen on
#    for client requests
#  * For Clients this indicates the address for connecting to the Dispacther
#
disp_uriAddr=tcp://127.0.0.1:5560

# disp_uriSubs (M&lt;Dispatcher&gt;|O&lt;IMS|TMS|FMS|UMS&gt;):
# ** For the Dispatcher, it indicates the address to listen on for SeD subscription
# ** For SeD (FMS, IMS, TMS, UMS), this corresponds to the address from which
#    the module will register itself to the Dispatcher
#
disp_uriSubs=tcp://127.0.0.1:5561

# disp_nbthread (OS&lt;Dispatcher&gt;):
# Sets the number of workers threads in the Dispatcher
#
# In a platform with a high number of concurrent request, increase
# the number of workers may be interesting for reducing response time.
# Conversely, if the number of concurrent requests is low, decrease the may
# preserve useless resource consumption.
#
disp_nbthread=5


###############################################################################
#                UMS Related Parameters                                       #
###############################################################################

# ums_uriAddr (M&lt;UMS&gt;|O&lt;Dispatcher,Client&gt;):
#   * For UMS, this sets the address and the port on which the UMS SeD
#     will listen on
#   * For Dispactcher and clients it indicates address(es) for connecting
#     to UMS SeDs.
#     For Dispatcher this should correspond to a list of colon-seperated pair
#     in the form of: ums_uriAddr=uri_umssed1 sed1_name;uri_umssed2 sed2_name;...
#     uri_umssed&lt;i&gt; correspond to valid URIs. sed&lt;i&gt;_name set the
#     names associated to the SeDs
#     E.g. ums_uriAddr=tcp://127.0.0.1:5562 localsed;tcp://192.168.1.1:5562 lansed
#
ums_uriAddr=tcp://127.0.0.1:5562

# sendmailScriptPath (M&lt;UMS&gt;): Sets the path to the script for sending emails
#
sendmailScriptPath=/opt/software/GIT/vishnu_1/core/src/utils/sendmail.py

# authenticationType (M&lt;UMS&gt;): Defines the underlying authentication mode
# VISHNU supports four modes of authentication:
#  * UMS: Authentication against the built-in user management system (default).
#  * LDAP: Authentication against an LDAP directory
#  * UMSLDAP: Use both modes, looking first in the native authentication database
#  * LDAPUMS: Use both modes, looking first in the LDAP directory
# If not set, UMS mode will be selected.
#
#authenticationType=UMS


###############################################################################
#                FMS Specfic Parameters                                       #
###############################################################################

# fms_uriAddr (M&lt;FMS&gt;|O&lt;Dispatcher,Client&gt;):
#   * For FMS, this sets the address and the port on which the FMS SeD
#     will listen on
#   * For Dispactcher and clients it indicates address(es) for connecting
#     to FMS SeDs.
#     For Dispatcher this should correspond to a list of colon-seperated pair
#     in the form of: fms_uriAddr=uri_fmssed1 sed1_name;uri_fmssed2 sed2_name;...
#     uri_fmssed&lt;i&gt; correspond to valid URIs. sed&lt;i&gt;_name set the
#     names associated to the SeDs
#     E.g. fms_uriAddr=tcp://127.0.0.1:5563 localsed;tcp://192.168.1.1:5563 lansed
#
fms_uriAddr=tcp://127.0.0.1:5563


###############################################################################
#                IMS Related Parameters                                       #
###############################################################################

# ims_uriAddr (M&lt;IMS&gt;|O&lt;Dispatcher,Client&gt;):
#   * For IMS, this sets the address and the port on which the IMS SeD
#     will listen on
#   * For Dispactcher and clients it indicates address(es) for connecting
#     to IMS SeDs.
#     For Dispatcher this should correspond to a list of colon-seperated pair
#     in the form of: ims_uriAddr=uri_imssed1 sed1_name;uri_imssed2 sed2_name;...
#     uri_imssed&lt;i&gt; should correspond to valid URIs. sed&lt;i&gt;_name set the
#     names associated to the SeDs.
#     E.g. ims_uriAddr=tcp://127.0.0.1:5564 localsed;tcp://192.168.1.1:5564 lansed
#
ims_uriAddr=tcp://127.0.0.1:5564


###############################################################################
#                TMS Related Parameters                                       #
###############################################################################
# tms_uriAddr (M&lt;TMS&gt;|O&lt;Dispatcher,Client&gt;):
#   * For TMS, this sets the address and the port on which the TMS SeD
#     will listen on
#   * For Dispactcher and clients it indicates address(es) for connecting
#     to TMS SeDs.
#     For Dispatcher this should correspond to a list of colon-seperated pair
#     in the form of: ims_uriAddr=uri_tmssed1 sed1_name;uri_tmssed2 sed2_name;...
#     uri_tmssed&lt;i&gt; correspond to valid  URIs. sed&lt;i&gt;_name set the
#     names associated to the SeDs.
#     E.g. tms_uriAddr=tcp://127.0.0.1:5565 localsed;tcp://192.168.1.1:5565 lansed
#
tms_uriAddr=tcp://127.0.0.1:5565

# batchSchedulerType (M&lt;TMS&gt;): Defines the type of the batch scheduler TMS
# will handle.
# VISHNU supports TORQUE, LOADLEVELER, SLURM, LSF, SGE and PBS
batchSchedulerType=SLURM

# intervalMonitor (M&lt;TMS&gt;): In seconds, this key defines the interval after
# which the jobs are monitored
#
intervalMonitor=30

# defaultBatchConfig (OS&lt;TMS&gt;): Sets the path to the default batch configuration
# file.
#
#defaultBatchConfig=$HOME/defaultbatch.cfg


###############################################################################
#                Other Parameters                                             #
###############################################################################

# vishnuMachineId (M&lt;FMS,IMS,TMS&gt;|O&lt;UMS&gt;): Optional for UMS and mandatory for FMS,
# IMS and TMS, this key corresponds to the identifier of the machine in VISHNU
# environment.
# When set, it MUST correspond to valid machine identifier.
#
vishnuMachineId=machine_1

# timeout (M&lt;Dispatcher&gt;|O&lt;FMS,IMS,TMS,UMS&gt;): In seconds, this defines the
# duration afer which a request is considered as expired.
#
timeout=120

#urlSupervisor (M&lt;FMS,IMS,TMS,UMS&gt;): Specifies the address of Supervisord
urlSupervisor=http://127.0.0.1:9001

</pre><div class="section" title="Configuration de Supervisod"><div class="titlepage"><div><div><h3 class="title"><a id="idp175480"></a>Configuration de Supervisod</h3></div></div></div><p> Il est recommandé d'éviter de lancer les SeDs à la main mais d'utiliser Supervisord qui se charge de
    lancer et de contrôler leur exécution. </p><p>Cette section décrit les principaux élements à configurer pour Supervisord.
  Vous pouvez vous inspirer du fichier d'exemple <span class="emphasis"><em>supervisord-sample.cfg</em></span>
  situé dans le dossier $INSTALL_PREFIX/etc et l'adapter selon votre installation.
  Les textes après un point-virgule ';' sont des commentaires.</p><p>Les textes après un point-virgule ';' sont des commentaires. </p><pre class="programlisting">
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;; PARAMETRES LIES A LA PRISE EN CHARGE DES COMPOSANTS DE VISHNU ;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
; Attention: il faut bien respecter les nommages 'umssed', 'imssed',
; 'tmssed', 'fmssed'. Sinon ils ne seront pas bien pris en charge

; Définir le SeD UMS comme un processus à surveiller
; Son alias est umssed
; command indique la commande à exécuter. A modifier selon votre installation
[program:umssed]
command=umssed ~/conf/ums_config.cfg ; Commande comme on ferait dans un terminal

; Définir le SeD FMS comme un processus à surveiller
; Son alias est fmssed
; command indique la commande à exécuter. A modifier selon votre installation
[program:fmssed]
command=fmssed ~/conf/fms_config.cfg

; Définir le SeD IMS comme un processus à surveiller
; Son alias est imssed
; command indique la commande à exécuter. A modifier selon votre installation
[program:imssed]
command=imssed ~/conf/ims_config.cfg

; Définir le SeD TMS comme un processus à surveiller
; Son alias est tmssed
; command indique la commande à exécuter. A modifier selon votre installation
[program:tmssed]
command=tmssed ~/conf/tms_config.cfg

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;; PARAMETRES SPECIFIQUES A SUPERVISORD  ;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;
; Définir l'URL de connexion à Supervisord
[supervisorctl]
serverurl=http://127.0.0.1:9001

; inet (TCP) server disabled by default
; ip_address:port specifier, *:port for all if
[inet_http_server]
port=127.0.0.1:9001
[supervisord]

</pre></div></div><div class="section" title="Déploiement dans un même sous-réseau"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp181264"></a>Déploiement dans un même sous-réseau</h2></div></div></div><p>Dans cette section nous supposons que tous les composants vont être déployés sur une même machine nommé
    <span class="bold"><strong>prefrontale</strong></span>.
    </p><p><span class="bold"><strong>NOTES :</strong></span> Il existe un bug connu sur debian (entre autre) avec boost file system, utilisé par VISHNU.
    Le rapport de bug est ici et le bug est actuellement ouvert: https://svn.boost.org/trac/boost/ticket/4688.
    Si lors du lancement d'un SeD, le message d'erreur suivant apparait : std::runtime_error:
    locale::facet::_S_create_c_locale name not valid,
    faire un "export LANG=C" et cela devrait régler le problème.
    </p><p>Une fois la configuration des différents composants terminée, suivez
    attentivement les étapes suivantes pour les déployer:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p> Vérifier que la base de données (PostGreSQL ou MySQL) a été bien configurée et initialisée comme
    décrit précédemment. De plus, vérifier vous pouvez vous connecter à la base de données depuis les différents
    serveurs où sont installés les modules de VISHNU.</p></li><li class="listitem"><p>
    Sur une machine Torque, lancer le serveur (pbs_serv), le scheduler (pbs_sched) et l'ordonnanceur
    (pbs_mom).
    </p></li><li class="listitem"><p>
    Sur une machine SLURM, lancer les serveurs <span class="emphasis"><em>slurmd, slurmctld</em></span> et <span class="emphasis"><em>slurmdbd</em></span>.
    </p></li><li class="listitem"><p>
    Sur une machine LSF, lancer les exécutables <span class="emphasis"><em></em></span>hostsetup <span class="emphasis"><em>lsfstartup</em></span>.
    </p></li><li class="listitem"><p>
    Sur une machine Grid Engine, lancer les exécutables <span class="emphasis"><em> sge_qmaster </em></span> et <span class="emphasis"><em>sge_execd</em></span>.
    </p></li><li class="listitem"><p>
    Optionnel: Sur une machine lancer le dispatcher, le fichier de
    configuration 'config' doit être à la fin et est optionnel.</p><p>$ <span class="emphasis"><em>dispatcher dispatcher_config.cfg</em></span></p><p>
    Dans cette commande, on demande au dispatcher de démarrer en
    utilisant les serveurs définis dans le fichier config.  Si le
    fichier de configuration n'est pas fourni, des options par défaut sont utilisées. Les différents options de configurations et leur valeur par défaut sont décrites deux sections plus loin.
    </p></li><li class="listitem"><p> Sur chaque machine serveur, lancer supervisord avec son fichier de configuration 'config' correspondant. Le fichier de configuration de supervisord contient le démarrage de chaque serveur vishnu sur la machine en question.</p><p>$ <span class="emphasis"><em>supervisord -c config</em></span></p></li><li class="listitem"><p>
    Les modules de VISHNU sont prêts à être utilisés. Pour ce faire, un client doit se connecter et soumettre des requêtes à VISHNU au moyen des commandes UMS, TMS, FMS et IMS (voir le manuel de l'utilisateur VISHNU pour plus d'informations sur les commandes utilisateurs disponibles).
    </p></li></ol></div></div><div class="section" title="Le cas multi-réseaux"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp184432"></a>Le cas multi-réseaux</h2></div></div></div><p>
    Le cas multi-réseaux ne change pas du cas précédent, les étapes sont toutes les mêmes. Le seul ajout à faire est d'ajouter des tunnels SSH entre les machines serveurs et la machine ou se trouve la base de données s'il n'y a pas d'accès direct sur le port correspondant au port de la base de données, et un second tunnel pour l'enregistrement des serveurs sur le dispatcher. Par la suite, il est conseillé d'utiliser le dispatcher pour que le client n'ait plus qu'à se connecter au dispatcher pour réaliser ses requêtes (le dispatcher jouant alors un rôle de proxy entre le client et les réseaux).</p><p>
    Les tunnels SSH sont faits avec une commande similaire à l'une des suivantes:
    </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
    ssh -fN -L 8889:localhost:8889 machine_distance
    </p><p>
    Etabli un tunnel entre la machine locale et la machine distante au travers du port 8889.
    </p></li><li class="listitem"><p>
    </p><p>
    Etabli un reverse tunnel entre la machine locale et la machine distante au travers du port 8889
    ssh -R -fN 8889:localhost:8889 machine_distante
    </p></li></ul></div><p>
    </p></div><div class="section" title="Configuration de l'envoi des emails par VISHNU"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp187760"></a>Configuration de l'envoi des emails par VISHNU</h2></div></div></div><p>Le processus UMS SeD utilise le fichier 'sendmail.py' (fourni dans l'installation VISHNU, dans le sous-répertoire sbin/)
        pour envoyer des emails aux utilisateurs lors de certaines opérations. Ce fichier peut être modifié par l'administrateur afin
        de s'adapter à la méthode d'envoi d'email propre au serveur sur lequel est installé le SeD. Par défaut, la configuration
        fournie se connecte sur le serveur SMTP de 'localhost' sur le port 25, sans authentification.</p><p>Les paramètres suivants peuvent être configurés dans le script sendmail.py :</p><div class="informaltable"><table border="1"><colgroup><col width="2cm" /><col width="15cm" /></colgroup><thead><tr><th>Option</th><th>Ligne du script sendmail.py à modifier</th></tr></thead><tbody><tr><td><p>login</p></td><td><pre class="programlisting">parser.add_option("--login", dest="login", help="", default="[login_utilisateur]")</pre></td></tr><tr><td><p>password</p></td><td><pre class="programlisting">parser.add_option("--password", dest="password", help="smtp password", default="[password_utilisateur]")</pre></td></tr><tr><td><p>hostname</p></td><td><pre class="programlisting">parser.add_option("--hostname", dest="host", help="smtp host", default="[nom_serveur_SMTP]")</pre></td></tr><tr><td><p>port</p></td><td><pre class="programlisting">parser.add_option("--port", dest="port", help="smtp port [default: 25]", type=int, default="[no_port]")</pre></td></tr><tr><td><p>SSL</p></td><td><pre class="programlisting">parser.add_option("--ssl", action="store_true", dest="use_ssl", help="enable ssl support [default: %default - default port: 587
        ]", default=True)</pre></td></tr></tbody></table></div></div><div class="section" title="Configuration des clés privées/publiques ssh requises pour FMS"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp196344"></a>Configuration des clés privées/publiques ssh requises pour FMS</h2></div></div></div><p>
        Toutes les commandes éxécutées par le SeD FMS sont lancées via ssh
        sous le nom de l'utilisateur ayant émis la requête. Les services FMS
        sont de deux types : il y a ceux qui n'impliquent qu'une machine
        distante : Exemple getFilesInfo,listDir,etc.. et ceux qui impliquent au
        moins deux machines distantes : machine source et destination pour les transferts de fichiers.
        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> Dans le premier cas le SeD se connecte sur la machine distante et
        effectue la commande. Par conséquent la clé publique du SeD doit
        être ajoutée au fichier authorized_keys ($HOME/.ssh/authorized_keys) de l'utilisateur de la machine distante
        concernée.</p></li><li class="listitem"><p> Dans le second cas, deux connexions ssh sont nécessaires. Le SeD se connecte sur la machine source et
        lance le transfert (seconde connexion) vers la machine destination. Par conséquent:
        </p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p> la clé publique du SeD doit être ajoutée au fichier authorized_key de la machine source pour
        permettre la première connexion.
        </p></li><li class="listitem"><p> La machine source doit pouvoir se connecter sur la machine destination par ssh, avec la clé privée enregistrée dans la base de VISHNU lors de l'ajout du compte (local account) liant la machine source à VISHNU. Par ailleurs si le mécanisme d'agent forwarding (de ssh) est activée entre ces différentes machines, il n'est alors plus nécessaire qu'il y ait un autre couple de clés entre la machine source et destination. </p></li></ul></div><p>
        </p></li></ul></div><p>
        En somme, il est alors obligatoire que la clé publique du SeD soit ajoutée à tous les comptes utilisateurs des machines impliquées
        par les requêtes FMS. Toutes les clés protégées par des passphrases
        devront être stockées par un agent ssh pour permettre les
        authentifications automatiques.
        </p></div><div class="section" title="Configuration des clés privées/publiques ssh requises pour TMS"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp202416"></a>Configuration des clés privées/publiques ssh requises pour TMS</h2></div></div></div><p>
    Les commandes de soumission, d'annulation et de récupération des résultats de jobs  éxécutées par le SeD TMS sont lancées via ssh
    sous le nom de l'utilisateur ayant émis la requête. Pour pouvoir exécuter ces commandes correctement, la clé publique du compte dédié au SeD TMS doit
    être ajoutée au fichier authorized_keys ($HOME/.ssh/authorized_keys) de l'utilisateur.  Toutes les clés protégées par des passphrases
    devront être stockées par un agent ssh pour permettre les
    authentifications automatiques.
    </p></div><div class="section" title="Test d'exécution d'un service depuis une machine client par shell"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp203848"></a>Test d'exécution d'un service depuis une machine client par shell</h2></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
    Une fois que la plateforme a été installée, se mettre sur un poste client avec VISHNU d'installé. Se référer au document [VISHNU_USERMANUAL]
    pour l'installation de la partie client.
    </p></li><li class="listitem"><p>
    Exporter la variable d'environnement VISHNU_CONFIG_FILE dans un script de configuration client. Se référer
    au guide d'installation du client [VISHNU_USER_GUIDE] pour connaître le contenu d'un fichier client.
    </p></li><li class="listitem"><p>Ouvrir une session VISHNU</p><p>$ <span class="emphasis"><em>vishnu_connect -u user</em></span></p><p>Remplacer 'user' par un vrai identifiant utilisateur.
    Par défaut, VISHNU est installé avec un utilisateur 'root' ayant tous les droits sur la plateforme (ID: 'root', Mot de passe: 'vishnu_user').
    </p></li><li class="listitem"><p>
    Entrer le mot de passe puis valider
    </p></li><li class="listitem"><p>
    Sur le client, un affichage doit signaler que le service a réussi. Dans le terminal ou le SeD UMS a été lancé et dans le terminal ou le MA tourne, selon le niveau de verbosité, plus ou moins d'informations, concernant le service effectué, doivent apparaitre. Le message affiché contient au moins une ligne similaire :
    <span class="bold"><strong>sessionId: root-2011-Jul-11-14:22:14.403491:86690</strong></span>, qui indique l'identifiant de la session ouverte.
    </p></li><li class="listitem"><p>Fermer la session.</p><p>$ <span class="emphasis"><em>vishnu_close</em></span> </p><p>Aucune erreur ne doit être remontée.</p></li></ol></div></div><div class="section" title="Les scripts de démarage automatique"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp210632"></a>Les scripts de démarage automatique</h2></div></div></div><p>Des scripts de démarage sont préparés pour pouvoir exécuter automatiquement les serveurs VISHNU.
 Les scripts sont installés lors de l'installation des serveurs dans install/etc/ (ou dans /etc si c'est installé dans /usr).</p></div></div><div class="chapter" title="Chapter 6. Administration"><div class="titlepage"><div><div><h2 class="title"><a id="idp261384"></a>Chapter 6. Administration</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#idp261728">Présentation</a></span></dt><dt><span class="section"><a href="#idp263192">Gestion des utilisateurs (UMS)</a></span></dt><dt><span class="section"><a href="#idp268944">Gestion des machines (UMS+IMS)</a></span></dt><dt><span class="section"><a href="#idp274744">Gestion de la plateforme (UMS)</a></span></dt><dt><span class="section"><a href="#idp280816">Options propres à l'administrateur dans les commandes utilisateurs(UMS+FMS)</a></span></dt><dt><span class="section"><a href="#idp287256">Gestion des processus VISHNU et délestage (IMS)</a></span></dt><dt><span class="section"><a href="#idp291232">Surveillance de l'état des machines (IMS)</a></span></dt><dt><span class="section"><a href="#idp295176">Définition des formats des identifiants (IMS)</a></span></dt><dt><span class="section"><a href="#idp301128">FAQ</a></span></dt></dl></div><div class="section" title="Présentation"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp261728"></a>Présentation</h2></div></div></div><p>
 Le module UMS correspond à la gestion des utilisateurs et des machines de VISHNU. Il permet aussi de sauvegarder la configuration de VISHNU à chaud et de la restaurer si besoin est.
 Dans toute la suite du chapitre, on supposera que l'utilisateur est déjà connecté avec un compte administrateur de VISHNU pour pouvoir réaliser ces manipulations. De plus, on présentera l'utilisation des commandes depuis le shell, mais cela reste valable depuis les API Python ou C++.
 </p><p>L'API est disponible dans le document [VISHNU_API]</p></div><div class="section" title="Gestion des utilisateurs (UMS)"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp263192"></a>Gestion des utilisateurs (UMS)</h2></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
 L'ajout d'un utilisateur se fait à l'aide de la commande 'vishnu_add_user'. Elle prend en paramètre le prénom de l'utilisateur, son nom de famille, les droits qui lui sont associés dans VISHNU (administrateur ou simple utilisateur) et son adresse de couriel. Tout ces paramètres sont obligatoires. Un privilège à 1 signifie administrateur, un privilège à 0 signifie un utilisateur. L'identifiant de l'utilisateur est généré et renvoyé.
 </p></li><li class="listitem"><p>
 La mise à jour d'un utilisateur ne peut être faite que par un administrateur. Cette mise à jour se fait avec un appel à la commande 'vishnu_update_user' et permet de modifier les paramètres de l'ajout (nom, prénom, statut, couriel).
 Il faut avoir l'identifiant de l'utilisateur (généré lors de la création de l'utilisateur) pour le désigner lors de la mise à jour.
 </p><p>Note : le changement du statut d'un utilisateur à l'état "INACTIVE" correspond à un blocage de son compte.</p></li><li class="listitem"><p>
 La suppression d'un utilisateur efface toutes les informations liées à l'utilisateur de la base de donnée. Cette suppression se fait à l'aide de la commande 'vishnu_delete_user'.
 </p></li><li class="listitem"><p>
 La liste des utilisateurs ne peut être faite que par un administrateur. Cela se fait avec la commande 'vishnu_list_user'. Cette commande peut prendre en paramètre l'identifiant d'un utilisateur pour n'avoir les informations que concernant cet utilisateur.
 </p></li><li class="listitem"><p>
 Seul un administrateur peut réinitialiser le mot de passe d'un utilisateur de VISHNU. Pour ce faire, il doit appeller la commande 'vishnu_reset_password'  en fournissant l'identifiant de l'utilisateur dont l'administrateur veut réinitialiser le mot de passe. Le nouveau mot de passe est temporaire et renvoyé par la commande. Lors de la prochaine connexion, l'utilisateur devra changer son mot de passe avec 'vishnu_change_password'.
 </p></li></ol></div></div><div class="section" title="Gestion des machines (UMS+IMS)"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp268944"></a>Gestion des machines (UMS+IMS)</h2></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>L'ajout d'une machine se fait à l'aide de la commande 'vishnu_add_machine'. Cette commande prend en paramètre le nom de la machine, le site ou elle se trouve, le language de la description qui sera donnée pour la machine, le fichier contenant la clé publique et la description. Ces paramètres sont obligatoires, en passant par le shell, la description n'a pas besoin d'être fournie en paramètre mais elle est alors demandée à l'administrateur avant d'ajouter la machine. A la fin de l'ajout, l'identifiant généré pour la machine est renvoyé.</p></li><li class="listitem"><p>
 La mise à jour d'une machine se fait à l'aide de la commande 'vishnu_update_machine' et permet de modifier les paramètres mis lors de l'ajout de la machine. Il faut utiliser l'identifiant de la machine pour l'identifier lors de la mise à jour.
 </p><p>Note : le changement du statut d'une machine à l'état "INACTIVE" correspond à un blocage de la machine. Cela rend la machine inaccessible aux utilisateurs de VISHNU mais toujours visible pour les administrateurs.</p></li><li class="listitem"><p>
 La suppression d'une machine se fait à l'aide de la commande 'vishnu_delete_machine' avec l'identifiant de la machine à supprimer. Cela supprime la machine de la base de données, ainsi que toutes les informations qui y sont attachées (Attention : cette commande est irréversible).
 </p></li><li class="listitem"><p>
 Les utilisateurs peuvent lister les machines, mais un administrateur a en plus une option qui est l'identifiant d'un utilisateur. Ceci lui permet de lister les machines sur lesquelles l'utilisateur a un compte VISHNU.
 </p></li><li class="listitem"><p>
 La mise à jour d'informations système d'une machine se fait à l'aide de la commande 'vishnu_set_system_info' et permet d'ajouter ou modifier des informations système d'une machine. Il faut utiliser l'identifiant de la machine pour l'identifier lors de la mise à jour.
 </p></li></ol></div></div><div class="section" title="Gestion de la plateforme (UMS)"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp274744"></a>Gestion de la plateforme (UMS)</h2></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
 L'administrateur peut faire une sauvegarde à chaud à un moment donné de VISHNU. Ceci sauvegarde les utilisateurs, les machines et les comptes des utilisateurs. Le fichier, dans lequel la configuration est, est retourné par la fonction. La fonction est 'vishnu_save_configuration', pas besoin de paramètres.
 </p></li><li class="listitem"><p>
 L'administrateur peut recharger une configuration précédente de VISHNU à l'aide de la commande 'vishnu_restore_configuration' qui a besoin du fichier de sauvegarde pour recharger la base.
 Avant de pouvoir lancer cette restauration, tous les utilisateurs de VISHNU doivent être déconnectés.
 </p></li><li class="listitem"><p>
 Un administrateur peut également définir les valeurs par défaut des options de VISHNU pour tout les utilisateurs (ces options sont le temps de déconnexion par défaut et le type de fermeture d'une session par défaut). Cela se fait en appellant 'vishnu_configure_default_option' en donnant le nom de l'option et sa nouvelle valeur.
 </p></li><li class="listitem"><p>
 Un administrateur peut ajouter ou modifier un système d'authentification. Par exemple il peut ajouter différents LDAP pour authentifier ses utilisateurs. Actuellement, pour un même LDAP, si les utilisateurs sont dans des branches différentes il faut ajouter un système d'authentification par branche. Ceci afin de faciliter la connexion de l'utilisateur, pour qu'il ne donne aucune information concernant son arbre LDAP, juste son login. C'est l'administrateur lorsqu'il crée son système d'authentification qui doit remplir le champs ldapbase avec le chemin complet dans l'arbre LDAP à utiliser pour authentifier un utilisateur. Lorsqu'un administrateur rempli le chemin menant aux utilisateurs, il doit remplacer le nom de l'utilisateur par la chaîne de caractère \$USERNAME, cette chaîne sera remplacée par vishnu par le login de l'utilisateur que l'on cherche à authentifier.
 Fonctions associées : vishnu_add_auth_system, vishnu_update_auth_system, vishnu_delete_auth_system
 </p></li></ol></div></div><div class="section" title="Options propres à l'administrateur dans les commandes utilisateurs(UMS+FMS)"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp280816"></a>Options propres à l'administrateur dans les commandes utilisateurs(UMS+FMS)</h2></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Dans la fonction 'vishnu_connect', un administrateur peut donner l'identifiant d'un utilisateur pour se connecter sous le nom de cet utilisateur dans VISHNU.</p></li><li class="listitem"><p>
 Dans la fonction 'vishnu_list_history_cmd', l'administrateur peut lister toutes les commandes de tout les utilisateurs ou les commandes d'un utilisateur en particulier en fournissant l'identifiant de l'utilisateur.
 </p></li><li class="listitem"><p>
 Dans la fonction 'vishnu_list_local_accounts', l'administrateur peut lister toutes les comptes de tout les utilisateurs ou les comptes d'un utilisateur particulier en fournissant l'identifiant de l'utilisateur.
 </p></li><li class="listitem"><p>
 Dans la fonction 'vishnu_list_options', l'administrateur peut lister les toutes les options de tout les utilisateurs ou les options d'un utilisateur en particulier en fournissant l'identifiant de l'utilisateur.
 </p></li><li class="listitem"><p>
 Dans la fonction 'vishnu_list_sessions', l'administrateur peut lister les toutes les sessions de tous les utilisateurs ou les sessions d'un utilisateur en particulier en fournissant l'identifiant de l'utilisateur, ou les sessions sur une machine particulière en fournissant l'identifiant de la machine.
 </p></li><li class="listitem"><p>
 Dans la fonction 'vishnu_list_file_transfers', l'administrateur peut lister tous les transferts de fichiers de tous les utilisateurs ou ceux  d'un utilisateur en particulier en fournissant l'identifiant de l'utilisateur, ou lister les transferts impliquant une machine particulière (qui peut être source ou destination du transfert) en fournissant l'identifiant de la machine.
 </p></li><li class="listitem"><p>
 Dans la fonction 'vishnu_stop_file_transfers', l'administrateur peut annuler tous les transferts de fichiers de tous les utilisateurs ou ceux  d'un utilisateur en particulier en fournissant l'identifiant de l'utilisateur, ou annuler les transferts impliquant une machine particulière (qui peut être source ou destination du transfert) en fournissant l'identifiant de la machine.
 </p></li></ol></div></div><div class="section" title="Gestion des processus VISHNU et délestage (IMS)"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp287256"></a>Gestion des processus VISHNU et délestage (IMS)</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>L'administrateur peut lister les processus VISHNU, sur toute la plateforme ou sur une machine particulière.
Fonction associée : vishnu_get_processes.</p></li><li class="listitem"><p>L'administrateur peut arrêter un processus VISHNU, ce processus ne sera pas redémarrer automatiquement.
Attention : l'administrateur doit avoir un compte sur la machine
Fonction associée : vishnu_stop </p></li><li class="listitem"><p>L'administrateur peut redémarrer un processus VISHNU sur une machine, ce processus doit avoir déjà tourné
pour VISHNU sur cette machine et l'administrateur doit avoir un compte sur la machine.
Fonction associée : vishnu_restart </p></li><li class="listitem"><p>L'administrateur peut délester une machine selon deux modes. Dans le mode HARD, tout les processus VISHNU
de la machine sont arretés. Dans le mode SOFT, seul FMS et TMS sont touchés, on arrête tout leurs transferts
et jobs en cours.
Fonction associée : vishnu_load_shed </p></li></ul></div></div><div class="section" title="Surveillance de l'état des machines (IMS)"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp291232"></a>Surveillance de l'état des machines (IMS)</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> Un administrateur peut fixer la fréquence de mise à jour de l'enregistrement de l'état des machines.
Fonction associée : vishnu_set_update_frequency</p></li><li class="listitem"><p> Un administrateur peut obtenir la fréquence de mise à jour de l'enregistrement de l'état des machines.
Fonction associée : vishnu_get_update_frequency</p></li><li class="listitem"><p> Un administrateur peut fixer un seuil sur une machine. Ce seuil peut être l'utilisation du CPU, la
mémoire libre restante ou l'espace disque restant. Lors de l'enregistrement de l'état d'une machine,
si un seuil est atteint sur cette machine, l'administrateur est notifié par mail de ce dépassement.
Fonction associée : vishnu_set_threshold</p></li><li class="listitem"><p> Un administrateur peut obtenir les seuils fixés sur une machine. Pour plus d'informations sur les seuils
voir la partie pour fixer les seuils ci-dessus.
Fonction associée : vishnu_get_threshold</p></li></ul></div></div><div class="section" title="Définition des formats des identifiants (IMS)"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp295176"></a>Définition des formats des identifiants (IMS)</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
Un administrateur peut fixer le format des identifiants VISHNU automatiquement générés pour les utilisateurs,
les machines, les jobs soumis aux batchs scheduler et les transferts de fichiers. Ces identifiants peuvent contenir
plusieurs variables :
</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>
'$DAY' : Variable qui sera remplacée par le jour de création (1-31)
</p></li><li class="listitem"><p>
'$MONTH' : Variable qui sera remplacée par le mois de création (1-12)
</p></li><li class="listitem"><p>
'$YEAR' :  Variable qui sera remplacé par l'année de création (0-99)
</p></li><li class="listitem"><p>
'$CPT' : Variable compteur qui est automatiquement incrémentée
</p></li><li class="listitem"><p>
'$SITE' : Pour les utilisateurs ou machine, une information sur le lieu
</p></li><li class="listitem"><p>
'$UNAME' : Pour les utilisateurs, variable remplacée par le nom de l'utilisateur
</p></li><li class="listitem"><p>
'$MANAME' : Pour les machines, variable remplacée par le nom de la machine
</p></li></ul></div><p>
Attention la variable conteur est obligatoire pour éviter la génération d'un identifiant déjà existant.
Fonctions associées : define_file_format, define_machine_format, define_task_format, define_user_format, define_auth_format.
</p></li></ul></div></div><div class="section" title="FAQ"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp301128"></a>FAQ</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Si vous rencontrez des problèmes lors du chargement des plugins TMS, vous pouvez configurez la variable d'environnement <span class="italic">LD_LIBRARY_PATH</span> pour pointer sur le répertoire contenant les plugins.</p></li></ul></div></div></div><div class="reference" title="UMS Command reference"><div class="titlepage"><div><div><h1 class="title"><a id="idp302896"></a>UMS Command reference</h1></div></div><hr /></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="refentrytitle"><a href="#idp303272">vishnu_add_user</a></span><span class="refpurpose"> — adds a new VISHNU user</span></dt><dt><span class="refentrytitle"><a href="#idp322816">vishnu_update_user</a></span><span class="refpurpose"> — updates the user information except the userId and the password</span></dt><dt><span class="refentrytitle"><a href="#idp348880">vishnu_delete_user</a></span><span class="refpurpose"> — removes a user from VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp366000">vishnu_reset_password</a></span><span class="refpurpose"> — resets the password of a user</span></dt><dt><span class="refentrytitle"><a href="#idp383104">vishnu_save_configuration</a></span><span class="refpurpose"> — saves the configuration of VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp398280">vishnu_restore_configuration</a></span><span class="refpurpose"> — restores the configuration of VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp414232">vishnu_add_machine</a></span><span class="refpurpose"> — adds a new machine in VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp433152">vishnu_update_machine</a></span><span class="refpurpose"> — updates machine description</span></dt><dt><span class="refentrytitle"><a href="#idp459392">vishnu_delete_machine</a></span><span class="refpurpose"> — removes a machine from VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp475936">vishnu_list_users</a></span><span class="refpurpose"> — lists VISHNU users</span></dt><dt><span class="refentrytitle"><a href="#idp495112">vishnu_configure_default_option</a></span><span class="refpurpose"> — configures a default option value</span></dt><dt><span class="refentrytitle"><a href="#idp513576">vishnu_add_auth_system</a></span><span class="refpurpose"> — adds a new user-authentication system in VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp534608">vishnu_update_auth_system</a></span><span class="refpurpose"> — updates a user-authentication system in VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp564992">vishnu_delete_auth_system</a></span><span class="refpurpose"> — removes a user-authentication system from VISHNU</span></dt></dl></div><div class="refentry" title="vishnu_add_user"><a id="idp303272"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>vishnu_add_user — adds a new VISHNU user</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">vishnu_add_user</code>  [<code class="option">-h</code>]  <em class="replaceable"><code>firstname</code></em>   <em class="replaceable"><code>lastname</code></em>   <em class="replaceable"><code>privilege</code></em>   <em class="replaceable"><code>email</code></em> </p></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command allows an admin to add a new user in VISHNU. 
Several user information are necessary such as: lastname, firtsname and email address. 
The admin also gives a VISHNU privilege to the new user and a new userId 
and password are sent to the user by email.</p></div><div class="refsect1" title="OPTIONS"><a id="options"></a><h2>OPTIONS</h2><div class="variablelist"><dl><dt><span class="term"><code class="option">-h <em class="replaceable"><code>help</code></em></code></span></dt><dd><p>help about the command.</p></dd></dl></div></div><div class="refsect1" title="ENVIRONMENT"><a id="environment"></a><h2>ENVIRONMENT</h2><div class="variablelist"><dl><dt><span class="term"><code class="envar">VISHNU_CONFIG_FILE</code></span></dt><dd><p>Contains the path to the local configuration file for VISHNU.</p></dd></dl></div></div><div class="refsect1" title="DIAGNOSTICS"><a id="diagnostics"></a><h2>DIAGNOSTICS</h2><p>The following diagnostics may be issued on stderr and the command will return the code provided within brackets: </p><div class="variablelist"><dl><dt><span class="term">"Vishnu not available (Service bus failure)" [1]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database error)" [2]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database connection)" [3]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (System)" [4]</span></dt><dd></dd><dt><span class="term">"Internal Error: Undefined exception" [9]</span></dt><dd></dd><dt><span class="term">"There is no open session in this terminal" [13]</span></dt><dd></dd><dt><span class="term">"Missing parameters" [14]</span></dt><dd></dd><dt><span class="term">"Vishnu initialization failed" [15]</span></dt><dd></dd><dt><span class="term">"Undefined error" [16]</span></dt><dd></dd><dt><span class="term">"The userId already exists in the database" [22]</span></dt><dd></dd><dt><span class="term">"The user is locked" [23]</span></dt><dd></dd><dt><span class="term">"The user is not an administrator" [25]</span></dt><dd></dd><dt><span class="term">"The mail adress is invalid" [27]</span></dt><dd></dd><dt><span class="term">"The session key is unrecognized" [28]</span></dt><dd></dd><dt><span class="term">"The sessionKey is expired. The session is closed." [29]</span></dt><dd></dd><dt><span class="term">"The machine is locked" [34]</span></dt><dd></dd></dl></div></div><div class="refsect1" title="EXAMPLE"><a id="example"></a><h2>EXAMPLE</h2><p>To add the user Jean DUPONT as a simple user and with the mail dupont@gmail.com:</p><p>vishnu_add_user Jean DUPONT 0 dupont@gmail.com</p></div></div><div class="refentry" title="vishnu_update_user"><div class="refentry.separator"><hr /></div><a id="idp322816"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>vishnu_update_user — updates the user information except the userId and the password</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">vishnu_update_user</code>  [<code class="option">-h</code>] [<code class="option">-f <em class="replaceable"><code>firstname</code></em></code>] [<code class="option">-l <em class="replaceable"><code>lastname</code></em></code>] [<code class="option">-p <em class="replaceable"><code>privilege</code></em></code>] [<code class="option">-m <em class="replaceable"><code>email</code></em></code>] [<code class="option">-s <em class="replaceable"><code>status</code></em></code>]  <em class="replaceable"><code>userId</code></em> </p></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command allows an admin to update a VISHNU user information or to lock a user.  When a user is locked, she/he can not uses VISHNU. However, it is not possible to change the privilege of another admin.</p></div><div class="refsect1" title="OPTIONS"><a id="options"></a><h2>OPTIONS</h2><div class="variablelist"><dl><dt><span class="term"><code class="option">-h <em class="replaceable"><code>help</code></em></code></span></dt><dd><p>help about the command.</p></dd><dt><span class="term"><code class="option">-f <em class="replaceable"><code>firstname</code></em></code></span></dt><dd><p>represents the updated firstname of the user.</p></dd><dt><span class="term"><code class="option">-l <em class="replaceable"><code>lastname</code></em></code></span></dt><dd><p>represents the updated lastname of the user.</p></dd><dt><span class="term"><code class="option">-p <em class="replaceable"><code>privilege</code></em></code></span></dt><dd><p>represents the updated privilege of the user.
The value must be an integer. Predefined values are: 0 (USER), 1 (ADMIN).</p></dd><dt><span class="term"><code class="option">-m <em class="replaceable"><code>email</code></em></code></span></dt><dd><p>represents the updated email address of the user.</p></dd><dt><span class="term"><code class="option">-s <em class="replaceable"><code>status</code></em></code></span></dt><dd><p>represents the status of the user (LOCKED or ACTIVE).
The value must be an integer. Predefined values are: -1 (UNDEFINED), 0 (INACTIVE), 1 (ACTIVE).</p></dd></dl></div></div><div class="refsect1" title="ENVIRONMENT"><a id="environment"></a><h2>ENVIRONMENT</h2><div class="variablelist"><dl><dt><span class="term"><code class="envar">VISHNU_CONFIG_FILE</code></span></dt><dd><p>Contains the path to the local configuration file for VISHNU.</p></dd></dl></div></div><div class="refsect1" title="DIAGNOSTICS"><a id="diagnostics"></a><h2>DIAGNOSTICS</h2><p>The following diagnostics may be issued on stderr and the command will return the code provided within brackets: </p><div class="variablelist"><dl><dt><span class="term">"Vishnu not available (Service bus failure)" [1]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database error)" [2]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database connection)" [3]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (System)" [4]</span></dt><dd></dd><dt><span class="term">"Internal Error: Undefined exception" [9]</span></dt><dd></dd><dt><span class="term">"There is no open session in this terminal" [13]</span></dt><dd></dd><dt><span class="term">"Missing parameters" [14]</span></dt><dd></dd><dt><span class="term">"Vishnu initialization failed" [15]</span></dt><dd></dd><dt><span class="term">"Undefined error" [16]</span></dt><dd></dd><dt><span class="term">"The userId is unknown" [21]</span></dt><dd></dd><dt><span class="term">"The user is locked" [23]</span></dt><dd></dd><dt><span class="term">"Trying to lock a user account that is already locked" [24]</span></dt><dd></dd><dt><span class="term">"The user is not an administrator" [25]</span></dt><dd></dd><dt><span class="term">"The mail adress is invalid" [27]</span></dt><dd></dd><dt><span class="term">"The session key is unrecognized" [28]</span></dt><dd></dd><dt><span class="term">"The sessionKey is expired. The session is closed." [29]</span></dt><dd></dd></dl></div></div><div class="refsect1" title="EXAMPLE"><a id="example"></a><h2>EXAMPLE</h2><p>To update the mail address of a user user_1 to jdupont@gmail.com:</p><p>vishnu_update_user -m jdupont@gmail.com user_1</p></div></div><div class="refentry" title="vishnu_delete_user"><div class="refentry.separator"><hr /></div><a id="idp348880"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>vishnu_delete_user — removes a user from VISHNU</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">vishnu_delete_user</code>  [<code class="option">-h</code>]  <em class="replaceable"><code>userId</code></em> </p></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command allows an admin to delete a user from VISHNU. When a user is deleted from VISHNU all of her/his information are deleted from VISHNU. However, it is not possible to delete the VISHNU root user.</p></div><div class="refsect1" title="OPTIONS"><a id="options"></a><h2>OPTIONS</h2><div class="variablelist"><dl><dt><span class="term"><code class="option">-h <em class="replaceable"><code>help</code></em></code></span></dt><dd><p>help about the command.</p></dd></dl></div></div><div class="refsect1" title="ENVIRONMENT"><a id="environment"></a><h2>ENVIRONMENT</h2><div class="variablelist"><dl><dt><span class="term"><code class="envar">VISHNU_CONFIG_FILE</code></span></dt><dd><p>Contains the path to the local configuration file for VISHNU.</p></dd></dl></div></div><div class="refsect1" title="DIAGNOSTICS"><a id="diagnostics"></a><h2>DIAGNOSTICS</h2><p>The following diagnostics may be issued on stderr and the command will return the code provided within brackets: </p><div class="variablelist"><dl><dt><span class="term">"Vishnu not available (Service bus failure)" [1]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database error)" [2]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database connection)" [3]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (System)" [4]</span></dt><dd></dd><dt><span class="term">"Internal Error: Undefined exception" [9]</span></dt><dd></dd><dt><span class="term">"There is no open session in this terminal" [13]</span></dt><dd></dd><dt><span class="term">"Missing parameters" [14]</span></dt><dd></dd><dt><span class="term">"Vishnu initialization failed" [15]</span></dt><dd></dd><dt><span class="term">"Undefined error" [16]</span></dt><dd></dd><dt><span class="term">"The userId is unknown" [21]</span></dt><dd></dd><dt><span class="term">"The user is locked" [23]</span></dt><dd></dd><dt><span class="term">"The user is not an administrator" [25]</span></dt><dd></dd><dt><span class="term">"The session key is unrecognized" [28]</span></dt><dd></dd><dt><span class="term">"The sessionKey is expired. The session is closed." [29]</span></dt><dd></dd></dl></div></div><div class="refsect1" title="EXAMPLE"><a id="example"></a><h2>EXAMPLE</h2><p>Tu delete the user user_1:</p><p>vishnu_delete_user user_1</p></div></div><div class="refentry" title="vishnu_reset_password"><div class="refentry.separator"><hr /></div><a id="idp366000"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>vishnu_reset_password — resets the password of a user</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">vishnu_reset_password</code>  [<code class="option">-h</code>]  <em class="replaceable"><code>userId</code></em> </p></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command allows an admin to reset the password of the user. The password generated is temporary and must be changed for using VISHNU.</p></div><div class="refsect1" title="OPTIONS"><a id="options"></a><h2>OPTIONS</h2><div class="variablelist"><dl><dt><span class="term"><code class="option">-h <em class="replaceable"><code>help</code></em></code></span></dt><dd><p>help about the command.</p></dd></dl></div></div><div class="refsect1" title="ENVIRONMENT"><a id="environment"></a><h2>ENVIRONMENT</h2><div class="variablelist"><dl><dt><span class="term"><code class="envar">VISHNU_CONFIG_FILE</code></span></dt><dd><p>Contains the path to the local configuration file for VISHNU.</p></dd></dl></div></div><div class="refsect1" title="DIAGNOSTICS"><a id="diagnostics"></a><h2>DIAGNOSTICS</h2><p>The following diagnostics may be issued on stderr and the command will return the code provided within brackets: </p><div class="variablelist"><dl><dt><span class="term">"Vishnu not available (Service bus failure)" [1]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database error)" [2]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database connection)" [3]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (System)" [4]</span></dt><dd></dd><dt><span class="term">"Internal Error: Undefined exception" [9]</span></dt><dd></dd><dt><span class="term">"There is no open session in this terminal" [13]</span></dt><dd></dd><dt><span class="term">"Missing parameters" [14]</span></dt><dd></dd><dt><span class="term">"Vishnu initialization failed" [15]</span></dt><dd></dd><dt><span class="term">"Undefined error" [16]</span></dt><dd></dd><dt><span class="term">"The userId is unknown" [21]</span></dt><dd></dd><dt><span class="term">"The user is locked" [23]</span></dt><dd></dd><dt><span class="term">"The user is not an administrator" [25]</span></dt><dd></dd><dt><span class="term">"The session key is unrecognized" [28]</span></dt><dd></dd><dt><span class="term">"The sessionKey is expired. The session is closed." [29]</span></dt><dd></dd></dl></div></div><div class="refsect1" title="EXAMPLE"><a id="example"></a><h2>EXAMPLE</h2><p>To reset the password of the user user_1:</p><p>vishnu_reset_password user_1</p></div></div><div class="refentry" title="vishnu_save_configuration"><div class="refentry.separator"><hr /></div><a id="idp383104"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>vishnu_save_configuration — saves the configuration of VISHNU</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">vishnu_save_configuration</code>  [<code class="option">-h</code>]</p></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This commands allows an admin to save the VISHNU configuration. This configuration contains the list of users, the lists of machines and the list of local user configurations. It is saved on a xml format on a file registered on the directory $HOME/.vishnu/configurationSaved/.</p></div><div class="refsect1" title="OPTIONS"><a id="options"></a><h2>OPTIONS</h2><div class="variablelist"><dl><dt><span class="term"><code class="option">-h <em class="replaceable"><code>help</code></em></code></span></dt><dd><p>help about the command.</p></dd></dl></div></div><div class="refsect1" title="ENVIRONMENT"><a id="environment"></a><h2>ENVIRONMENT</h2><div class="variablelist"><dl><dt><span class="term"><code class="envar">VISHNU_CONFIG_FILE</code></span></dt><dd><p>Contains the path to the local configuration file for VISHNU.</p></dd></dl></div></div><div class="refsect1" title="DIAGNOSTICS"><a id="diagnostics"></a><h2>DIAGNOSTICS</h2><p>The following diagnostics may be issued on stderr and the command will return the code provided within brackets: </p><div class="variablelist"><dl><dt><span class="term">"Vishnu not available (Service bus failure)" [1]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database error)" [2]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database connection)" [3]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (System)" [4]</span></dt><dd></dd><dt><span class="term">"Internal Error: Undefined exception" [9]</span></dt><dd></dd><dt><span class="term">"There is no open session in this terminal" [13]</span></dt><dd></dd><dt><span class="term">"Missing parameters" [14]</span></dt><dd></dd><dt><span class="term">"Vishnu initialization failed" [15]</span></dt><dd></dd><dt><span class="term">"Undefined error" [16]</span></dt><dd></dd><dt><span class="term">"The user is not an administrator" [25]</span></dt><dd></dd><dt><span class="term">"A problem occurs during the configuration saving " [39]</span></dt><dd></dd></dl></div></div><div class="refsect1" title="EXAMPLE"><a id="example"></a><h2>EXAMPLE</h2><p>To save the current configuration:</p><p>vishnu_save_configuration</p></div></div><div class="refentry" title="vishnu_restore_configuration"><div class="refentry.separator"><hr /></div><a id="idp398280"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>vishnu_restore_configuration — restores the configuration of VISHNU</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">vishnu_restore_configuration</code>  [<code class="option">-h</code>]  <em class="replaceable"><code>filePath</code></em> </p></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function must be used carefully as it replaces all the content of the VISHNU central database
with the information stored in the provided file. This file contains the list of users, the lists of machines 
and the list of local user configurations. It can be created using the 
vishnu_save_configuration command.
The "root" VISHNU user is the only user authorized to call this function, and this action must be done
without any other user connected to VISHNU.
After restoring, the vishnu database is re-initialized.</p></div><div class="refsect1" title="OPTIONS"><a id="options"></a><h2>OPTIONS</h2><div class="variablelist"><dl><dt><span class="term"><code class="option">-h <em class="replaceable"><code>help</code></em></code></span></dt><dd><p>help about the command.</p></dd></dl></div></div><div class="refsect1" title="ENVIRONMENT"><a id="environment"></a><h2>ENVIRONMENT</h2><div class="variablelist"><dl><dt><span class="term"><code class="envar">VISHNU_CONFIG_FILE</code></span></dt><dd><p>Contains the path to the local configuration file for VISHNU.</p></dd></dl></div></div><div class="refsect1" title="DIAGNOSTICS"><a id="diagnostics"></a><h2>DIAGNOSTICS</h2><p>The following diagnostics may be issued on stderr and the command will return the code provided within brackets: </p><div class="variablelist"><dl><dt><span class="term">"Vishnu not available (Service bus failure)" [1]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database error)" [2]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database connection)" [3]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (System)" [4]</span></dt><dd></dd><dt><span class="term">"Internal Error: Undefined exception" [9]</span></dt><dd></dd><dt><span class="term">"There is no open session in this terminal" [13]</span></dt><dd></dd><dt><span class="term">"Missing parameters" [14]</span></dt><dd></dd><dt><span class="term">"Vishnu initialization failed" [15]</span></dt><dd></dd><dt><span class="term">"Undefined error" [16]</span></dt><dd></dd><dt><span class="term">"The user is not an administrator" [25]</span></dt><dd></dd><dt><span class="term">"A problem occurs during the configuration restoring" [40]</span></dt><dd></dd></dl></div></div><div class="refsect1" title="EXAMPLE"><a id="example"></a><h2>EXAMPLE</h2><p>To restore the configuration in /tmp/toto.cfg:</p><p>vishnu_restore_configuration /tmp/toto.cfg</p></div></div><div class="refentry" title="vishnu_add_machine"><div class="refentry.separator"><hr /></div><a id="idp414232"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>vishnu_add_machine — adds a new machine in VISHNU</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">vishnu_add_machine</code>  [<code class="option">-h</code>]  <em class="replaceable"><code>name</code></em>   <em class="replaceable"><code>site</code></em>   <em class="replaceable"><code>language</code></em>   <em class="replaceable"><code>sshPublicKeyFile</code></em>   <em class="replaceable"><code>machineDescription</code></em> </p></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command allows an admin to add a new machine in VISHNU.
Several machine information are mandatory such as: name, site, language
and the public ssh key of the VISHNU system account on the machine. This
public key will be provided automatically to all new VISHNU users who will
have to add it to the authorized keys of their own account on the machine.</p></div><div class="refsect1" title="OPTIONS"><a id="options"></a><h2>OPTIONS</h2><div class="variablelist"><dl><dt><span class="term"><code class="option">-h <em class="replaceable"><code>help</code></em></code></span></dt><dd><p>help about the command.</p></dd></dl></div></div><div class="refsect1" title="ENVIRONMENT"><a id="environment"></a><h2>ENVIRONMENT</h2><div class="variablelist"><dl><dt><span class="term"><code class="envar">VISHNU_CONFIG_FILE</code></span></dt><dd><p>Contains the path to the local configuration file for VISHNU.</p></dd></dl></div></div><div class="refsect1" title="DIAGNOSTICS"><a id="diagnostics"></a><h2>DIAGNOSTICS</h2><p>The following diagnostics may be issued on stderr and the command will return the code provided within brackets: </p><div class="variablelist"><dl><dt><span class="term">"Vishnu not available (Service bus failure)" [1]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database error)" [2]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database connection)" [3]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (System)" [4]</span></dt><dd></dd><dt><span class="term">"Internal Error: Undefined exception" [9]</span></dt><dd></dd><dt><span class="term">"There is no open session in this terminal" [13]</span></dt><dd></dd><dt><span class="term">"Missing parameters" [14]</span></dt><dd></dd><dt><span class="term">"Vishnu initialization failed" [15]</span></dt><dd></dd><dt><span class="term">"Undefined error" [16]</span></dt><dd></dd><dt><span class="term">"The user is not an administrator" [25]</span></dt><dd></dd><dt><span class="term">"The session key is unrecognized" [28]</span></dt><dd></dd><dt><span class="term">"The sessionKey is expired. The session is closed." [29]</span></dt><dd></dd><dt><span class="term">"The machineId already exists in the database" [33]</span></dt><dd></dd><dt><span class="term">"The closure policy is unknown" [42]</span></dt><dd></dd></dl></div></div><div class="refsect1" title="EXAMPLE"><a id="example"></a><h2>EXAMPLE</h2><p>To add the machine perceval in paris with the description in french "ceci est une description"  with the public key in /tmp/key.pub:</p><p>vishnu_add_machine perceval paris fr /tmp/key.pub "ceci est une description"</p></div></div><div class="refentry" title="vishnu_update_machine"><div class="refentry.separator"><hr /></div><a id="idp433152"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>vishnu_update_machine — updates machine description</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">vishnu_update_machine</code>  [<code class="option">-h</code>] [<code class="option">-n <em class="replaceable"><code>name</code></em></code>] [<code class="option">-s <em class="replaceable"><code>site</code></em></code>] [<code class="option">-d <em class="replaceable"><code>machineDescription</code></em></code>] [<code class="option">-l <em class="replaceable"><code>language</code></em></code>] [<code class="option">-t <em class="replaceable"><code>status</code></em></code>] [<code class="option">-k <em class="replaceable"><code>sshPublicKeyFile</code></em></code>]  <em class="replaceable"><code>machineId</code></em> </p></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command allows an admin to update a  VISHNU machine or to locked it. A machine locked is not usable.</p></div><div class="refsect1" title="OPTIONS"><a id="options"></a><h2>OPTIONS</h2><div class="variablelist"><dl><dt><span class="term"><code class="option">-h <em class="replaceable"><code>help</code></em></code></span></dt><dd><p>help about the command.</p></dd><dt><span class="term"><code class="option">-n <em class="replaceable"><code>name</code></em></code></span></dt><dd><p>represents the name of the machine.</p></dd><dt><span class="term"><code class="option">-s <em class="replaceable"><code>site</code></em></code></span></dt><dd><p>represents the location of the machine.</p></dd><dt><span class="term"><code class="option">-d <em class="replaceable"><code>machineDescription</code></em></code></span></dt><dd><p>represents the description of the machine.</p></dd><dt><span class="term"><code class="option">-l <em class="replaceable"><code>language</code></em></code></span></dt><dd><p>represents the language used for the description of the machine.</p></dd><dt><span class="term"><code class="option">-t <em class="replaceable"><code>status</code></em></code></span></dt><dd><p>represents the status of the machine.
The value must be an integer. Predefined values are: -1 (UNDEFINED), 0 (INACTIVE), 1 (ACTIVE).</p></dd><dt><span class="term"><code class="option">-k <em class="replaceable"><code>sshPublicKeyFile</code></em></code></span></dt><dd><p>contains the path to the SSH public key used by VISHNU to access local user accounts.</p></dd></dl></div></div><div class="refsect1" title="ENVIRONMENT"><a id="environment"></a><h2>ENVIRONMENT</h2><div class="variablelist"><dl><dt><span class="term"><code class="envar">VISHNU_CONFIG_FILE</code></span></dt><dd><p>Contains the path to the local configuration file for VISHNU.</p></dd></dl></div></div><div class="refsect1" title="DIAGNOSTICS"><a id="diagnostics"></a><h2>DIAGNOSTICS</h2><p>The following diagnostics may be issued on stderr and the command will return the code provided within brackets: </p><div class="variablelist"><dl><dt><span class="term">"Vishnu not available (Service bus failure)" [1]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database error)" [2]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database connection)" [3]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (System)" [4]</span></dt><dd></dd><dt><span class="term">"Internal Error: Undefined exception" [9]</span></dt><dd></dd><dt><span class="term">"There is no open session in this terminal" [13]</span></dt><dd></dd><dt><span class="term">"Missing parameters" [14]</span></dt><dd></dd><dt><span class="term">"Vishnu initialization failed" [15]</span></dt><dd></dd><dt><span class="term">"Undefined error" [16]</span></dt><dd></dd><dt><span class="term">"The user is not an administrator" [25]</span></dt><dd></dd><dt><span class="term">"The session key is unrecognized" [28]</span></dt><dd></dd><dt><span class="term">"The sessionKey is expired. The session is closed." [29]</span></dt><dd></dd><dt><span class="term">"The machine id is unknown" [32]</span></dt><dd></dd><dt><span class="term">"The closure policy is unknown" [42]</span></dt><dd></dd></dl></div></div><div class="refsect1" title="EXAMPLE"><a id="example"></a><h2>EXAMPLE</h2><p>To change the name of the machine whose id is machine_1 to provencal:</p><p>vishnu_update_machine machine_1 -n provencal</p></div></div><div class="refentry" title="vishnu_delete_machine"><div class="refentry.separator"><hr /></div><a id="idp459392"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>vishnu_delete_machine — removes a machine from VISHNU</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">vishnu_delete_machine</code>  [<code class="option">-h</code>]  <em class="replaceable"><code>machineId</code></em> </p></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command allows an admin to delete a machine from VISHNU. When a machine is deleted all of its information are deleted from VISHNU.</p></div><div class="refsect1" title="OPTIONS"><a id="options"></a><h2>OPTIONS</h2><div class="variablelist"><dl><dt><span class="term"><code class="option">-h <em class="replaceable"><code>help</code></em></code></span></dt><dd><p>help about the command.</p></dd></dl></div></div><div class="refsect1" title="ENVIRONMENT"><a id="environment"></a><h2>ENVIRONMENT</h2><div class="variablelist"><dl><dt><span class="term"><code class="envar">VISHNU_CONFIG_FILE</code></span></dt><dd><p>Contains the path to the local configuration file for VISHNU.</p></dd></dl></div></div><div class="refsect1" title="DIAGNOSTICS"><a id="diagnostics"></a><h2>DIAGNOSTICS</h2><p>The following diagnostics may be issued on stderr and the command will return the code provided within brackets: </p><div class="variablelist"><dl><dt><span class="term">"Vishnu not available (Service bus failure)" [1]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database error)" [2]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database connection)" [3]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (System)" [4]</span></dt><dd></dd><dt><span class="term">"Internal Error: Undefined exception" [9]</span></dt><dd></dd><dt><span class="term">"There is no open session in this terminal" [13]</span></dt><dd></dd><dt><span class="term">"Missing parameters" [14]</span></dt><dd></dd><dt><span class="term">"Vishnu initialization failed" [15]</span></dt><dd></dd><dt><span class="term">"Undefined error" [16]</span></dt><dd></dd><dt><span class="term">"The user is not an administrator" [25]</span></dt><dd></dd><dt><span class="term">"The session key is unrecognized" [28]</span></dt><dd></dd><dt><span class="term">"The sessionKey is expired. The session is closed." [29]</span></dt><dd></dd><dt><span class="term">"The machine id is unknown" [32]</span></dt><dd></dd></dl></div></div><div class="refsect1" title="EXAMPLE"><a id="example"></a><h2>EXAMPLE</h2><p>To delete the machine machine_1:</p><p>vishnu_delete_machine machine_1</p></div></div><div class="refentry" title="vishnu_list_users"><div class="refentry.separator"><hr /></div><a id="idp475936"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>vishnu_list_users — lists VISHNU users</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">vishnu_list_users</code>  [<code class="option">-h</code>] [<code class="option">-u <em class="replaceable"><code>userId</code></em></code>] [<code class="option">-i <em class="replaceable"><code>authSystemId</code></em></code>]</p></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command allows an admin to display all users information except the passwords.</p></div><div class="refsect1" title="OPTIONS"><a id="options"></a><h2>OPTIONS</h2><div class="variablelist"><dl><dt><span class="term"><code class="option">-h <em class="replaceable"><code>help</code></em></code></span></dt><dd><p>help about the command.</p></dd><dt><span class="term"><code class="option">-u <em class="replaceable"><code>userId</code></em></code></span></dt><dd><p>allows an admin to get information about a specific user identified by his/her userId.</p></dd><dt><span class="term"><code class="option">-i <em class="replaceable"><code>authSystemId</code></em></code></span></dt><dd><p>is an option to list users who have local user-authentication configurations on a specific user-authentication system.</p></dd></dl></div></div><div class="refsect1" title="ENVIRONMENT"><a id="environment"></a><h2>ENVIRONMENT</h2><div class="variablelist"><dl><dt><span class="term"><code class="envar">VISHNU_CONFIG_FILE</code></span></dt><dd><p>Contains the path to the local configuration file for VISHNU.</p></dd></dl></div></div><div class="refsect1" title="DIAGNOSTICS"><a id="diagnostics"></a><h2>DIAGNOSTICS</h2><p>The following diagnostics may be issued on stderr and the command will return the code provided within brackets: </p><div class="variablelist"><dl><dt><span class="term">"Vishnu not available (Service bus failure)" [1]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database error)" [2]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database connection)" [3]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (System)" [4]</span></dt><dd></dd><dt><span class="term">"Internal Error: Undefined exception" [9]</span></dt><dd></dd><dt><span class="term">"There is no open session in this terminal" [13]</span></dt><dd></dd><dt><span class="term">"Missing parameters" [14]</span></dt><dd></dd><dt><span class="term">"Vishnu initialization failed" [15]</span></dt><dd></dd><dt><span class="term">"Undefined error" [16]</span></dt><dd></dd><dt><span class="term">"The userId is unknown" [21]</span></dt><dd></dd><dt><span class="term">"The user is not an administrator" [25]</span></dt><dd></dd><dt><span class="term">"The session key is unrecognized" [28]</span></dt><dd></dd><dt><span class="term">"The sessionKey is expired. The session is closed." [29]</span></dt><dd></dd></dl></div></div><div class="refsect1" title="EXAMPLE"><a id="example"></a><h2>EXAMPLE</h2><p>To list all the users:</p><p>vishnu_list_users</p></div></div><div class="refentry" title="vishnu_configure_default_option"><div class="refentry.separator"><hr /></div><a id="idp495112"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>vishnu_configure_default_option — configures a default option value</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">vishnu_configure_default_option</code>  [<code class="option">-h</code>]  <em class="replaceable"><code>optionName</code></em>   <em class="replaceable"><code>value</code></em> </p></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>Options in VISHNU corresponds to parameters of some VISHNU commands 
(e.g. the close policy for vishnu_connect)
that can be preset in the user configuration stored by the VISHNU system.
This command allows an administrator to configure the default value of an option;
this is the value that will be applied when the user has no configuration defined for
that option using the vishnu_configure_option command.</p></div><div class="refsect1" title="OPTIONS"><a id="options"></a><h2>OPTIONS</h2><div class="variablelist"><dl><dt><span class="term"><code class="option">-h <em class="replaceable"><code>help</code></em></code></span></dt><dd><p>help about the command.</p></dd></dl></div></div><div class="refsect1" title="ENVIRONMENT"><a id="environment"></a><h2>ENVIRONMENT</h2><div class="variablelist"><dl><dt><span class="term"><code class="envar">VISHNU_CONFIG_FILE</code></span></dt><dd><p>Contains the path to the local configuration file for VISHNU.</p></dd></dl></div></div><div class="refsect1" title="DIAGNOSTICS"><a id="diagnostics"></a><h2>DIAGNOSTICS</h2><p>The following diagnostics may be issued on stderr and the command will return the code provided within brackets: </p><div class="variablelist"><dl><dt><span class="term">"Vishnu not available (Service bus failure)" [1]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database error)" [2]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database connection)" [3]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (System)" [4]</span></dt><dd></dd><dt><span class="term">"Internal Error: Undefined exception" [9]</span></dt><dd></dd><dt><span class="term">"There is no open session in this terminal" [13]</span></dt><dd></dd><dt><span class="term">"Missing parameters" [14]</span></dt><dd></dd><dt><span class="term">"Vishnu initialization failed" [15]</span></dt><dd></dd><dt><span class="term">"Undefined error" [16]</span></dt><dd></dd><dt><span class="term">"The user is not an administrator" [25]</span></dt><dd></dd><dt><span class="term">"The session key is unrecognized" [28]</span></dt><dd></dd><dt><span class="term">"The sessionKey is expired. The session is closed." [29]</span></dt><dd></dd><dt><span class="term">"The name of the user option is unknown" [41]</span></dt><dd></dd><dt><span class="term">"The value of the timeout is incorrect" [43]</span></dt><dd></dd><dt><span class="term">"The value of the transfer command is incorrect" [44]</span></dt><dd></dd></dl></div></div><div class="refsect1" title="EXAMPLE"><a id="example"></a><h2>EXAMPLE</h2><p>To configure the option VISHNU_TIMEOUT with the value 42:</p><p>vishnu_configure_default_option VISHNU_TIMEOUT 42</p></div></div><div class="refentry" title="vishnu_add_auth_system"><div class="refentry.separator"><hr /></div><a id="idp513576"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>vishnu_add_auth_system — adds a new user-authentication system in VISHNU</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">vishnu_add_auth_system</code>  [<code class="option">-h</code>] [<code class="option">-b <em class="replaceable"><code>ldapBase</code></em></code>]  <em class="replaceable"><code>name</code></em>   <em class="replaceable"><code>URI</code></em>   <em class="replaceable"><code>authLogin</code></em>   <em class="replaceable"><code>authPassword</code></em>   <em class="replaceable"><code>userPasswordEncryption</code></em>   <em class="replaceable"><code>type</code></em> </p></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command allows an admin to add a new user-authentication system in VISHNU.
Several user-authentication system's information are mandatory such as: URI,  login, password, 
type and optionally for LDAP the DN of the root entry. By default, the type of the user-authentication system is LDAP. </p></div><div class="refsect1" title="OPTIONS"><a id="options"></a><h2>OPTIONS</h2><div class="variablelist"><dl><dt><span class="term"><code class="option">-h <em class="replaceable"><code>help</code></em></code></span></dt><dd><p>help about the command.</p></dd><dt><span class="term"><code class="option">-b <em class="replaceable"><code>ldapBase</code></em></code></span></dt><dd><p>is an option for user-authentication system based on LDAP which specifies the DN of the root entry .</p></dd></dl></div></div><div class="refsect1" title="ENVIRONMENT"><a id="environment"></a><h2>ENVIRONMENT</h2><div class="variablelist"><dl><dt><span class="term"><code class="envar">VISHNU_CONFIG_FILE</code></span></dt><dd><p>Contains the path to the local configuration file for VISHNU.</p></dd></dl></div></div><div class="refsect1" title="DIAGNOSTICS"><a id="diagnostics"></a><h2>DIAGNOSTICS</h2><p>The following diagnostics may be issued on stderr and the command will return the code provided within brackets: </p><div class="variablelist"><dl><dt><span class="term">"Vishnu not available (Service bus failure)" [1]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database error)" [2]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database connection)" [3]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (System)" [4]</span></dt><dd></dd><dt><span class="term">"Internal Error: Undefined exception" [9]</span></dt><dd></dd><dt><span class="term">"There is no open session in this terminal" [13]</span></dt><dd></dd><dt><span class="term">"Missing parameters" [14]</span></dt><dd></dd><dt><span class="term">"Vishnu initialization failed" [15]</span></dt><dd></dd><dt><span class="term">"Undefined error" [16]</span></dt><dd></dd><dt><span class="term">"The user is not an administrator" [25]</span></dt><dd></dd><dt><span class="term">"The session key is unrecognized" [28]</span></dt><dd></dd><dt><span class="term">"The sessionKey is expired. The session is closed." [29]</span></dt><dd></dd><dt><span class="term">"The identifier (name or generated identifier) of the user-authentication system already exists" [50]</span></dt><dd></dd><dt><span class="term">"The encryption method is unknown" [53]</span></dt><dd></dd></dl></div></div><div class="refsect1" title="EXAMPLE"><a id="example"></a><h2>EXAMPLE</h2><p>To add an LDAP's user-authentication system on VISHNU named CLAMART with the parameters which follows: URI ldap://127.0.0.1:389/ , login cn=ldapadmin,dc=sysfera,dc=fr, password secret and DN root entry dc=sysfera,dc=fr: </p><p>vishnu_add_auth_system CLAMART ldap://127.0.0.1:389/ cn=ldapadmin,dc=sysfera,dc=fr secret -b uid=\$USERNAME,ou=users,dc=sysfera,dc=fr </p></div></div><div class="refentry" title="vishnu_update_auth_system"><div class="refentry.separator"><hr /></div><a id="idp534608"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>vishnu_update_auth_system — updates a user-authentication system in VISHNU</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">vishnu_update_auth_system</code>  [<code class="option">-h</code>] [<code class="option">-n <em class="replaceable"><code>name</code></em></code>] [<code class="option">-i <em class="replaceable"><code>URI</code></em></code>] [<code class="option">-u <em class="replaceable"><code>authLogin</code></em></code>] [<code class="option">-w <em class="replaceable"><code>authPassword</code></em></code>] [<code class="option">-e <em class="replaceable"><code>userPasswordEncryption</code></em></code>] [<code class="option">-t <em class="replaceable"><code>type</code></em></code>] [<code class="option">-s <em class="replaceable"><code>status</code></em></code>] [<code class="option">-b <em class="replaceable"><code>ldapBase</code></em></code>]  <em class="replaceable"><code>authSystemId</code></em> </p></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command allows an admin to update a user-authentication system in VISHNU.
It is possible to change the parameters which follow: URI,  login, password, 
type and optionally for LDAP the DN of the root entry. By default, the type of the user-authentication system is LDAP. </p></div><div class="refsect1" title="OPTIONS"><a id="options"></a><h2>OPTIONS</h2><div class="variablelist"><dl><dt><span class="term"><code class="option">-h <em class="replaceable"><code>help</code></em></code></span></dt><dd><p>help about the command.</p></dd><dt><span class="term"><code class="option">-n <em class="replaceable"><code>name</code></em></code></span></dt><dd><p>corresponds to the user-authentication system's name.</p></dd><dt><span class="term"><code class="option">-i <em class="replaceable"><code>URI</code></em></code></span></dt><dd><p>is the URI of the user-authentication systems (by the form host:port for LDAP).</p></dd><dt><span class="term"><code class="option">-u <em class="replaceable"><code>authLogin</code></em></code></span></dt><dd><p>is the login used to connect to the user-authentication system.</p></dd><dt><span class="term"><code class="option">-w <em class="replaceable"><code>authPassword</code></em></code></span></dt><dd><p>is the password used to connect to the user-authentication system.</p></dd><dt><span class="term"><code class="option">-e <em class="replaceable"><code>userPasswordEncryption</code></em></code></span></dt><dd><p>represents the encryption method used to encrypt user's password.
The value must be an integer. Predefined values are: -1 (UNDEFINED), 0 (SSHA).</p></dd><dt><span class="term"><code class="option">-t <em class="replaceable"><code>type</code></em></code></span></dt><dd><p>represents the type of the user-authentication system.
The value must be an integer. Predefined values are: -1 (UNDEFINED), 0 (LDAP).</p></dd><dt><span class="term"><code class="option">-s <em class="replaceable"><code>status</code></em></code></span></dt><dd><p>represents the status of the user-authentication system.
The value must be an integer. Predefined values are: -1 (UNDEFINED), 0 (INACTIVE), 1 (ACTIVE).</p></dd><dt><span class="term"><code class="option">-b <em class="replaceable"><code>ldapBase</code></em></code></span></dt><dd><p>is an option for user-authentication system based on LDAP which specifies the DN of the root entry .</p></dd></dl></div></div><div class="refsect1" title="ENVIRONMENT"><a id="environment"></a><h2>ENVIRONMENT</h2><div class="variablelist"><dl><dt><span class="term"><code class="envar">VISHNU_CONFIG_FILE</code></span></dt><dd><p>Contains the path to the local configuration file for VISHNU.</p></dd></dl></div></div><div class="refsect1" title="DIAGNOSTICS"><a id="diagnostics"></a><h2>DIAGNOSTICS</h2><p>The following diagnostics may be issued on stderr and the command will return the code provided within brackets: </p><div class="variablelist"><dl><dt><span class="term">"Vishnu not available (Service bus failure)" [1]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database error)" [2]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database connection)" [3]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (System)" [4]</span></dt><dd></dd><dt><span class="term">"Internal Error: Undefined exception" [9]</span></dt><dd></dd><dt><span class="term">"There is no open session in this terminal" [13]</span></dt><dd></dd><dt><span class="term">"Missing parameters" [14]</span></dt><dd></dd><dt><span class="term">"Vishnu initialization failed" [15]</span></dt><dd></dd><dt><span class="term">"Undefined error" [16]</span></dt><dd></dd><dt><span class="term">"The user is not an administrator" [25]</span></dt><dd></dd><dt><span class="term">"The session key is unrecognized" [28]</span></dt><dd></dd><dt><span class="term">"The sessionKey is expired. The session is closed." [29]</span></dt><dd></dd><dt><span class="term">"The user-authentication system is unknown or locked" [48]</span></dt><dd></dd><dt><span class="term">"The user-authentication system is already locked" [49]</span></dt><dd></dd><dt><span class="term">"The encryption method is unknown" [53]</span></dt><dd></dd></dl></div></div><div class="refsect1" title="EXAMPLE"><a id="example"></a><h2>EXAMPLE</h2><p>To change the address of a user-authentication system whose identifier is AUTHENLDAP_1:</p><p>vishnu_update_auth_system -i ldap://192.128.1.1:389/ AUTHENLDAP_1</p></div></div><div class="refentry" title="vishnu_delete_auth_system"><div class="refentry.separator"><hr /></div><a id="idp564992"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>vishnu_delete_auth_system — removes a user-authentication system from VISHNU</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">vishnu_delete_auth_system</code>  [<code class="option">-h</code>]  <em class="replaceable"><code>authSystemId</code></em> </p></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command allows an admin to remove a user-authentication system from VISHNU.</p></div><div class="refsect1" title="OPTIONS"><a id="options"></a><h2>OPTIONS</h2><div class="variablelist"><dl><dt><span class="term"><code class="option">-h <em class="replaceable"><code>help</code></em></code></span></dt><dd><p>help about the command.</p></dd></dl></div></div><div class="refsect1" title="ENVIRONMENT"><a id="environment"></a><h2>ENVIRONMENT</h2><div class="variablelist"><dl><dt><span class="term"><code class="envar">VISHNU_CONFIG_FILE</code></span></dt><dd><p>Contains the path to the local configuration file for VISHNU.</p></dd></dl></div></div><div class="refsect1" title="DIAGNOSTICS"><a id="diagnostics"></a><h2>DIAGNOSTICS</h2><p>The following diagnostics may be issued on stderr and the command will return the code provided within brackets: </p><div class="variablelist"><dl><dt><span class="term">"Vishnu not available (Service bus failure)" [1]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database error)" [2]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database connection)" [3]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (System)" [4]</span></dt><dd></dd><dt><span class="term">"Internal Error: Undefined exception" [9]</span></dt><dd></dd><dt><span class="term">"There is no open session in this terminal" [13]</span></dt><dd></dd><dt><span class="term">"Missing parameters" [14]</span></dt><dd></dd><dt><span class="term">"Vishnu initialization failed" [15]</span></dt><dd></dd><dt><span class="term">"Undefined error" [16]</span></dt><dd></dd><dt><span class="term">"The user is not an administrator" [25]</span></dt><dd></dd><dt><span class="term">"The session key is unrecognized" [28]</span></dt><dd></dd><dt><span class="term">"The sessionKey is expired. The session is closed." [29]</span></dt><dd></dd><dt><span class="term">"The user-authentication system is unknown or locked" [48]</span></dt><dd></dd></dl></div></div><div class="refsect1" title="EXAMPLE"><a id="example"></a><h2>EXAMPLE</h2><p>To remove a user-authentication system whose identifier is AUTHENLDAP_1:</p><p>vishnu_delete_auth_system AUTHENLDAP_1</p></div></div></div><div class="reference" title="UMS C++ API Reference"><div class="titlepage"><div><div><h1 class="title"><a id="idp581664"></a>UMS C++ API Reference</h1></div></div><hr /></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="refentrytitle"><a href="#idp582016">addUser</a></span><span class="refpurpose"> — adds a new VISHNU user</span></dt><dt><span class="refentrytitle"><a href="#idp596408">updateUser</a></span><span class="refpurpose"> — updates the user information except the userId and the password</span></dt><dt><span class="refentrytitle"><a href="#idp610728">deleteUser</a></span><span class="refpurpose"> — removes a user from VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp623888">resetPassword</a></span><span class="refpurpose"> — resets the password of a user</span></dt><dt><span class="refentrytitle"><a href="#idp638224">saveConfiguration</a></span><span class="refpurpose"> — saves the configuration of VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp649792">restoreConfiguration</a></span><span class="refpurpose"> — restores the configuration of VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp661728">addMachine</a></span><span class="refpurpose"> — adds a new machine in VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp675176">updateMachine</a></span><span class="refpurpose"> — updates machine description</span></dt><dt><span class="refentrytitle"><a href="#idp688240">deleteMachine</a></span><span class="refpurpose"> — removes a machine from VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp700768">listUsers</a></span><span class="refpurpose"> — lists VISHNU users</span></dt><dt><span class="refentrytitle"><a href="#idp714568">configureDefaultOption</a></span><span class="refpurpose"> — configures a default option value</span></dt><dt><span class="refentrytitle"><a href="#idp728672">addAuthSystem</a></span><span class="refpurpose"> — adds a new user-authentication system in VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp742168">updateAuthSystem</a></span><span class="refpurpose"> — updates a user-authentication system in VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp756176">deleteAuthSystem</a></span><span class="refpurpose"> — removes a user-authentication system from VISHNU</span></dt></dl></div><div class="refentry" title="addUser"><a id="idp582016"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>addUser — adds a new VISHNU user</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef">int <b class="fsfunc">vishnu::addUser</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">newUser</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>const string&amp; <var class="pdparam">sessionKey</var></code>;<br /><code>User&amp; <var class="pdparam">newUser</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command allows an admin to add a new user in VISHNU. 
Several user information are necessary such as: lastname, firtsname and email address. 
The admin also gives a VISHNU privilege to the new user and a new userId 
and password are sent to the user by email.</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The sessionKey is the encrypted identifier of the session generated by VISHNU.</p></dd><dt><span class="term"><span class="emphasis"><em>newUser</em></span></span></dt><dd><p>Input/Output argument. Object containing the new user information.</p></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">"Vishnu not available (Service bus failure)" [1]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database error)" [2]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database connection)" [3]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (System)" [4]</span></dt><dd></dd><dt><span class="term">"Internal Error: Undefined exception" [9]</span></dt><dd></dd><dt><span class="term">"The userId already exists in the database" [22]</span></dt><dd></dd><dt><span class="term">"The user is locked" [23]</span></dt><dd></dd><dt><span class="term">"The user is not an administrator" [25]</span></dt><dd></dd><dt><span class="term">"The mail adress is invalid" [27]</span></dt><dd></dd><dt><span class="term">"The session key is unrecognized" [28]</span></dt><dd></dd><dt><span class="term">"The sessionKey is expired. The session is closed." [29]</span></dt><dd></dd><dt><span class="term">"The machine is locked" [34]</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="updateUser"><div class="refentry.separator"><hr /></div><a id="idp596408"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>updateUser — updates the user information except the userId and the password</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef">int <b class="fsfunc">vishnu::updateUser</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">user</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>const string&amp; <var class="pdparam">sessionKey</var></code>;<br /><code>const User&amp; <var class="pdparam">user</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command allows an admin to update a VISHNU user information or to lock a user.  When a user is locked, she/he can not uses VISHNU. However, it is not possible to change the privilege of another admin.</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The sessionKey is the encrypted identifier of the session generated by VISHNU.</p></dd><dt><span class="term"><span class="emphasis"><em>user</em></span></span></dt><dd><p>Input argument. Object containing user information.</p></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">"Vishnu not available (Service bus failure)" [1]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database error)" [2]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database connection)" [3]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (System)" [4]</span></dt><dd></dd><dt><span class="term">"Internal Error: Undefined exception" [9]</span></dt><dd></dd><dt><span class="term">"The userId is unknown" [21]</span></dt><dd></dd><dt><span class="term">"The user is locked" [23]</span></dt><dd></dd><dt><span class="term">"Trying to lock a user account that is already locked" [24]</span></dt><dd></dd><dt><span class="term">"The user is not an administrator" [25]</span></dt><dd></dd><dt><span class="term">"The mail adress is invalid" [27]</span></dt><dd></dd><dt><span class="term">"The session key is unrecognized" [28]</span></dt><dd></dd><dt><span class="term">"The sessionKey is expired. The session is closed." [29]</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="deleteUser"><div class="refentry.separator"><hr /></div><a id="idp610728"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>deleteUser — removes a user from VISHNU</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef">int <b class="fsfunc">vishnu::deleteUser</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">userId</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>const string&amp; <var class="pdparam">sessionKey</var></code>;<br /><code>const string&amp; <var class="pdparam">userId</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command allows an admin to delete a user from VISHNU. When a user is deleted from VISHNU all of her/his information are deleted from VISHNU. However, it is not possible to delete the VISHNU root user.</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The sessionKey is the encrypted identifier of the session generated by VISHNU.</p></dd><dt><span class="term"><span class="emphasis"><em>userId</em></span></span></dt><dd><p>Input argument. UserId represents the VISHNU user identifier of the user who will be deleted from VISHNU.</p></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">"Vishnu not available (Service bus failure)" [1]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database error)" [2]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database connection)" [3]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (System)" [4]</span></dt><dd></dd><dt><span class="term">"Internal Error: Undefined exception" [9]</span></dt><dd></dd><dt><span class="term">"The userId is unknown" [21]</span></dt><dd></dd><dt><span class="term">"The user is locked" [23]</span></dt><dd></dd><dt><span class="term">"The user is not an administrator" [25]</span></dt><dd></dd><dt><span class="term">"The session key is unrecognized" [28]</span></dt><dd></dd><dt><span class="term">"The sessionKey is expired. The session is closed." [29]</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="resetPassword"><div class="refentry.separator"><hr /></div><a id="idp623888"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>resetPassword — resets the password of a user</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef">int <b class="fsfunc">vishnu::resetPassword</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">userId</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">tmpPassword</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>const string&amp; <var class="pdparam">sessionKey</var></code>;<br /><code>const string&amp; <var class="pdparam">userId</var></code>;<br /><code>string&amp; <var class="pdparam">tmpPassword</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command allows an admin to reset the password of the user. The password generated is temporary and must be changed for using VISHNU.</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The sessionKey is the encrypted identifier of the session generated by VISHNU.</p></dd><dt><span class="term"><span class="emphasis"><em>userId</em></span></span></dt><dd><p>Input argument. UserId represents the VISHNU user identifier of the user whose password will be reset.</p></dd><dt><span class="term"><span class="emphasis"><em>tmpPassword</em></span></span></dt><dd><p>Output argument. The temporary password generated by VISHNU.</p></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">"Vishnu not available (Service bus failure)" [1]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database error)" [2]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database connection)" [3]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (System)" [4]</span></dt><dd></dd><dt><span class="term">"Internal Error: Undefined exception" [9]</span></dt><dd></dd><dt><span class="term">"The userId is unknown" [21]</span></dt><dd></dd><dt><span class="term">"The user is locked" [23]</span></dt><dd></dd><dt><span class="term">"The user is not an administrator" [25]</span></dt><dd></dd><dt><span class="term">"The session key is unrecognized" [28]</span></dt><dd></dd><dt><span class="term">"The sessionKey is expired. The session is closed." [29]</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="saveConfiguration"><div class="refentry.separator"><hr /></div><a id="idp638224"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>saveConfiguration — saves the configuration of VISHNU</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef">int <b class="fsfunc">vishnu::saveConfiguration</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">configuration</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>const string&amp; <var class="pdparam">sessionKey</var></code>;<br /><code>Configuration&amp; <var class="pdparam">configuration</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This commands allows an admin to save the VISHNU configuration. This configuration contains the list of users, the lists of machines and the list of local user configurations. It is saved on a xml format on a file registered on the directory $HOME/.vishnu/configurationSaved/.</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The sessionKey is the encrypted identifier of the session generated by VISHNU.</p></dd><dt><span class="term"><span class="emphasis"><em>configuration</em></span></span></dt><dd><p>Output argument. The configuration is an object which encapsulates the configuration description.</p></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">"Vishnu not available (Service bus failure)" [1]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database error)" [2]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database connection)" [3]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (System)" [4]</span></dt><dd></dd><dt><span class="term">"Internal Error: Undefined exception" [9]</span></dt><dd></dd><dt><span class="term">"The user is not an administrator" [25]</span></dt><dd></dd><dt><span class="term">"A problem occurs during the configuration saving " [39]</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="restoreConfiguration"><div class="refentry.separator"><hr /></div><a id="idp649792"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>restoreConfiguration — restores the configuration of VISHNU</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef">int <b class="fsfunc">vishnu::restoreConfiguration</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">filePath</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>const string&amp; <var class="pdparam">sessionKey</var></code>;<br /><code>const string&amp; <var class="pdparam">filePath</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function must be used carefully as it replaces all the content of the VISHNU central database
with the information stored in the provided file. This file contains the list of users, the lists of machines 
and the list of local user configurations. It can be created using the 
vishnu_save_configuration command.
The "root" VISHNU user is the only user authorized to call this function, and this action must be done
without any other user connected to VISHNU.
After restoring, the vishnu database is re-initialized.</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The sessionKey is the encrypted identifier of the session generated by VISHNU.</p></dd><dt><span class="term"><span class="emphasis"><em>filePath</em></span></span></dt><dd><p>Input argument. The filePath is the path of the file used to restore VISHNU configuration.</p></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">"Vishnu not available (Service bus failure)" [1]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database error)" [2]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database connection)" [3]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (System)" [4]</span></dt><dd></dd><dt><span class="term">"Internal Error: Undefined exception" [9]</span></dt><dd></dd><dt><span class="term">"The user is not an administrator" [25]</span></dt><dd></dd><dt><span class="term">"A problem occurs during the configuration restoring" [40]</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="addMachine"><div class="refentry.separator"><hr /></div><a id="idp661728"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>addMachine — adds a new machine in VISHNU</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef">int <b class="fsfunc">vishnu::addMachine</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">newMachine</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>const string&amp; <var class="pdparam">sessionKey</var></code>;<br /><code>Machine&amp; <var class="pdparam">newMachine</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command allows an admin to add a new machine in VISHNU.
Several machine information are mandatory such as: name, site, language
and the public ssh key of the VISHNU system account on the machine. This
public key will be provided automatically to all new VISHNU users who will
have to add it to the authorized keys of their own account on the machine.</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The sessionKey is the encrypted identifier of the session generated by VISHNU.</p></dd><dt><span class="term"><span class="emphasis"><em>newMachine</em></span></span></dt><dd><p>Input/Output argument. Is an object which encapsulates the information of the machine which will be added in VISHNU except the machine id which will be created automatically by VISHNU.</p></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">"Vishnu not available (Service bus failure)" [1]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database error)" [2]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database connection)" [3]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (System)" [4]</span></dt><dd></dd><dt><span class="term">"Internal Error: Undefined exception" [9]</span></dt><dd></dd><dt><span class="term">"The user is not an administrator" [25]</span></dt><dd></dd><dt><span class="term">"The session key is unrecognized" [28]</span></dt><dd></dd><dt><span class="term">"The sessionKey is expired. The session is closed." [29]</span></dt><dd></dd><dt><span class="term">"The machineId already exists in the database" [33]</span></dt><dd></dd><dt><span class="term">"The closure policy is unknown" [42]</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="updateMachine"><div class="refentry.separator"><hr /></div><a id="idp675176"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>updateMachine — updates machine description</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef">int <b class="fsfunc">vishnu::updateMachine</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">machine</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>const string&amp; <var class="pdparam">sessionKey</var></code>;<br /><code>const Machine&amp; <var class="pdparam">machine</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command allows an admin to update a  VISHNU machine or to locked it. A machine locked is not usable.</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The sessionKey is the encrypted identifier of the session generated by VISHNU.</p></dd><dt><span class="term"><span class="emphasis"><em>machine</em></span></span></dt><dd><p>Input argument. Existing machine information.</p></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">"Vishnu not available (Service bus failure)" [1]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database error)" [2]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database connection)" [3]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (System)" [4]</span></dt><dd></dd><dt><span class="term">"Internal Error: Undefined exception" [9]</span></dt><dd></dd><dt><span class="term">"The user is not an administrator" [25]</span></dt><dd></dd><dt><span class="term">"The session key is unrecognized" [28]</span></dt><dd></dd><dt><span class="term">"The sessionKey is expired. The session is closed." [29]</span></dt><dd></dd><dt><span class="term">"The machine id is unknown" [32]</span></dt><dd></dd><dt><span class="term">"The closure policy is unknown" [42]</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="deleteMachine"><div class="refentry.separator"><hr /></div><a id="idp688240"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>deleteMachine — removes a machine from VISHNU</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef">int <b class="fsfunc">vishnu::deleteMachine</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">machineId</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>const string&amp; <var class="pdparam">sessionKey</var></code>;<br /><code>const string&amp; <var class="pdparam">machineId</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command allows an admin to delete a machine from VISHNU. When a machine is deleted all of its information are deleted from VISHNU.</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The sessionKey is the encrypted identifier of the session generated by VISHNU.</p></dd><dt><span class="term"><span class="emphasis"><em>machineId</em></span></span></dt><dd><p>Input argument. MachineId represents the identifier of the machine.</p></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">"Vishnu not available (Service bus failure)" [1]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database error)" [2]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database connection)" [3]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (System)" [4]</span></dt><dd></dd><dt><span class="term">"Internal Error: Undefined exception" [9]</span></dt><dd></dd><dt><span class="term">"The user is not an administrator" [25]</span></dt><dd></dd><dt><span class="term">"The session key is unrecognized" [28]</span></dt><dd></dd><dt><span class="term">"The sessionKey is expired. The session is closed." [29]</span></dt><dd></dd><dt><span class="term">"The machine id is unknown" [32]</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="listUsers"><div class="refentry.separator"><hr /></div><a id="idp700768"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>listUsers — lists VISHNU users</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef">int <b class="fsfunc">vishnu::listUsers</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">listuser</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">options = ListUsersOptions()</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>const string&amp; <var class="pdparam">sessionKey</var></code>;<br /><code>ListUsers&amp; <var class="pdparam">listuser</var></code>;<br /><code>const ListUsersOptions&amp; <var class="pdparam">options = ListUsersOptions()</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command allows an admin to display all users information except the passwords.</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The sessionKey is the identifier of the session generated by VISHNU.</p></dd><dt><span class="term"><span class="emphasis"><em>listuser</em></span></span></dt><dd><p>Output argument. Listuser is the list of users .</p></dd><dt><span class="term"><span class="emphasis"><em>options</em></span></span></dt><dd><p>Input argument. Allows an admin to get information about a specific user identified by his/her userId or to get information about users authenticated by a specific user-authentication system.</p></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">"Vishnu not available (Service bus failure)" [1]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database error)" [2]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database connection)" [3]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (System)" [4]</span></dt><dd></dd><dt><span class="term">"Internal Error: Undefined exception" [9]</span></dt><dd></dd><dt><span class="term">"The userId is unknown" [21]</span></dt><dd></dd><dt><span class="term">"The user is not an administrator" [25]</span></dt><dd></dd><dt><span class="term">"The session key is unrecognized" [28]</span></dt><dd></dd><dt><span class="term">"The sessionKey is expired. The session is closed." [29]</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="configureDefaultOption"><div class="refentry.separator"><hr /></div><a id="idp714568"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>configureDefaultOption — configures a default option value</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef">int <b class="fsfunc">vishnu::configureDefaultOption</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">optionValue</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>const string&amp; <var class="pdparam">sessionKey</var></code>;<br /><code>const OptionValue&amp; <var class="pdparam">optionValue</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>Options in VISHNU corresponds to parameters of some VISHNU commands 
(e.g. the close policy for vishnu_connect)
that can be preset in the user configuration stored by the VISHNU system.
This command allows an administrator to configure the default value of an option;
this is the value that will be applied when the user has no configuration defined for
that option using the vishnu_configure_option command.</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The sessionKey is the encrypted identifier of the session generated by VISHNU.</p></dd><dt><span class="term"><span class="emphasis"><em>optionValue</em></span></span></dt><dd><p>Input argument. The optionValue is an object which encapsulates the option information.</p></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">"Vishnu not available (Service bus failure)" [1]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database error)" [2]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database connection)" [3]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (System)" [4]</span></dt><dd></dd><dt><span class="term">"Internal Error: Undefined exception" [9]</span></dt><dd></dd><dt><span class="term">"The user is not an administrator" [25]</span></dt><dd></dd><dt><span class="term">"The session key is unrecognized" [28]</span></dt><dd></dd><dt><span class="term">"The sessionKey is expired. The session is closed." [29]</span></dt><dd></dd><dt><span class="term">"The name of the user option is unknown" [41]</span></dt><dd></dd><dt><span class="term">"The value of the timeout is incorrect" [43]</span></dt><dd></dd><dt><span class="term">"The value of the transfer command is incorrect" [44]</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="addAuthSystem"><div class="refentry.separator"><hr /></div><a id="idp728672"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>addAuthSystem — adds a new user-authentication system in VISHNU</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef">int <b class="fsfunc">vishnu::addAuthSystem</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">newAuthSys</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>const string&amp; <var class="pdparam">sessionKey</var></code>;<br /><code>AuthSystem&amp; <var class="pdparam">newAuthSys</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command allows an admin to add a new user-authentication system in VISHNU.
Several user-authentication system's information are mandatory such as: URI,  login, password, 
type and optionally for LDAP the DN of the root entry. By default, the type of the user-authentication system is LDAP. </p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The sessionKey is the encrypted identifier of the session generated by VISHNU.</p></dd><dt><span class="term"><span class="emphasis"><em>newAuthSys</em></span></span></dt><dd><p>Input/Output argument. Is an object which encapsulates the information of the user-authentication system which will be added in VISHNU.</p></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">"Vishnu not available (Service bus failure)" [1]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database error)" [2]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database connection)" [3]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (System)" [4]</span></dt><dd></dd><dt><span class="term">"Internal Error: Undefined exception" [9]</span></dt><dd></dd><dt><span class="term">"The user is not an administrator" [25]</span></dt><dd></dd><dt><span class="term">"The session key is unrecognized" [28]</span></dt><dd></dd><dt><span class="term">"The sessionKey is expired. The session is closed." [29]</span></dt><dd></dd><dt><span class="term">"The identifier (name or generated identifier) of the user-authentication system already exists" [50]</span></dt><dd></dd><dt><span class="term">"The encryption method is unknown" [53]</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="updateAuthSystem"><div class="refentry.separator"><hr /></div><a id="idp742168"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>updateAuthSystem — updates a user-authentication system in VISHNU</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef">int <b class="fsfunc">vishnu::updateAuthSystem</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">AuthSys</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>const string&amp; <var class="pdparam">sessionKey</var></code>;<br /><code>const AuthSystem&amp; <var class="pdparam">AuthSys</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command allows an admin to update a user-authentication system in VISHNU.
It is possible to change the parameters which follow: URI,  login, password, 
type and optionally for LDAP the DN of the root entry. By default, the type of the user-authentication system is LDAP. </p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The sessionKey is the encrypted identifier of the session generated by VISHNU.</p></dd><dt><span class="term"><span class="emphasis"><em>AuthSys</em></span></span></dt><dd><p>Input argument. Is an object which encapsulates the information of the user-authentication system which will be added in VISHNU.</p></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">"Vishnu not available (Service bus failure)" [1]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database error)" [2]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database connection)" [3]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (System)" [4]</span></dt><dd></dd><dt><span class="term">"Internal Error: Undefined exception" [9]</span></dt><dd></dd><dt><span class="term">"The user is not an administrator" [25]</span></dt><dd></dd><dt><span class="term">"The session key is unrecognized" [28]</span></dt><dd></dd><dt><span class="term">"The sessionKey is expired. The session is closed." [29]</span></dt><dd></dd><dt><span class="term">"The user-authentication system is unknown or locked" [48]</span></dt><dd></dd><dt><span class="term">"The user-authentication system is already locked" [49]</span></dt><dd></dd><dt><span class="term">"The encryption method is unknown" [53]</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="deleteAuthSystem"><div class="refentry.separator"><hr /></div><a id="idp756176"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>deleteAuthSystem — removes a user-authentication system from VISHNU</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef">int <b class="fsfunc">vishnu::deleteAuthSystem</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">authSystemId</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>const string&amp; <var class="pdparam">sessionKey</var></code>;<br /><code>const string&amp; <var class="pdparam">authSystemId</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command allows an admin to remove a user-authentication system from VISHNU.</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The sessionKey is the encrypted identifier of the session generated by VISHNU.</p></dd><dt><span class="term"><span class="emphasis"><em>authSystemId</em></span></span></dt><dd><p>Input argument. AuthSystemId is the identifier of the user-authentication system.</p></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">"Vishnu not available (Service bus failure)" [1]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database error)" [2]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database connection)" [3]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (System)" [4]</span></dt><dd></dd><dt><span class="term">"Internal Error: Undefined exception" [9]</span></dt><dd></dd><dt><span class="term">"The user is not an administrator" [25]</span></dt><dd></dd><dt><span class="term">"The session key is unrecognized" [28]</span></dt><dd></dd><dt><span class="term">"The sessionKey is expired. The session is closed." [29]</span></dt><dd></dd><dt><span class="term">"The user-authentication system is unknown or locked" [48]</span></dt><dd></dd></dl></div></div></div></div><div class="reference" title="UMS Python API Reference"><div class="titlepage"><div><div><h1 class="title"><a id="idp768808"></a>UMS Python API Reference</h1></div></div><hr /></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="refentrytitle"><a href="#idp769160">VISHNU.addUser</a></span><span class="refpurpose"> — adds a new VISHNU user</span></dt><dt><span class="refentrytitle"><a href="#idp786056">VISHNU.updateUser</a></span><span class="refpurpose"> — updates the user information except the userId and the password</span></dt><dt><span class="refentrytitle"><a href="#idp802944">VISHNU.deleteUser</a></span><span class="refpurpose"> — removes a user from VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp818488">VISHNU.resetPassword</a></span><span class="refpurpose"> — resets the password of a user</span></dt><dt><span class="refentrytitle"><a href="#idp835696">VISHNU.saveConfiguration</a></span><span class="refpurpose"> — saves the configuration of VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp849472">VISHNU.restoreConfiguration</a></span><span class="refpurpose"> — restores the configuration of VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp863592">VISHNU.addMachine</a></span><span class="refpurpose"> — adds a new machine in VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp879856">VISHNU.updateMachine</a></span><span class="refpurpose"> — updates machine description</span></dt><dt><span class="refentrytitle"><a href="#idp895352">VISHNU.deleteMachine</a></span><span class="refpurpose"> — removes a machine from VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp910240">VISHNU.listUsers</a></span><span class="refpurpose"> — lists VISHNU users</span></dt><dt><span class="refentrytitle"><a href="#idp926056">VISHNU.configureDefaultOption</a></span><span class="refpurpose"> — configures a default option value</span></dt><dt><span class="refentrytitle"><a href="#idp942672">VISHNU.addAuthSystem</a></span><span class="refpurpose"> — adds a new user-authentication system in VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp958904">VISHNU.updateAuthSystem</a></span><span class="refpurpose"> — updates a user-authentication system in VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp975424">VISHNU.deleteAuthSystem</a></span><span class="refpurpose"> — removes a user-authentication system from VISHNU</span></dt></dl></div><div class="refentry" title="VISHNU.addUser"><a id="idp769160"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>VISHNU.addUser — adds a new VISHNU user</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">ret=VISHNU.addUser</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">newUser</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>string <var class="pdparam">sessionKey</var></code>;<br /><code>User <var class="pdparam">newUser</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command allows an admin to add a new user in VISHNU. 
Several user information are necessary such as: lastname, firtsname and email address. 
The admin also gives a VISHNU privilege to the new user and a new userId 
and password are sent to the user by email.</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The sessionKey is the encrypted identifier of the session generated by VISHNU.</p></dd><dt><span class="term"><span class="emphasis"><em>newUser</em></span></span></dt><dd><p>Input/Output argument. Object containing the new user information.</p></dd></dl></div></div><div class="refsect1" title="RETURNED OBJECTS"><a id="returned objects"></a><h2>RETURNED OBJECTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>errorCode (integer)</em></span></span></dt><dd><p>Output parameter. Contains 0 on success and the error code on failure.</p></dd><dt></dt><dd></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">SystemException("Vishnu not available (Service bus failure)" [1])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (Database error)" [2])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (Database connection)" [3])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (System)" [4])</span></dt><dd></dd><dt><span class="term">SystemException("Internal Error: Undefined exception" [9])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The userId already exists in the database" [22])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The user is locked" [23])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The user is not an administrator" [25])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The mail adress is invalid" [27])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The session key is unrecognized" [28])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The sessionKey is expired. The session is closed." [29])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The machine is locked" [34])</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="VISHNU.updateUser"><div class="refentry.separator"><hr /></div><a id="idp786056"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>VISHNU.updateUser — updates the user information except the userId and the password</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">ret=VISHNU.updateUser</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">user</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>string <var class="pdparam">sessionKey</var></code>;<br /><code>User <var class="pdparam">user</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command allows an admin to update a VISHNU user information or to lock a user.  When a user is locked, she/he can not uses VISHNU. However, it is not possible to change the privilege of another admin.</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The sessionKey is the encrypted identifier of the session generated by VISHNU.</p></dd><dt><span class="term"><span class="emphasis"><em>user</em></span></span></dt><dd><p>Input argument. Object containing user information.</p></dd></dl></div></div><div class="refsect1" title="RETURNED OBJECTS"><a id="returned objects"></a><h2>RETURNED OBJECTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>errorCode (integer)</em></span></span></dt><dd><p>Output parameter. Contains 0 on success and the error code on failure.</p></dd><dt></dt><dd></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">SystemException("Vishnu not available (Service bus failure)" [1])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (Database error)" [2])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (Database connection)" [3])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (System)" [4])</span></dt><dd></dd><dt><span class="term">SystemException("Internal Error: Undefined exception" [9])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The userId is unknown" [21])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The user is locked" [23])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("Trying to lock a user account that is already locked" [24])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The user is not an administrator" [25])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The mail adress is invalid" [27])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The session key is unrecognized" [28])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The sessionKey is expired. The session is closed." [29])</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="VISHNU.deleteUser"><div class="refentry.separator"><hr /></div><a id="idp802944"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>VISHNU.deleteUser — removes a user from VISHNU</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">ret=VISHNU.deleteUser</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">userId</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>string <var class="pdparam">sessionKey</var></code>;<br /><code>string <var class="pdparam">userId</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command allows an admin to delete a user from VISHNU. When a user is deleted from VISHNU all of her/his information are deleted from VISHNU. However, it is not possible to delete the VISHNU root user.</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The sessionKey is the encrypted identifier of the session generated by VISHNU.</p></dd><dt><span class="term"><span class="emphasis"><em>userId</em></span></span></dt><dd><p>Input argument. UserId represents the VISHNU user identifier of the user who will be deleted from VISHNU.</p></dd></dl></div></div><div class="refsect1" title="RETURNED OBJECTS"><a id="returned objects"></a><h2>RETURNED OBJECTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>errorCode (integer)</em></span></span></dt><dd><p>Output parameter. Contains 0 on success and the error code on failure.</p></dd><dt></dt><dd></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">SystemException("Vishnu not available (Service bus failure)" [1])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (Database error)" [2])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (Database connection)" [3])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (System)" [4])</span></dt><dd></dd><dt><span class="term">SystemException("Internal Error: Undefined exception" [9])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The userId is unknown" [21])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The user is locked" [23])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The user is not an administrator" [25])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The session key is unrecognized" [28])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The sessionKey is expired. The session is closed." [29])</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="VISHNU.resetPassword"><div class="refentry.separator"><hr /></div><a id="idp818488"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>VISHNU.resetPassword — resets the password of a user</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">ret, tmpPassword=VISHNU.resetPassword</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">userId</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>string <var class="pdparam">sessionKey</var></code>;<br /><code>string <var class="pdparam">userId</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command allows an admin to reset the password of the user. The password generated is temporary and must be changed for using VISHNU.</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The sessionKey is the encrypted identifier of the session generated by VISHNU.</p></dd><dt><span class="term"><span class="emphasis"><em>userId</em></span></span></dt><dd><p>Input argument. UserId represents the VISHNU user identifier of the user whose password will be reset.</p></dd><dt><span class="term"><span class="emphasis"><em>tmpPassword</em></span></span></dt><dd><p>Output argument. The temporary password generated by VISHNU.</p></dd></dl></div></div><div class="refsect1" title="RETURNED OBJECTS"><a id="returned objects"></a><h2>RETURNED OBJECTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>errorCode (integer)</em></span></span></dt><dd><p>Output parameter. Contains 0 on success and the error code on failure.</p></dd><dt><span class="term"><span class="emphasis"><em>tmpPassword(string)</em></span></span></dt><dd><p>The temporary password generated by VISHNU</p></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">SystemException("Vishnu not available (Service bus failure)" [1])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (Database error)" [2])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (Database connection)" [3])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (System)" [4])</span></dt><dd></dd><dt><span class="term">SystemException("Internal Error: Undefined exception" [9])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The userId is unknown" [21])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The user is locked" [23])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The user is not an administrator" [25])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The session key is unrecognized" [28])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The sessionKey is expired. The session is closed." [29])</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="VISHNU.saveConfiguration"><div class="refentry.separator"><hr /></div><a id="idp835696"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>VISHNU.saveConfiguration — saves the configuration of VISHNU</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">ret=VISHNU.saveConfiguration</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">configuration</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>string <var class="pdparam">sessionKey</var></code>;<br /><code>Configuration <var class="pdparam">configuration</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This commands allows an admin to save the VISHNU configuration. This configuration contains the list of users, the lists of machines and the list of local user configurations. It is saved on a xml format on a file registered on the directory $HOME/.vishnu/configurationSaved/.</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The sessionKey is the encrypted identifier of the session generated by VISHNU.</p></dd><dt><span class="term"><span class="emphasis"><em>configuration</em></span></span></dt><dd><p>Output argument. The configuration is an object which encapsulates the configuration description.</p></dd></dl></div></div><div class="refsect1" title="RETURNED OBJECTS"><a id="returned objects"></a><h2>RETURNED OBJECTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>errorCode (integer)</em></span></span></dt><dd><p>Output parameter. Contains 0 on success and the error code on failure.</p></dd><dt></dt><dd></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">SystemException("Vishnu not available (Service bus failure)" [1])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (Database error)" [2])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (Database connection)" [3])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (System)" [4])</span></dt><dd></dd><dt><span class="term">SystemException("Internal Error: Undefined exception" [9])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The user is not an administrator" [25])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("A problem occurs during the configuration saving " [39])</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="VISHNU.restoreConfiguration"><div class="refentry.separator"><hr /></div><a id="idp849472"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>VISHNU.restoreConfiguration — restores the configuration of VISHNU</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">ret=VISHNU.restoreConfiguration</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">filePath</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>string <var class="pdparam">sessionKey</var></code>;<br /><code>string <var class="pdparam">filePath</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function must be used carefully as it replaces all the content of the VISHNU central database
with the information stored in the provided file. This file contains the list of users, the lists of machines 
and the list of local user configurations. It can be created using the 
vishnu_save_configuration command.
The "root" VISHNU user is the only user authorized to call this function, and this action must be done
without any other user connected to VISHNU.
After restoring, the vishnu database is re-initialized.</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The sessionKey is the encrypted identifier of the session generated by VISHNU.</p></dd><dt><span class="term"><span class="emphasis"><em>filePath</em></span></span></dt><dd><p>Input argument. The filePath is the path of the file used to restore VISHNU configuration.</p></dd></dl></div></div><div class="refsect1" title="RETURNED OBJECTS"><a id="returned objects"></a><h2>RETURNED OBJECTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>errorCode (integer)</em></span></span></dt><dd><p>Output parameter. Contains 0 on success and the error code on failure.</p></dd><dt></dt><dd></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">SystemException("Vishnu not available (Service bus failure)" [1])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (Database error)" [2])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (Database connection)" [3])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (System)" [4])</span></dt><dd></dd><dt><span class="term">SystemException("Internal Error: Undefined exception" [9])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The user is not an administrator" [25])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("A problem occurs during the configuration restoring" [40])</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="VISHNU.addMachine"><div class="refentry.separator"><hr /></div><a id="idp863592"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>VISHNU.addMachine — adds a new machine in VISHNU</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">ret=VISHNU.addMachine</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">newMachine</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>string <var class="pdparam">sessionKey</var></code>;<br /><code>Machine <var class="pdparam">newMachine</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command allows an admin to add a new machine in VISHNU.
Several machine information are mandatory such as: name, site, language
and the public ssh key of the VISHNU system account on the machine. This
public key will be provided automatically to all new VISHNU users who will
have to add it to the authorized keys of their own account on the machine.</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The sessionKey is the encrypted identifier of the session generated by VISHNU.</p></dd><dt><span class="term"><span class="emphasis"><em>newMachine</em></span></span></dt><dd><p>Input/Output argument. Is an object which encapsulates the information of the machine which will be added in VISHNU except the machine id which will be created automatically by VISHNU.</p></dd></dl></div></div><div class="refsect1" title="RETURNED OBJECTS"><a id="returned objects"></a><h2>RETURNED OBJECTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>errorCode (integer)</em></span></span></dt><dd><p>Output parameter. Contains 0 on success and the error code on failure.</p></dd><dt></dt><dd></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">SystemException("Vishnu not available (Service bus failure)" [1])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (Database error)" [2])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (Database connection)" [3])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (System)" [4])</span></dt><dd></dd><dt><span class="term">SystemException("Internal Error: Undefined exception" [9])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The user is not an administrator" [25])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The session key is unrecognized" [28])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The sessionKey is expired. The session is closed." [29])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The machineId already exists in the database" [33])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The closure policy is unknown" [42])</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="VISHNU.updateMachine"><div class="refentry.separator"><hr /></div><a id="idp879856"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>VISHNU.updateMachine — updates machine description</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">ret=VISHNU.updateMachine</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">machine</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>string <var class="pdparam">sessionKey</var></code>;<br /><code>Machine <var class="pdparam">machine</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command allows an admin to update a  VISHNU machine or to locked it. A machine locked is not usable.</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The sessionKey is the encrypted identifier of the session generated by VISHNU.</p></dd><dt><span class="term"><span class="emphasis"><em>machine</em></span></span></dt><dd><p>Input argument. Existing machine information.</p></dd></dl></div></div><div class="refsect1" title="RETURNED OBJECTS"><a id="returned objects"></a><h2>RETURNED OBJECTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>errorCode (integer)</em></span></span></dt><dd><p>Output parameter. Contains 0 on success and the error code on failure.</p></dd><dt></dt><dd></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">SystemException("Vishnu not available (Service bus failure)" [1])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (Database error)" [2])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (Database connection)" [3])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (System)" [4])</span></dt><dd></dd><dt><span class="term">SystemException("Internal Error: Undefined exception" [9])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The user is not an administrator" [25])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The session key is unrecognized" [28])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The sessionKey is expired. The session is closed." [29])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The machine id is unknown" [32])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The closure policy is unknown" [42])</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="VISHNU.deleteMachine"><div class="refentry.separator"><hr /></div><a id="idp895352"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>VISHNU.deleteMachine — removes a machine from VISHNU</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">ret=VISHNU.deleteMachine</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">machineId</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>string <var class="pdparam">sessionKey</var></code>;<br /><code>string <var class="pdparam">machineId</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command allows an admin to delete a machine from VISHNU. When a machine is deleted all of its information are deleted from VISHNU.</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The sessionKey is the encrypted identifier of the session generated by VISHNU.</p></dd><dt><span class="term"><span class="emphasis"><em>machineId</em></span></span></dt><dd><p>Input argument. MachineId represents the identifier of the machine.</p></dd></dl></div></div><div class="refsect1" title="RETURNED OBJECTS"><a id="returned objects"></a><h2>RETURNED OBJECTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>errorCode (integer)</em></span></span></dt><dd><p>Output parameter. Contains 0 on success and the error code on failure.</p></dd><dt></dt><dd></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">SystemException("Vishnu not available (Service bus failure)" [1])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (Database error)" [2])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (Database connection)" [3])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (System)" [4])</span></dt><dd></dd><dt><span class="term">SystemException("Internal Error: Undefined exception" [9])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The user is not an administrator" [25])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The session key is unrecognized" [28])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The sessionKey is expired. The session is closed." [29])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The machine id is unknown" [32])</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="VISHNU.listUsers"><div class="refentry.separator"><hr /></div><a id="idp910240"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>VISHNU.listUsers — lists VISHNU users</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">ret, listuser=VISHNU.listUsers</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">options = ListUsersOptions()</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>string <var class="pdparam">sessionKey</var></code>;<br /><code>ListUsersOptions <var class="pdparam">options = ListUsersOptions()</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command allows an admin to display all users information except the passwords.</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The sessionKey is the identifier of the session generated by VISHNU.</p></dd><dt><span class="term"><span class="emphasis"><em>listuser</em></span></span></dt><dd><p>Output argument. Listuser is the list of users .</p></dd><dt><span class="term"><span class="emphasis"><em>options</em></span></span></dt><dd><p>Input argument. Allows an admin to get information about a specific user identified by his/her userId or to get information about users authenticated by a specific user-authentication system.</p></dd></dl></div></div><div class="refsect1" title="RETURNED OBJECTS"><a id="returned objects"></a><h2>RETURNED OBJECTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>errorCode (integer)</em></span></span></dt><dd><p>Output parameter. Contains 0 on success and the error code on failure.</p></dd><dt></dt><dd></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">SystemException("Vishnu not available (Service bus failure)" [1])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (Database error)" [2])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (Database connection)" [3])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (System)" [4])</span></dt><dd></dd><dt><span class="term">SystemException("Internal Error: Undefined exception" [9])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The userId is unknown" [21])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The user is not an administrator" [25])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The session key is unrecognized" [28])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The sessionKey is expired. The session is closed." [29])</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="VISHNU.configureDefaultOption"><div class="refentry.separator"><hr /></div><a id="idp926056"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>VISHNU.configureDefaultOption — configures a default option value</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">ret=VISHNU.configureDefaultOption</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">optionValue</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>string <var class="pdparam">sessionKey</var></code>;<br /><code>OptionValue <var class="pdparam">optionValue</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>Options in VISHNU corresponds to parameters of some VISHNU commands 
(e.g. the close policy for vishnu_connect)
that can be preset in the user configuration stored by the VISHNU system.
This command allows an administrator to configure the default value of an option;
this is the value that will be applied when the user has no configuration defined for
that option using the vishnu_configure_option command.</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The sessionKey is the encrypted identifier of the session generated by VISHNU.</p></dd><dt><span class="term"><span class="emphasis"><em>optionValue</em></span></span></dt><dd><p>Input argument. The optionValue is an object which encapsulates the option information.</p></dd></dl></div></div><div class="refsect1" title="RETURNED OBJECTS"><a id="returned objects"></a><h2>RETURNED OBJECTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>errorCode (integer)</em></span></span></dt><dd><p>Output parameter. Contains 0 on success and the error code on failure.</p></dd><dt></dt><dd></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">SystemException("Vishnu not available (Service bus failure)" [1])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (Database error)" [2])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (Database connection)" [3])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (System)" [4])</span></dt><dd></dd><dt><span class="term">SystemException("Internal Error: Undefined exception" [9])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The user is not an administrator" [25])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The session key is unrecognized" [28])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The sessionKey is expired. The session is closed." [29])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The name of the user option is unknown" [41])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The value of the timeout is incorrect" [43])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The value of the transfer command is incorrect" [44])</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="VISHNU.addAuthSystem"><div class="refentry.separator"><hr /></div><a id="idp942672"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>VISHNU.addAuthSystem — adds a new user-authentication system in VISHNU</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">ret=VISHNU.addAuthSystem</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">newAuthSys</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>string <var class="pdparam">sessionKey</var></code>;<br /><code>AuthSystem <var class="pdparam">newAuthSys</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command allows an admin to add a new user-authentication system in VISHNU.
Several user-authentication system's information are mandatory such as: URI,  login, password, 
type and optionally for LDAP the DN of the root entry. By default, the type of the user-authentication system is LDAP. </p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The sessionKey is the encrypted identifier of the session generated by VISHNU.</p></dd><dt><span class="term"><span class="emphasis"><em>newAuthSys</em></span></span></dt><dd><p>Input/Output argument. Is an object which encapsulates the information of the user-authentication system which will be added in VISHNU.</p></dd></dl></div></div><div class="refsect1" title="RETURNED OBJECTS"><a id="returned objects"></a><h2>RETURNED OBJECTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>errorCode (integer)</em></span></span></dt><dd><p>Output parameter. Contains 0 on success and the error code on failure.</p></dd><dt></dt><dd></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">SystemException("Vishnu not available (Service bus failure)" [1])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (Database error)" [2])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (Database connection)" [3])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (System)" [4])</span></dt><dd></dd><dt><span class="term">SystemException("Internal Error: Undefined exception" [9])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The user is not an administrator" [25])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The session key is unrecognized" [28])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The sessionKey is expired. The session is closed." [29])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The identifier (name or generated identifier) of the user-authentication system already exists" [50])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The encryption method is unknown" [53])</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="VISHNU.updateAuthSystem"><div class="refentry.separator"><hr /></div><a id="idp958904"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>VISHNU.updateAuthSystem — updates a user-authentication system in VISHNU</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">ret=VISHNU.updateAuthSystem</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">AuthSys</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>string <var class="pdparam">sessionKey</var></code>;<br /><code>AuthSystem <var class="pdparam">AuthSys</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command allows an admin to update a user-authentication system in VISHNU.
It is possible to change the parameters which follow: URI,  login, password, 
type and optionally for LDAP the DN of the root entry. By default, the type of the user-authentication system is LDAP. </p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The sessionKey is the encrypted identifier of the session generated by VISHNU.</p></dd><dt><span class="term"><span class="emphasis"><em>AuthSys</em></span></span></dt><dd><p>Input argument. Is an object which encapsulates the information of the user-authentication system which will be added in VISHNU.</p></dd></dl></div></div><div class="refsect1" title="RETURNED OBJECTS"><a id="returned objects"></a><h2>RETURNED OBJECTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>errorCode (integer)</em></span></span></dt><dd><p>Output parameter. Contains 0 on success and the error code on failure.</p></dd><dt></dt><dd></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">SystemException("Vishnu not available (Service bus failure)" [1])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (Database error)" [2])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (Database connection)" [3])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (System)" [4])</span></dt><dd></dd><dt><span class="term">SystemException("Internal Error: Undefined exception" [9])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The user is not an administrator" [25])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The session key is unrecognized" [28])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The sessionKey is expired. The session is closed." [29])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The user-authentication system is unknown or locked" [48])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The user-authentication system is already locked" [49])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The encryption method is unknown" [53])</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="VISHNU.deleteAuthSystem"><div class="refentry.separator"><hr /></div><a id="idp975424"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>VISHNU.deleteAuthSystem — removes a user-authentication system from VISHNU</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">ret=VISHNU.deleteAuthSystem</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">authSystemId</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>string <var class="pdparam">sessionKey</var></code>;<br /><code>string <var class="pdparam">authSystemId</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command allows an admin to remove a user-authentication system from VISHNU.</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The sessionKey is the encrypted identifier of the session generated by VISHNU.</p></dd><dt><span class="term"><span class="emphasis"><em>authSystemId</em></span></span></dt><dd><p>Input argument. AuthSystemId is the identifier of the user-authentication system.</p></dd></dl></div></div><div class="refsect1" title="RETURNED OBJECTS"><a id="returned objects"></a><h2>RETURNED OBJECTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>errorCode (integer)</em></span></span></dt><dd><p>Output parameter. Contains 0 on success and the error code on failure.</p></dd><dt></dt><dd></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">SystemException("Vishnu not available (Service bus failure)" [1])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (Database error)" [2])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (Database connection)" [3])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (System)" [4])</span></dt><dd></dd><dt><span class="term">SystemException("Internal Error: Undefined exception" [9])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The user is not an administrator" [25])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The session key is unrecognized" [28])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The sessionKey is expired. The session is closed." [29])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The user-authentication system is unknown or locked" [48])</span></dt><dd></dd></dl></div></div></div></div><div class="reference" title="IMS Command reference"><div class="titlepage"><div><div><h1 class="title"><a id="idp990416"></a>IMS Command reference</h1></div></div><hr /></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="refentrytitle"><a href="#idp990768">vishnu_get_processes</a></span><span class="refpurpose"> — displays the list of the VISHNU processes running on machines</span></dt><dt><span class="refentrytitle"><a href="#idp1003856">vishnu_set_system_info</a></span><span class="refpurpose"> — updates the system information of a machine</span></dt><dt><span class="refentrytitle"><a href="#idp1019408">vishnu_set_system_threshold</a></span><span class="refpurpose"> — sets a threshold on a machine of a system</span></dt><dt><span class="refentrytitle"><a href="#idp1033336">vishnu_get_system_threshold</a></span><span class="refpurpose"> — gets a system threshold on a machine</span></dt><dt><span class="refentrytitle"><a href="#idp1048592">vishnu_define_user_identifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the users</span></dt><dt><span class="refentrytitle"><a href="#idp1061568">vishnu_define_machine_identifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the machines</span></dt><dt><span class="refentrytitle"><a href="#idp1074608">vishnu_define_job_identifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the jobs</span></dt><dt><span class="refentrytitle"><a href="#idp1087528">vishnu_define_transfer_identifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the file transfers</span></dt><dt><span class="refentrytitle"><a href="#idp1100496">vishnu_define_auth_identifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the authentication system</span></dt><dt><span class="refentrytitle"><a href="#idp1113472">vishnu_load_shed</a></span><span class="refpurpose"> — sheds load on a machine</span></dt><dt><span class="refentrytitle"><a href="#idp1130120">vishnu_set_update_frequency</a></span><span class="refpurpose"> — sets the update frequency of the IMS tables</span></dt><dt><span class="refentrytitle"><a href="#idp1142536">vishnu_stop</a></span><span class="refpurpose"> — To stop (and do not try to relaunch) a SeD</span></dt><dt><span class="refentrytitle"><a href="#idp1157912">vishnu_restart</a></span><span class="refpurpose"> — To restart a SeD or a MA</span></dt><dt><span class="refentrytitle"><a href="#idp1173296">vishnu_define_work_identifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the work</span></dt></dl></div><div class="refentry" title="vishnu_get_processes"><a id="idp990768"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>vishnu_get_processes — displays the list of the VISHNU processes running on machines</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">vishnu_get_processes</code>  [<code class="option">-h</code>] [<code class="option">-p <em class="replaceable"><code>machineId</code></em></code>]</p></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command with restricted access is used to get the list of VISHNU server processes that are running on the infrastructure or on a single machine. The results contain both the VISHNU identifier of the process and the DIET underlying middleware identifier. </p></div><div class="refsect1" title="OPTIONS"><a id="options"></a><h2>OPTIONS</h2><div class="variablelist"><dl><dt><span class="term"><code class="option">-h <em class="replaceable"><code>help</code></em></code></span></dt><dd><p>help about the command.</p></dd><dt><span class="term"><code class="option">-p <em class="replaceable"><code>machineId</code></em></code></span></dt><dd><p>The id of the machine.</p></dd></dl></div></div><div class="refsect1" title="ENVIRONMENT"><a id="environment"></a><h2>ENVIRONMENT</h2><div class="variablelist"><dl><dt><span class="term"><code class="envar">VISHNU_CONFIG_FILE</code></span></dt><dd><p>Contains the path to the local configuration file for VISHNU.</p></dd></dl></div></div><div class="refsect1" title="DIAGNOSTICS"><a id="diagnostics"></a><h2>DIAGNOSTICS</h2><p>The following diagnostics may be issued on stderr and the command will return the code provided within brackets: </p><div class="variablelist"><dl><dt><span class="term">"If a parameter is invalid" [10]</span></dt><dd></dd><dt><span class="term">"There is no open session in this terminal" [13]</span></dt><dd></dd><dt><span class="term">"Missing parameters" [14]</span></dt><dd></dd><dt><span class="term">"Vishnu initialization failed" [15]</span></dt><dd></dd><dt><span class="term">"Undefined error" [16]</span></dt><dd></dd></dl></div></div><div class="refsect1" title="EXAMPLE"><a id="example"></a><h2>EXAMPLE</h2><p>To get the list of the vishnu processes that are running and monitored on machine_1:</p><p>vishnu_get_processes -p machine_1</p></div></div><div class="refentry" title="vishnu_set_system_info"><div class="refentry.separator"><hr /></div><a id="idp1003856"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>vishnu_set_system_info — updates the system information of a machine</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">vishnu_set_system_info</code>  [<code class="option">-h</code>] [<code class="option">-m <em class="replaceable"><code>memory</code></em></code>] [<code class="option">-d <em class="replaceable"><code>diskSpace</code></em></code>]  <em class="replaceable"><code>machineId</code></em> </p></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command with restricted access is used to set system information on a machine in the VISHNU database. The machine must first be registered using the UMS "addMachine" call. Using the machine identifier, information such as the total memory and available diskspace on the machine can be added.</p></div><div class="refsect1" title="OPTIONS"><a id="options"></a><h2>OPTIONS</h2><div class="variablelist"><dl><dt><span class="term"><code class="option">-h <em class="replaceable"><code>help</code></em></code></span></dt><dd><p>help about the command.</p></dd><dt><span class="term"><code class="option">-m <em class="replaceable"><code>memory</code></em></code></span></dt><dd><p>Amount of RAM memory available on the machine (in Bytes).</p></dd><dt><span class="term"><code class="option">-d <em class="replaceable"><code>diskSpace</code></em></code></span></dt><dd><p>Amount of disk space available on the machine (in Bytes).</p></dd></dl></div></div><div class="refsect1" title="ENVIRONMENT"><a id="environment"></a><h2>ENVIRONMENT</h2><div class="variablelist"><dl><dt><span class="term"><code class="envar">VISHNU_CONFIG_FILE</code></span></dt><dd><p>Contains the path to the local configuration file for VISHNU.</p></dd></dl></div></div><div class="refsect1" title="DIAGNOSTICS"><a id="diagnostics"></a><h2>DIAGNOSTICS</h2><p>The following diagnostics may be issued on stderr and the command will return the code provided within brackets: </p><div class="variablelist"><dl><dt><span class="term">"The database generated an error" [2]</span></dt><dd></dd><dt><span class="term">"If a parameter is invalid" [10]</span></dt><dd></dd><dt><span class="term">"There is no open session in this terminal" [13]</span></dt><dd></dd><dt><span class="term">"Missing parameters" [14]</span></dt><dd></dd><dt><span class="term">"Vishnu initialization failed" [15]</span></dt><dd></dd><dt><span class="term">"Undefined error" [16]</span></dt><dd></dd></dl></div></div><div class="refsect1" title="EXAMPLE"><a id="example"></a><h2>EXAMPLE</h2><p>To set the diskspace size to 300 on machine_1:</p><p>vishnu_set_system_info -d 300 machine_1</p></div></div><div class="refentry" title="vishnu_set_system_threshold"><div class="refentry.separator"><hr /></div><a id="idp1019408"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>vishnu_set_system_threshold — sets a threshold on a machine of a system</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">vishnu_set_system_threshold</code>  [<code class="option">-h</code>]  <em class="replaceable"><code>value</code></em>   <em class="replaceable"><code>machineId</code></em>   <em class="replaceable"><code>type</code></em>   <em class="replaceable"><code>handler</code></em> </p></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an administrator to set a threshold. Each time an IMS server records the state of a machine, it checks the values defined, if a threshold is reached (over a use of the cpu or under the free memory or diskspace available), the administrator responsible for the threshold will receive an mail. These threshold will help the administrator to be aware of critical situations on a machine. Warning, a mail is sent for each time the threshold is reached, if a value swings around a threshold, the administrator may receive lots of emails depending on the update frequency.</p></div><div class="refsect1" title="OPTIONS"><a id="options"></a><h2>OPTIONS</h2><div class="variablelist"><dl><dt><span class="term"><code class="option">-h <em class="replaceable"><code>help</code></em></code></span></dt><dd><p>help about the command.</p></dd></dl></div></div><div class="refsect1" title="ENVIRONMENT"><a id="environment"></a><h2>ENVIRONMENT</h2><div class="variablelist"><dl><dt><span class="term"><code class="envar">VISHNU_CONFIG_FILE</code></span></dt><dd><p>Contains the path to the local configuration file for VISHNU.</p></dd></dl></div></div><div class="refsect1" title="DIAGNOSTICS"><a id="diagnostics"></a><h2>DIAGNOSTICS</h2><p>The following diagnostics may be issued on stderr and the command will return the code provided within brackets: </p><div class="variablelist"><dl><dt><span class="term">"The database generated an error" [2]</span></dt><dd></dd><dt><span class="term">"If a parameter is invalid" [10]</span></dt><dd></dd><dt><span class="term">"There is no open session in this terminal" [13]</span></dt><dd></dd><dt><span class="term">"Missing parameters" [14]</span></dt><dd></dd><dt><span class="term">"Vishnu initialization failed" [15]</span></dt><dd></dd><dt><span class="term">"Undefined error" [16]</span></dt><dd></dd></dl></div></div><div class="refsect1" title="EXAMPLE"><a id="example"></a><h2>EXAMPLE</h2><p>To set a threshold of type use of the CPU(value=1) of value 99% on machine_1 and handled by the user admin_1:</p><p>vishnu_set_system_threshold 99 machine_1 1 admin_1</p></div></div><div class="refentry" title="vishnu_get_system_threshold"><div class="refentry.separator"><hr /></div><a id="idp1033336"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>vishnu_get_system_threshold — gets a system threshold on a machine</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">vishnu_get_system_threshold</code>  [<code class="option">-h</code>] [<code class="option">-m <em class="replaceable"><code>machineId</code></em></code>] [<code class="option">-t <em class="replaceable"><code>metricType</code></em></code>]</p></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an administrator to get the thresholds that may be defined on a machine. This may be used to check the parameters defined to monitor the machine.
Each time a threshold is reached, a mail is sent. So checking the values of the threshold is important for the administrator to make sure they will not get tons of emails.</p></div><div class="refsect1" title="OPTIONS"><a id="options"></a><h2>OPTIONS</h2><div class="variablelist"><dl><dt><span class="term"><code class="option">-h <em class="replaceable"><code>help</code></em></code></span></dt><dd><p>help about the command.</p></dd><dt><span class="term"><code class="option">-m <em class="replaceable"><code>machineId</code></em></code></span></dt><dd><p>The id of the machine where the metric is defined.</p></dd><dt><span class="term"><code class="option">-t <em class="replaceable"><code>metricType</code></em></code></span></dt><dd><p>The type of the metric.
The value must be an integer. Predefined values are: 0 (UNDEFINED), 1 (CPUUSE), 2 (FREEDISKSPACE), 3 (FREEMEMORY).</p></dd></dl></div></div><div class="refsect1" title="ENVIRONMENT"><a id="environment"></a><h2>ENVIRONMENT</h2><div class="variablelist"><dl><dt><span class="term"><code class="envar">VISHNU_CONFIG_FILE</code></span></dt><dd><p>Contains the path to the local configuration file for VISHNU.</p></dd></dl></div></div><div class="refsect1" title="DIAGNOSTICS"><a id="diagnostics"></a><h2>DIAGNOSTICS</h2><p>The following diagnostics may be issued on stderr and the command will return the code provided within brackets: </p><div class="variablelist"><dl><dt><span class="term">"The database generated an error" [2]</span></dt><dd></dd><dt><span class="term">"If a parameter is invalid" [10]</span></dt><dd></dd><dt><span class="term">"There is no open session in this terminal" [13]</span></dt><dd></dd><dt><span class="term">"Missing parameters" [14]</span></dt><dd></dd><dt><span class="term">"Vishnu initialization failed" [15]</span></dt><dd></dd><dt><span class="term">"Undefined error" [16]</span></dt><dd></dd></dl></div></div><div class="refsect1" title="EXAMPLE"><a id="example"></a><h2>EXAMPLE</h2><p>To get all the thresholds:</p><p>vishnu_get_system_threshold</p></div></div><div class="refentry" title="vishnu_define_user_identifier"><div class="refentry.separator"><hr /></div><a id="idp1048592"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>vishnu_define_user_identifier — defines the shape of the identifiers automatically generated for the users</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">vishnu_define_user_identifier</code>  [<code class="option">-h</code>]  <em class="replaceable"><code>format</code></em> </p></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an administrator to define the format of the identifier that will be automatically generated for the users. Once the format is defined, each time a user is added, the format will be used to define its identifier.
The format can contain various variables, a variable is preceded by the '$' symbol. Moreover, the counter variable '$CPT' MUST be present in the format, otherwise it will be rejected.
The available variables are: 
$CPT: a counter
$NAME: The name of the user
$UNAME: The name of the user
$DAY: The day the user is added
$MONTH: The month the user is added
$YEAR: The year the user is added
$SITE: The site the user is
$TYPE: The 'U' symb to remind it is a user id</p></div><div class="refsect1" title="OPTIONS"><a id="options"></a><h2>OPTIONS</h2><div class="variablelist"><dl><dt><span class="term"><code class="option">-h <em class="replaceable"><code>help</code></em></code></span></dt><dd><p>help about the command.</p></dd></dl></div></div><div class="refsect1" title="ENVIRONMENT"><a id="environment"></a><h2>ENVIRONMENT</h2><div class="variablelist"><dl><dt><span class="term"><code class="envar">VISHNU_CONFIG_FILE</code></span></dt><dd><p>Contains the path to the local configuration file for VISHNU.</p></dd></dl></div></div><div class="refsect1" title="DIAGNOSTICS"><a id="diagnostics"></a><h2>DIAGNOSTICS</h2><p>The following diagnostics may be issued on stderr and the command will return the code provided within brackets: </p><div class="variablelist"><dl><dt><span class="term">"The database generated an error" [2]</span></dt><dd></dd><dt><span class="term">"If a parameter is invalid" [10]</span></dt><dd></dd><dt><span class="term">"There is no open session in this terminal" [13]</span></dt><dd></dd><dt><span class="term">"Missing parameters" [14]</span></dt><dd></dd><dt><span class="term">"Vishnu initialization failed" [15]</span></dt><dd></dd><dt><span class="term">"Undefined error" [16]</span></dt><dd></dd></dl></div></div><div class="refsect1" title="EXAMPLE"><a id="example"></a><h2>EXAMPLE</h2><p>To define the format to user_$CPT:</p><p>vishnu_define_user_identifier user_\$CPT</p></div></div><div class="refentry" title="vishnu_define_machine_identifier"><div class="refentry.separator"><hr /></div><a id="idp1061568"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>vishnu_define_machine_identifier — defines the shape of the identifiers automatically generated for the machines</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">vishnu_define_machine_identifier</code>  [<code class="option">-h</code>]  <em class="replaceable"><code>format</code></em> </p></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an administrator to define the format of the identifier that will be automatically generated for the machines. Once the format is defined, each time a machine is added, the format will be used to define its identifier.
The format can contain various variables, a variable is preceded by the '$' symbol. Moreover, the counter variable '$CPT' MUST be present in the format, otherwise it will be rejected.
The available variables are: 
$CPT: a counter
$MANAME: The hostname of the machine
$NAME: The hostname of the machine
$DAY: The day the machine is added
$MONTH: The month the machine is added
$YEAR: The year the machine is added
$SITE: The site the machine is
$TYPE: The 'M' symb to remind it is a machine id</p></div><div class="refsect1" title="OPTIONS"><a id="options"></a><h2>OPTIONS</h2><div class="variablelist"><dl><dt><span class="term"><code class="option">-h <em class="replaceable"><code>help</code></em></code></span></dt><dd><p>help about the command.</p></dd></dl></div></div><div class="refsect1" title="ENVIRONMENT"><a id="environment"></a><h2>ENVIRONMENT</h2><div class="variablelist"><dl><dt><span class="term"><code class="envar">VISHNU_CONFIG_FILE</code></span></dt><dd><p>Contains the path to the local configuration file for VISHNU.</p></dd></dl></div></div><div class="refsect1" title="DIAGNOSTICS"><a id="diagnostics"></a><h2>DIAGNOSTICS</h2><p>The following diagnostics may be issued on stderr and the command will return the code provided within brackets: </p><div class="variablelist"><dl><dt><span class="term">"The database generated an error" [2]</span></dt><dd></dd><dt><span class="term">"If a parameter is invalid" [10]</span></dt><dd></dd><dt><span class="term">"There is no open session in this terminal" [13]</span></dt><dd></dd><dt><span class="term">"Missing parameters" [14]</span></dt><dd></dd><dt><span class="term">"Vishnu initialization failed" [15]</span></dt><dd></dd><dt><span class="term">"Undefined error" [16]</span></dt><dd></dd></dl></div></div><div class="refsect1" title="EXAMPLE"><a id="example"></a><h2>EXAMPLE</h2><p>To define the format to machine_$CPT:</p><p>vishnu_define_machine_identifier machine_\$CPT</p></div></div><div class="refentry" title="vishnu_define_job_identifier"><div class="refentry.separator"><hr /></div><a id="idp1074608"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>vishnu_define_job_identifier — defines the shape of the identifiers automatically generated for the jobs</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">vishnu_define_job_identifier</code>  [<code class="option">-h</code>]  <em class="replaceable"><code>format</code></em> </p></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an administrator to define the format of the identifier that will be automatically generated for the jobs submited through TMS. Once the format is defined, each time a job is submitted, the format will be used to define its identifier.
The format can contain various variables, a variable is preceded by the '$' symbol. Moreover, the counter variable '$CPT' MUST be present in the format, otherwise it will be rejected.
The available variables are: 
$CPT: a counter
$DAY: The day the job is submitted
$MONTH: The month the job is submitted
$YEAR: The year the job is submitted
$TYPE: The 'J' symb to remind it is a job id</p></div><div class="refsect1" title="OPTIONS"><a id="options"></a><h2>OPTIONS</h2><div class="variablelist"><dl><dt><span class="term"><code class="option">-h <em class="replaceable"><code>help</code></em></code></span></dt><dd><p>help about the command.</p></dd></dl></div></div><div class="refsect1" title="ENVIRONMENT"><a id="environment"></a><h2>ENVIRONMENT</h2><div class="variablelist"><dl><dt><span class="term"><code class="envar">VISHNU_CONFIG_FILE</code></span></dt><dd><p>Contains the path to the local configuration file for VISHNU.</p></dd></dl></div></div><div class="refsect1" title="DIAGNOSTICS"><a id="diagnostics"></a><h2>DIAGNOSTICS</h2><p>The following diagnostics may be issued on stderr and the command will return the code provided within brackets: </p><div class="variablelist"><dl><dt><span class="term">"The database generated an error" [2]</span></dt><dd></dd><dt><span class="term">"If a parameter is invalid" [10]</span></dt><dd></dd><dt><span class="term">"There is no open session in this terminal" [13]</span></dt><dd></dd><dt><span class="term">"Missing parameters" [14]</span></dt><dd></dd><dt><span class="term">"Vishnu initialization failed" [15]</span></dt><dd></dd><dt><span class="term">"Undefined error" [16]</span></dt><dd></dd></dl></div></div><div class="refsect1" title="EXAMPLE"><a id="example"></a><h2>EXAMPLE</h2><p>To define the format to job_$CPT:</p><p>vishnu_define_job_identifier job_\$CPT</p></div></div><div class="refentry" title="vishnu_define_transfer_identifier"><div class="refentry.separator"><hr /></div><a id="idp1087528"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>vishnu_define_transfer_identifier — defines the shape of the identifiers automatically generated for the file transfers</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">vishnu_define_transfer_identifier</code>  [<code class="option">-h</code>]  <em class="replaceable"><code>format</code></em> </p></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an administrator to define the format of the identifier that will be automatically generated for the file transfers. Once the format is defined, each time a file transfer is done, the format will be used to define its identifier.
The format can contain various variables, a variable is preceded by the '$' symbol. Moreover, the counter variable '$CPT' MUST be present in the format, otherwise it will be rejected.
The available variables are: 
$CPT: a counter
$DAY: The day the file transfer is done
$MONTH: The month the file transfer is done
$YEAR: The year the file transfer is done
$TYPE: The 'F' symb to remind it is a file transfer id</p></div><div class="refsect1" title="OPTIONS"><a id="options"></a><h2>OPTIONS</h2><div class="variablelist"><dl><dt><span class="term"><code class="option">-h <em class="replaceable"><code>help</code></em></code></span></dt><dd><p>help about the command.</p></dd></dl></div></div><div class="refsect1" title="ENVIRONMENT"><a id="environment"></a><h2>ENVIRONMENT</h2><div class="variablelist"><dl><dt><span class="term"><code class="envar">VISHNU_CONFIG_FILE</code></span></dt><dd><p>Contains the path to the local configuration file for VISHNU.</p></dd></dl></div></div><div class="refsect1" title="DIAGNOSTICS"><a id="diagnostics"></a><h2>DIAGNOSTICS</h2><p>The following diagnostics may be issued on stderr and the command will return the code provided within brackets: </p><div class="variablelist"><dl><dt><span class="term">"The database generated an error" [2]</span></dt><dd></dd><dt><span class="term">"If a parameter is invalid" [10]</span></dt><dd></dd><dt><span class="term">"There is no open session in this terminal" [13]</span></dt><dd></dd><dt><span class="term">"Missing parameters" [14]</span></dt><dd></dd><dt><span class="term">"Vishnu initialization failed" [15]</span></dt><dd></dd><dt><span class="term">"Undefined error" [16]</span></dt><dd></dd></dl></div></div><div class="refsect1" title="EXAMPLE"><a id="example"></a><h2>EXAMPLE</h2><p>To define the format to transfer_$CPT:</p><p>vishnu_define_transfer_identifier transfer_\$CPT</p></div></div><div class="refentry" title="vishnu_define_auth_identifier"><div class="refentry.separator"><hr /></div><a id="idp1100496"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>vishnu_define_auth_identifier — defines the shape of the identifiers automatically generated for the authentication system</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">vishnu_define_auth_identifier</code>  [<code class="option">-h</code>]  <em class="replaceable"><code>format</code></em> </p></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an administrator to define the format of the identifier that will be automatically generated for the authentication. Once the format is defined, each time an authentication system is added, the format will be used to define its identifier.
The format can contain various variables, a variable is preceded by the '$' symbol. Moreover, the counter variable '$CPT' MUST be present in the format, otherwise it will be rejected.
The available variables are: 
$CPT: a counter
$DAY: The day the file transfer is done
$MONTH: The month the file transfer is done
$YEAR: The year the file transfer is done
$TYPE: The 'F' symb to remind it is a file transfer id</p></div><div class="refsect1" title="OPTIONS"><a id="options"></a><h2>OPTIONS</h2><div class="variablelist"><dl><dt><span class="term"><code class="option">-h <em class="replaceable"><code>help</code></em></code></span></dt><dd><p>help about the command.</p></dd></dl></div></div><div class="refsect1" title="ENVIRONMENT"><a id="environment"></a><h2>ENVIRONMENT</h2><div class="variablelist"><dl><dt><span class="term"><code class="envar">VISHNU_CONFIG_FILE</code></span></dt><dd><p>Contains the path to the local configuration file for VISHNU.</p></dd></dl></div></div><div class="refsect1" title="DIAGNOSTICS"><a id="diagnostics"></a><h2>DIAGNOSTICS</h2><p>The following diagnostics may be issued on stderr and the command will return the code provided within brackets: </p><div class="variablelist"><dl><dt><span class="term">"The database generated an error" [2]</span></dt><dd></dd><dt><span class="term">"If a parameter is invalid" [10]</span></dt><dd></dd><dt><span class="term">"There is no open session in this terminal" [13]</span></dt><dd></dd><dt><span class="term">"Missing parameters" [14]</span></dt><dd></dd><dt><span class="term">"Vishnu initialization failed" [15]</span></dt><dd></dd><dt><span class="term">"Undefined error" [16]</span></dt><dd></dd></dl></div></div><div class="refsect1" title="EXAMPLE"><a id="example"></a><h2>EXAMPLE</h2><p>To define the format to transfer_$CPT:</p><p>vishnu_define_auth_identifier LDAP_\$CPT</p></div></div><div class="refentry" title="vishnu_load_shed"><div class="refentry.separator"><hr /></div><a id="idp1113472"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>vishnu_load_shed — sheds load on a machine</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">vishnu_load_shed</code>  [<code class="option">-h</code>] [<code class="option">-s <em class="replaceable"><code>URI</code></em></code>] [<code class="option">-n <em class="replaceable"><code>name</code></em></code>]  <em class="replaceable"><code>machineId</code></em>   <em class="replaceable"><code>loadShedType</code></em> </p></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an administrator to shed load on a machine. Two modes are available: SOFT mode will cancel all the submitted jobs and file transfers for all VISHNU users (Note that jobs and file transfers not initiated through VISHNU will not be impacted). HARD mode will additionally stop all the VISHNU processes on the machine. If a user without administrator rights uses this function, all the user's jobs and file transfers will be cancelled on the machine. In the HARD mode, the stopped processes will not be automatically restarted.
Type values:
HARD = 1
SOFT   = 2</p></div><div class="refsect1" title="OPTIONS"><a id="options"></a><h2>OPTIONS</h2><div class="variablelist"><dl><dt><span class="term"><code class="option">-h <em class="replaceable"><code>help</code></em></code></span></dt><dd><p>help about the command.</p></dd><dt><span class="term"><code class="option">-s <em class="replaceable"><code>URI</code></em></code></span></dt><dd><p>The URI of the supervisor to control the processes.</p></dd><dt><span class="term"><code class="option">-n <em class="replaceable"><code>name</code></em></code></span></dt><dd><p>The path to the supervisord script file on the machine.</p></dd></dl></div></div><div class="refsect1" title="ENVIRONMENT"><a id="environment"></a><h2>ENVIRONMENT</h2><div class="variablelist"><dl><dt><span class="term"><code class="envar">VISHNU_CONFIG_FILE</code></span></dt><dd><p>Contains the path to the local configuration file for VISHNU.</p></dd></dl></div></div><div class="refsect1" title="DIAGNOSTICS"><a id="diagnostics"></a><h2>DIAGNOSTICS</h2><p>The following diagnostics may be issued on stderr and the command will return the code provided within brackets: </p><div class="variablelist"><dl><dt><span class="term">"The database generated an error" [2]</span></dt><dd></dd><dt><span class="term">"If a parameter is invalid" [10]</span></dt><dd></dd><dt><span class="term">"There is no open session in this terminal" [13]</span></dt><dd></dd><dt><span class="term">"Missing parameters" [14]</span></dt><dd></dd><dt><span class="term">"Vishnu initialization failed" [15]</span></dt><dd></dd><dt><span class="term">"Undefined error" [16]</span></dt><dd></dd><dt><span class="term">"If a component is unavailable" [301]</span></dt><dd></dd></dl></div></div><div class="refsect1" title="EXAMPLE"><a id="example"></a><h2>EXAMPLE</h2><p>To make a hard load shedding on machine_1:</p><p>vishnu_load_shed machine_1 1</p></div></div><div class="refentry" title="vishnu_set_update_frequency"><div class="refentry.separator"><hr /></div><a id="idp1130120"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>vishnu_set_update_frequency — sets the update frequency of the IMS tables</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">vishnu_set_update_frequency</code>  [<code class="option">-h</code>]  <em class="replaceable"><code>freq</code></em> </p></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an admin to set the update frequency. This frequency corresponds to how often the state of the machines is automatically polled by the IMS server. The value must be in seconds.</p></div><div class="refsect1" title="OPTIONS"><a id="options"></a><h2>OPTIONS</h2><div class="variablelist"><dl><dt><span class="term"><code class="option">-h <em class="replaceable"><code>help</code></em></code></span></dt><dd><p>help about the command.</p></dd></dl></div></div><div class="refsect1" title="ENVIRONMENT"><a id="environment"></a><h2>ENVIRONMENT</h2><div class="variablelist"><dl><dt><span class="term"><code class="envar">VISHNU_CONFIG_FILE</code></span></dt><dd><p>Contains the path to the local configuration file for VISHNU.</p></dd></dl></div></div><div class="refsect1" title="DIAGNOSTICS"><a id="diagnostics"></a><h2>DIAGNOSTICS</h2><p>The following diagnostics may be issued on stderr and the command will return the code provided within brackets: </p><div class="variablelist"><dl><dt><span class="term">"The database generated an error" [2]</span></dt><dd></dd><dt><span class="term">"If a parameter is invalid" [10]</span></dt><dd></dd><dt><span class="term">"There is no open session in this terminal" [13]</span></dt><dd></dd><dt><span class="term">"Missing parameters" [14]</span></dt><dd></dd><dt><span class="term">"Vishnu initialization failed" [15]</span></dt><dd></dd><dt><span class="term">"Undefined error" [16]</span></dt><dd></dd></dl></div></div><div class="refsect1" title="EXAMPLE"><a id="example"></a><h2>EXAMPLE</h2><p>To set the frequency to 100:</p><p>vishnu_set_update_frequency 100</p></div></div><div class="refentry" title="vishnu_stop"><div class="refentry.separator"><hr /></div><a id="idp1142536"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>vishnu_stop — To stop (and do not try to relaunch) a SeD</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">vishnu_stop</code>  [<code class="option">-h</code>] [<code class="option">-s <em class="replaceable"><code>URI</code></em></code>] [<code class="option">-n <em class="replaceable"><code>name</code></em></code>]  <em class="replaceable"><code>machineId</code></em> </p></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an admin to stop a VISHNU server on a machine. The stopped process will not be restarted automatically.
The important parameters in the process are the names and the machine.
The processName must be UMS, TMS, IMS or FMS , in upper case.
</p></div><div class="refsect1" title="OPTIONS"><a id="options"></a><h2>OPTIONS</h2><div class="variablelist"><dl><dt><span class="term"><code class="option">-h <em class="replaceable"><code>help</code></em></code></span></dt><dd><p>help about the command.</p></dd><dt><span class="term"><code class="option">-s <em class="replaceable"><code>URI</code></em></code></span></dt><dd><p>The URI of the supervisor to control the processes.</p></dd><dt><span class="term"><code class="option">-n <em class="replaceable"><code>name</code></em></code></span></dt><dd><p>The path to the supervisord script file on the machine.</p></dd></dl></div></div><div class="refsect1" title="ENVIRONMENT"><a id="environment"></a><h2>ENVIRONMENT</h2><div class="variablelist"><dl><dt><span class="term"><code class="envar">VISHNU_CONFIG_FILE</code></span></dt><dd><p>Contains the path to the local configuration file for VISHNU.</p></dd></dl></div></div><div class="refsect1" title="DIAGNOSTICS"><a id="diagnostics"></a><h2>DIAGNOSTICS</h2><p>The following diagnostics may be issued on stderr and the command will return the code provided within brackets: </p><div class="variablelist"><dl><dt><span class="term">"The database generated an error" [2]</span></dt><dd></dd><dt><span class="term">"If a parameter is invalid" [10]</span></dt><dd></dd><dt><span class="term">"There is no open session in this terminal" [13]</span></dt><dd></dd><dt><span class="term">"Missing parameters" [14]</span></dt><dd></dd><dt><span class="term">"Vishnu initialization failed" [15]</span></dt><dd></dd><dt><span class="term">"Undefined error" [16]</span></dt><dd></dd></dl></div></div><div class="refsect1" title="EXAMPLE"><a id="example"></a><h2>EXAMPLE</h2><p>To stop the UMS process on machine_1:</p><p>vishnu_stop UMS machine_1</p></div></div><div class="refentry" title="vishnu_restart"><div class="refentry.separator"><hr /></div><a id="idp1157912"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>vishnu_restart — To restart a SeD or a MA</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">vishnu_restart</code>  [<code class="option">-h</code>] [<code class="option">-s <em class="replaceable"><code>URI</code></em></code>] [<code class="option">-n <em class="replaceable"><code>name</code></em></code>]  <em class="replaceable"><code>machineId</code></em> </p></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an admin to restart a VISHNU server on a machine. Warning when restarting a server, first it is tried to stop it, so if one is running it is stopped and then another is restarted.</p></div><div class="refsect1" title="OPTIONS"><a id="options"></a><h2>OPTIONS</h2><div class="variablelist"><dl><dt><span class="term"><code class="option">-h <em class="replaceable"><code>help</code></em></code></span></dt><dd><p>help about the command.</p></dd><dt><span class="term"><code class="option">-s <em class="replaceable"><code>URI</code></em></code></span></dt><dd><p>The URI of the supervisor to control the processes.</p></dd><dt><span class="term"><code class="option">-n <em class="replaceable"><code>name</code></em></code></span></dt><dd><p>The path to the supervisord script file on the machine.</p></dd></dl></div></div><div class="refsect1" title="ENVIRONMENT"><a id="environment"></a><h2>ENVIRONMENT</h2><div class="variablelist"><dl><dt><span class="term"><code class="envar">VISHNU_CONFIG_FILE</code></span></dt><dd><p>Contains the path to the local configuration file for VISHNU.</p></dd></dl></div></div><div class="refsect1" title="DIAGNOSTICS"><a id="diagnostics"></a><h2>DIAGNOSTICS</h2><p>The following diagnostics may be issued on stderr and the command will return the code provided within brackets: </p><div class="variablelist"><dl><dt><span class="term">"The database generated an error" [2]</span></dt><dd></dd><dt><span class="term">"If a parameter is invalid" [10]</span></dt><dd></dd><dt><span class="term">"There is no open session in this terminal" [13]</span></dt><dd></dd><dt><span class="term">"Missing parameters" [14]</span></dt><dd></dd><dt><span class="term">"Vishnu initialization failed" [15]</span></dt><dd></dd><dt><span class="term">"Undefined error" [16]</span></dt><dd></dd></dl></div></div><div class="refsect1" title="EXAMPLE"><a id="example"></a><h2>EXAMPLE</h2><p>To restart using the configuration file ums.cfg an UMS sed on machine_1:</p><p>vishnu_restart -v /tmp/ums.cfg -t 1 machine_1</p></div></div><div class="refentry" title="vishnu_define_work_identifier"><div class="refentry.separator"><hr /></div><a id="idp1173296"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>vishnu_define_work_identifier — defines the shape of the identifiers automatically generated for the work</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">vishnu_define_work_identifier</code>  [<code class="option">-h</code>]  <em class="replaceable"><code>format</code></em> </p></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an administrator to define the format of the identifier that will be automatically generated for the work. Once the format is defined, each time a work is added, the format will be used to define its identifier.
The format can contain various variables, a variable is preceded by the '$' symbol. Moreover, the counter variable '$CPT' MUST be present in the format, otherwise it will be rejected.
The available variables are: 
$CPT: a counter
$DAY: The day the file transfer is done
$MONTH: The month the file transfer is done
$YEAR: The year the file transfer is done
$TYPE: The 'W' symb to remind it is a file transfer id
$NAME: The name of the work</p></div><div class="refsect1" title="OPTIONS"><a id="options"></a><h2>OPTIONS</h2><div class="variablelist"><dl><dt><span class="term"><code class="option">-h <em class="replaceable"><code>help</code></em></code></span></dt><dd><p>help about the command.</p></dd></dl></div></div><div class="refsect1" title="ENVIRONMENT"><a id="environment"></a><h2>ENVIRONMENT</h2><div class="variablelist"><dl><dt><span class="term"><code class="envar">VISHNU_CONFIG_FILE</code></span></dt><dd><p>Contains the path to the local configuration file for VISHNU.</p></dd></dl></div></div><div class="refsect1" title="DIAGNOSTICS"><a id="diagnostics"></a><h2>DIAGNOSTICS</h2><p>The following diagnostics may be issued on stderr and the command will return the code provided within brackets: </p><div class="variablelist"><dl><dt><span class="term">"The database generated an error" [2]</span></dt><dd></dd><dt><span class="term">"If a parameter is invalid" [10]</span></dt><dd></dd><dt><span class="term">"There is no open session in this terminal" [13]</span></dt><dd></dd><dt><span class="term">"Missing parameters" [14]</span></dt><dd></dd><dt><span class="term">"Vishnu initialization failed" [15]</span></dt><dd></dd><dt><span class="term">"Undefined error" [16]</span></dt><dd></dd></dl></div></div><div class="refsect1" title="EXAMPLE"><a id="example"></a><h2>EXAMPLE</h2><p>To define the format to W_$CPT:</p><p>vishnu_define_work_identifier W_\$CPT</p></div></div></div><div class="reference" title="IMS C++ API Reference"><div class="titlepage"><div><div><h1 class="title"><a id="idp1186312"></a>IMS C++ API Reference</h1></div></div><hr /></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="refentrytitle"><a href="#idp1186664">getProcesses</a></span><span class="refpurpose"> — displays the list of the VISHNU processes running on machines</span></dt><dt><span class="refentrytitle"><a href="#idp1195744">setSystemInfo</a></span><span class="refpurpose"> — updates the system information of a machine</span></dt><dt><span class="refentrytitle"><a href="#idp1204216">setSystemThreshold</a></span><span class="refpurpose"> — sets a threshold on a machine of a system</span></dt><dt><span class="refentrytitle"><a href="#idp1212920">getSystemThreshold</a></span><span class="refpurpose"> — gets a system threshold on a machine</span></dt><dt><span class="refentrytitle"><a href="#idp1222600">defineUserIdentifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the users</span></dt><dt><span class="refentrytitle"><a href="#idp1231464">defineMachineIdentifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the machines</span></dt><dt><span class="refentrytitle"><a href="#idp1240376">defineJobIdentifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the jobs</span></dt><dt><span class="refentrytitle"><a href="#idp1249160">defineTransferIdentifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the file transfers</span></dt><dt><span class="refentrytitle"><a href="#idp1258000">defineAuthIdentifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the authentication system</span></dt><dt><span class="refentrytitle"><a href="#idp1266856">loadShed</a></span><span class="refpurpose"> — sheds load on a machine</span></dt><dt><span class="refentrytitle"><a href="#idp1279232">setUpdateFrequency</a></span><span class="refpurpose"> — sets the update frequency of the IMS tables</span></dt><dt><span class="refentrytitle"><a href="#idp1287560">stop</a></span><span class="refpurpose"> — To stop (and do not try to relaunch) a SeD</span></dt><dt><span class="refentrytitle"><a href="#idp1297136">restart</a></span><span class="refpurpose"> — To restart a SeD or a MA</span></dt><dt><span class="refentrytitle"><a href="#idp1306608">defineWorkIdentifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the work</span></dt></dl></div><div class="refentry" title="getProcesses"><a id="idp1186664"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>getProcesses — displays the list of the VISHNU processes running on machines</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef">int <b class="fsfunc">vishnu::getProcesses</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">process</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">options = ProcessOp()</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>const string&amp; <var class="pdparam">sessionKey</var></code>;<br /><code>ListProcesses&amp; <var class="pdparam">process</var></code>;<br /><code>const ProcessOp&amp; <var class="pdparam">options = ProcessOp()</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command with restricted access is used to get the list of VISHNU server processes that are running on the infrastructure or on a single machine. The results contain both the VISHNU identifier of the process and the DIET underlying middleware identifier. </p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The session key.</p></dd><dt><span class="term"><span class="emphasis"><em>process</em></span></span></dt><dd><p>Output argument. The list of the Vishnu processes on the machine.</p></dd><dt><span class="term"><span class="emphasis"><em>options</em></span></span></dt><dd><p>Input argument. The options to search for the processes.</p></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">"If a parameter is invalid" [10]</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="setSystemInfo"><div class="refentry.separator"><hr /></div><a id="idp1195744"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>setSystemInfo — updates the system information of a machine</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef">int <b class="fsfunc">vishnu::setSystemInfo</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">systemInfo</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>const string&amp; <var class="pdparam">sessionKey</var></code>;<br /><code>const SystemInfo&amp; <var class="pdparam">systemInfo</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command with restricted access is used to set system information on a machine in the VISHNU database. The machine must first be registered using the UMS "addMachine" call. Using the machine identifier, information such as the total memory and available diskspace on the machine can be added.</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The session key.</p></dd><dt><span class="term"><span class="emphasis"><em>systemInfo</em></span></span></dt><dd><p>Input argument. Contains system information to store in Vishnu database.</p></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">"The database generated an error" [2]</span></dt><dd></dd><dt><span class="term">"If a parameter is invalid" [10]</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="setSystemThreshold"><div class="refentry.separator"><hr /></div><a id="idp1204216"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>setSystemThreshold — sets a threshold on a machine of a system</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef">int <b class="fsfunc">vishnu::setSystemThreshold</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">threshold</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>const string&amp; <var class="pdparam">sessionKey</var></code>;<br /><code>const Threshold&amp; <var class="pdparam">threshold</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an administrator to set a threshold. Each time an IMS server records the state of a machine, it checks the values defined, if a threshold is reached (over a use of the cpu or under the free memory or diskspace available), the administrator responsible for the threshold will receive an mail. These threshold will help the administrator to be aware of critical situations on a machine. Warning, a mail is sent for each time the threshold is reached, if a value swings around a threshold, the administrator may receive lots of emails depending on the update frequency.</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The session key.</p></dd><dt><span class="term"><span class="emphasis"><em>threshold</em></span></span></dt><dd><p>Input argument. The threshold to set.</p></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">"The database generated an error" [2]</span></dt><dd></dd><dt><span class="term">"If a parameter is invalid" [10]</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="getSystemThreshold"><div class="refentry.separator"><hr /></div><a id="idp1212920"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>getSystemThreshold — gets a system threshold on a machine</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef">int <b class="fsfunc">vishnu::getSystemThreshold</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">value</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">options</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>const string&amp; <var class="pdparam">sessionKey</var></code>;<br /><code>ListThreshold&amp; <var class="pdparam">value</var></code>;<br /><code>const ThresholdOp&amp; <var class="pdparam">options</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an administrator to get the thresholds that may be defined on a machine. This may be used to check the parameters defined to monitor the machine.
Each time a threshold is reached, a mail is sent. So checking the values of the threshold is important for the administrator to make sure they will not get tons of emails.</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The session key.</p></dd><dt><span class="term"><span class="emphasis"><em>value</em></span></span></dt><dd><p>Output argument. The thresholds value.</p></dd><dt><span class="term"><span class="emphasis"><em>options</em></span></span></dt><dd><p>Input argument. The options for the threshold.</p></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">"The database generated an error" [2]</span></dt><dd></dd><dt><span class="term">"If a parameter is invalid" [10]</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="defineUserIdentifier"><div class="refentry.separator"><hr /></div><a id="idp1222600"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>defineUserIdentifier — defines the shape of the identifiers automatically generated for the users</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef">int <b class="fsfunc">vishnu::defineUserIdentifier</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">format</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>const string&amp; <var class="pdparam">sessionKey</var></code>;<br /><code>const string&amp; <var class="pdparam">format</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an administrator to define the format of the identifier that will be automatically generated for the users. Once the format is defined, each time a user is added, the format will be used to define its identifier.
The format can contain various variables, a variable is preceded by the '$' symbol. Moreover, the counter variable '$CPT' MUST be present in the format, otherwise it will be rejected.
The available variables are: 
$CPT: a counter
$NAME: The name of the user
$UNAME: The name of the user
$DAY: The day the user is added
$MONTH: The month the user is added
$YEAR: The year the user is added
$SITE: The site the user is
$TYPE: The 'U' symb to remind it is a user id</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The session key.</p></dd><dt><span class="term"><span class="emphasis"><em>format</em></span></span></dt><dd><p>Input argument. The new format to use.</p></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">"The database generated an error" [2]</span></dt><dd></dd><dt><span class="term">"If a parameter is invalid" [10]</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="defineMachineIdentifier"><div class="refentry.separator"><hr /></div><a id="idp1231464"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>defineMachineIdentifier — defines the shape of the identifiers automatically generated for the machines</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef">int <b class="fsfunc">vishnu::defineMachineIdentifier</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">format</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>const string&amp; <var class="pdparam">sessionKey</var></code>;<br /><code>const string&amp; <var class="pdparam">format</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an administrator to define the format of the identifier that will be automatically generated for the machines. Once the format is defined, each time a machine is added, the format will be used to define its identifier.
The format can contain various variables, a variable is preceded by the '$' symbol. Moreover, the counter variable '$CPT' MUST be present in the format, otherwise it will be rejected.
The available variables are: 
$CPT: a counter
$MANAME: The hostname of the machine
$NAME: The hostname of the machine
$DAY: The day the machine is added
$MONTH: The month the machine is added
$YEAR: The year the machine is added
$SITE: The site the machine is
$TYPE: The 'M' symb to remind it is a machine id</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The session key.</p></dd><dt><span class="term"><span class="emphasis"><em>format</em></span></span></dt><dd><p>Input argument. The new format to use.</p></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">"The database generated an error" [2]</span></dt><dd></dd><dt><span class="term">"If a parameter is invalid" [10]</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="defineJobIdentifier"><div class="refentry.separator"><hr /></div><a id="idp1240376"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>defineJobIdentifier — defines the shape of the identifiers automatically generated for the jobs</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef">int <b class="fsfunc">vishnu::defineJobIdentifier</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">format</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>const string&amp; <var class="pdparam">sessionKey</var></code>;<br /><code>const string&amp; <var class="pdparam">format</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an administrator to define the format of the identifier that will be automatically generated for the jobs submited through TMS. Once the format is defined, each time a job is submitted, the format will be used to define its identifier.
The format can contain various variables, a variable is preceded by the '$' symbol. Moreover, the counter variable '$CPT' MUST be present in the format, otherwise it will be rejected.
The available variables are: 
$CPT: a counter
$DAY: The day the job is submitted
$MONTH: The month the job is submitted
$YEAR: The year the job is submitted
$TYPE: The 'J' symb to remind it is a job id</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The session key.</p></dd><dt><span class="term"><span class="emphasis"><em>format</em></span></span></dt><dd><p>Input argument. The new format to use.</p></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">"The database generated an error" [2]</span></dt><dd></dd><dt><span class="term">"If a parameter is invalid" [10]</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="defineTransferIdentifier"><div class="refentry.separator"><hr /></div><a id="idp1249160"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>defineTransferIdentifier — defines the shape of the identifiers automatically generated for the file transfers</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef">int <b class="fsfunc">vishnu::defineTransferIdentifier</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">format</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>const string&amp; <var class="pdparam">sessionKey</var></code>;<br /><code>const string&amp; <var class="pdparam">format</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an administrator to define the format of the identifier that will be automatically generated for the file transfers. Once the format is defined, each time a file transfer is done, the format will be used to define its identifier.
The format can contain various variables, a variable is preceded by the '$' symbol. Moreover, the counter variable '$CPT' MUST be present in the format, otherwise it will be rejected.
The available variables are: 
$CPT: a counter
$DAY: The day the file transfer is done
$MONTH: The month the file transfer is done
$YEAR: The year the file transfer is done
$TYPE: The 'F' symb to remind it is a file transfer id</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The session key.</p></dd><dt><span class="term"><span class="emphasis"><em>format</em></span></span></dt><dd><p>Input argument. The new format to use.</p></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">"The database generated an error" [2]</span></dt><dd></dd><dt><span class="term">"If a parameter is invalid" [10]</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="defineAuthIdentifier"><div class="refentry.separator"><hr /></div><a id="idp1258000"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>defineAuthIdentifier — defines the shape of the identifiers automatically generated for the authentication system</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef">int <b class="fsfunc">vishnu::defineAuthIdentifier</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">format</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>const string&amp; <var class="pdparam">sessionKey</var></code>;<br /><code>const string&amp; <var class="pdparam">format</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an administrator to define the format of the identifier that will be automatically generated for the authentication. Once the format is defined, each time an authentication system is added, the format will be used to define its identifier.
The format can contain various variables, a variable is preceded by the '$' symbol. Moreover, the counter variable '$CPT' MUST be present in the format, otherwise it will be rejected.
The available variables are: 
$CPT: a counter
$DAY: The day the file transfer is done
$MONTH: The month the file transfer is done
$YEAR: The year the file transfer is done
$TYPE: The 'F' symb to remind it is a file transfer id</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The session key.</p></dd><dt><span class="term"><span class="emphasis"><em>format</em></span></span></dt><dd><p>Input argument. The new format to use.</p></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">"The database generated an error" [2]</span></dt><dd></dd><dt><span class="term">"If a parameter is invalid" [10]</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="loadShed"><div class="refentry.separator"><hr /></div><a id="idp1266856"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>loadShed — sheds load on a machine</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef">int <b class="fsfunc">vishnu::loadShed</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">machineId</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">loadShedType</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">op = SupervisorOp()</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>const string&amp; <var class="pdparam">sessionKey</var></code>;<br /><code>const string&amp; <var class="pdparam">machineId</var></code>;<br /><code>const LoadShedType&amp; <var class="pdparam">loadShedType</var></code>;<br /><code>const SupervisorOp&amp; <var class="pdparam">op = SupervisorOp()</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an administrator to shed load on a machine. Two modes are available: SOFT mode will cancel all the submitted jobs and file transfers for all VISHNU users (Note that jobs and file transfers not initiated through VISHNU will not be impacted). HARD mode will additionally stop all the VISHNU processes on the machine. If a user without administrator rights uses this function, all the user's jobs and file transfers will be cancelled on the machine. In the HARD mode, the stopped processes will not be automatically restarted.
Type values:
HARD = 1
SOFT   = 2</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The session key.</p></dd><dt><span class="term"><span class="emphasis"><em>machineId</em></span></span></dt><dd><p>Input argument. The id of the machine to stop.</p></dd><dt><span class="term"><span class="emphasis"><em>loadShedType</em></span></span></dt><dd><p>Input argument. Selects a load shedding mode (SOFT: stops all services and they can be restarted, HARD: stops all services, they cannot be restarted).</p></dd><dt><span class="term"><span class="emphasis"><em>op</em></span></span></dt><dd><p>Input argument. The option for the supervision.</p></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">"The database generated an error" [2]</span></dt><dd></dd><dt><span class="term">"If a parameter is invalid" [10]</span></dt><dd></dd><dt><span class="term">"If a component is unavailable" [301]</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="setUpdateFrequency"><div class="refentry.separator"><hr /></div><a id="idp1279232"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>setUpdateFrequency — sets the update frequency of the IMS tables</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef">int <b class="fsfunc">vishnu::setUpdateFrequency</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">freq</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>const string&amp; <var class="pdparam">sessionKey</var></code>;<br /><code>const int&amp; <var class="pdparam">freq</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an admin to set the update frequency. This frequency corresponds to how often the state of the machines is automatically polled by the IMS server. The value must be in seconds.</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The session key.</p></dd><dt><span class="term"><span class="emphasis"><em>freq</em></span></span></dt><dd><p>Input argument. Frequency the data are updated, in second.</p></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">"The database generated an error" [2]</span></dt><dd></dd><dt><span class="term">"If a parameter is invalid" [10]</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="stop"><div class="refentry.separator"><hr /></div><a id="idp1287560"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>stop — To stop (and do not try to relaunch) a SeD</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef">int <b class="fsfunc">vishnu::stop</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">machineId</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">op = SupervisorOp()</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>const string&amp; <var class="pdparam">sessionKey</var></code>;<br /><code>const string&amp; <var class="pdparam">machineId</var></code>;<br /><code>const SupervisorOp&amp; <var class="pdparam">op = SupervisorOp()</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an admin to stop a VISHNU server on a machine. The stopped process will not be restarted automatically.
The important parameters in the process are the names and the machine.
The processName must be UMS, TMS, IMS or FMS , in upper case.
</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The session key.</p></dd><dt><span class="term"><span class="emphasis"><em>machineId</em></span></span></dt><dd><p>Input argument. The id of the machine where to restart.</p></dd><dt><span class="term"><span class="emphasis"><em>op</em></span></span></dt><dd><p>Input argument. The option for the supervision.</p></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">"The database generated an error" [2]</span></dt><dd></dd><dt><span class="term">"If a parameter is invalid" [10]</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="restart"><div class="refentry.separator"><hr /></div><a id="idp1297136"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>restart — To restart a SeD or a MA</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef">int <b class="fsfunc">vishnu::restart</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">machineId</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">op</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>const string&amp; <var class="pdparam">sessionKey</var></code>;<br /><code>const string&amp; <var class="pdparam">machineId</var></code>;<br /><code>const SupervisorOp&amp; <var class="pdparam">op</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an admin to restart a VISHNU server on a machine. Warning when restarting a server, first it is tried to stop it, so if one is running it is stopped and then another is restarted.</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The session key.</p></dd><dt><span class="term"><span class="emphasis"><em>machineId</em></span></span></dt><dd><p>Input argument. The id of the machine where to restart.</p></dd><dt><span class="term"><span class="emphasis"><em>op</em></span></span></dt><dd><p>Input argument. The option for the restart.</p></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">"The database generated an error" [2]</span></dt><dd></dd><dt><span class="term">"If a parameter is invalid" [10]</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="defineWorkIdentifier"><div class="refentry.separator"><hr /></div><a id="idp1306608"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>defineWorkIdentifier — defines the shape of the identifiers automatically generated for the work</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef">int <b class="fsfunc">vishnu::defineWorkIdentifier</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">format</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>const string&amp; <var class="pdparam">sessionKey</var></code>;<br /><code>const string&amp; <var class="pdparam">format</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an administrator to define the format of the identifier that will be automatically generated for the work. Once the format is defined, each time a work is added, the format will be used to define its identifier.
The format can contain various variables, a variable is preceded by the '$' symbol. Moreover, the counter variable '$CPT' MUST be present in the format, otherwise it will be rejected.
The available variables are: 
$CPT: a counter
$DAY: The day the file transfer is done
$MONTH: The month the file transfer is done
$YEAR: The year the file transfer is done
$TYPE: The 'W' symb to remind it is a file transfer id
$NAME: The name of the work</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The session key.</p></dd><dt><span class="term"><span class="emphasis"><em>format</em></span></span></dt><dd><p>Input argument. The new format to use.</p></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">"The database generated an error" [2]</span></dt><dd></dd><dt><span class="term">"If a parameter is invalid" [10]</span></dt><dd></dd></dl></div></div></div></div><div class="reference" title="IMS Python API Reference"><div class="titlepage"><div><div><h1 class="title"><a id="idp1315512"></a>IMS Python API Reference</h1></div></div><hr /></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="refentrytitle"><a href="#idp1315864">VISHNU.getProcesses</a></span><span class="refpurpose"> — displays the list of the VISHNU processes running on machines</span></dt><dt><span class="refentrytitle"><a href="#idp1326384">VISHNU.setSystemInfo</a></span><span class="refpurpose"> — updates the system information of a machine</span></dt><dt><span class="refentrytitle"><a href="#idp1336688">VISHNU.setSystemThreshold</a></span><span class="refpurpose"> — sets a threshold on a machine of a system</span></dt><dt><span class="refentrytitle"><a href="#idp1347232">VISHNU.getSystemThreshold</a></span><span class="refpurpose"> — gets a system threshold on a machine</span></dt><dt><span class="refentrytitle"><a href="#idp1358448">VISHNU.defineUserIdentifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the users</span></dt><dt><span class="refentrytitle"><a href="#idp1369136">VISHNU.defineMachineIdentifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the machines</span></dt><dt><span class="refentrytitle"><a href="#idp1379888">VISHNU.defineJobIdentifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the jobs</span></dt><dt><span class="refentrytitle"><a href="#idp1390520">VISHNU.defineTransferIdentifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the file transfers</span></dt><dt><span class="refentrytitle"><a href="#idp1401200">VISHNU.defineAuthIdentifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the authentication system</span></dt><dt><span class="refentrytitle"><a href="#idp1411880">VISHNU.loadShed</a></span><span class="refpurpose"> — sheds load on a machine</span></dt><dt><span class="refentrytitle"><a href="#idp1425552">VISHNU.setUpdateFrequency</a></span><span class="refpurpose"> — sets the update frequency of the IMS tables</span></dt><dt><span class="refentrytitle"><a href="#idp1435728">VISHNU.stop</a></span><span class="refpurpose"> — To stop (and do not try to relaunch) a SeD</span></dt><dt><span class="refentrytitle"><a href="#idp1447104">VISHNU.restart</a></span><span class="refpurpose"> — To restart a SeD or a MA</span></dt><dt><span class="refentrytitle"><a href="#idp1458392">VISHNU.defineWorkIdentifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the work</span></dt></dl></div><div class="refentry" title="VISHNU.getProcesses"><a id="idp1315864"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>VISHNU.getProcesses — displays the list of the VISHNU processes running on machines</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">ret, process=VISHNU.getProcesses</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">options = ProcessOp()</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>string <var class="pdparam">sessionKey</var></code>;<br /><code>ProcessOp <var class="pdparam">options = ProcessOp()</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command with restricted access is used to get the list of VISHNU server processes that are running on the infrastructure or on a single machine. The results contain both the VISHNU identifier of the process and the DIET underlying middleware identifier. </p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The session key.</p></dd><dt><span class="term"><span class="emphasis"><em>process</em></span></span></dt><dd><p>Output argument. The list of the Vishnu processes on the machine.</p></dd><dt><span class="term"><span class="emphasis"><em>options</em></span></span></dt><dd><p>Input argument. The options to search for the processes.</p></dd></dl></div></div><div class="refsect1" title="RETURNED OBJECTS"><a id="returned objects"></a><h2>RETURNED OBJECTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>errorCode (integer)</em></span></span></dt><dd><p>Output parameter. Contains 0 on success and the error code on failure.</p></dd><dt></dt><dd></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">UserException("If a parameter is invalid" [10])</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="VISHNU.setSystemInfo"><div class="refentry.separator"><hr /></div><a id="idp1326384"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>VISHNU.setSystemInfo — updates the system information of a machine</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">ret=VISHNU.setSystemInfo</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">systemInfo</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>string <var class="pdparam">sessionKey</var></code>;<br /><code>SystemInfo <var class="pdparam">systemInfo</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command with restricted access is used to set system information on a machine in the VISHNU database. The machine must first be registered using the UMS "addMachine" call. Using the machine identifier, information such as the total memory and available diskspace on the machine can be added.</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The session key.</p></dd><dt><span class="term"><span class="emphasis"><em>systemInfo</em></span></span></dt><dd><p>Input argument. Contains system information to store in Vishnu database.</p></dd></dl></div></div><div class="refsect1" title="RETURNED OBJECTS"><a id="returned objects"></a><h2>RETURNED OBJECTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>errorCode (integer)</em></span></span></dt><dd><p>Output parameter. Contains 0 on success and the error code on failure.</p></dd><dt></dt><dd></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">SystemException("The database generated an error" [2])</span></dt><dd></dd><dt><span class="term">UserException("If a parameter is invalid" [10])</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="VISHNU.setSystemThreshold"><div class="refentry.separator"><hr /></div><a id="idp1336688"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>VISHNU.setSystemThreshold — sets a threshold on a machine of a system</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">ret=VISHNU.setSystemThreshold</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">threshold</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>string <var class="pdparam">sessionKey</var></code>;<br /><code>Threshold <var class="pdparam">threshold</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an administrator to set a threshold. Each time an IMS server records the state of a machine, it checks the values defined, if a threshold is reached (over a use of the cpu or under the free memory or diskspace available), the administrator responsible for the threshold will receive an mail. These threshold will help the administrator to be aware of critical situations on a machine. Warning, a mail is sent for each time the threshold is reached, if a value swings around a threshold, the administrator may receive lots of emails depending on the update frequency.</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The session key.</p></dd><dt><span class="term"><span class="emphasis"><em>threshold</em></span></span></dt><dd><p>Input argument. The threshold to set.</p></dd></dl></div></div><div class="refsect1" title="RETURNED OBJECTS"><a id="returned objects"></a><h2>RETURNED OBJECTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>errorCode (integer)</em></span></span></dt><dd><p>Output parameter. Contains 0 on success and the error code on failure.</p></dd><dt></dt><dd></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">SystemException("The database generated an error" [2])</span></dt><dd></dd><dt><span class="term">UserException("If a parameter is invalid" [10])</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="VISHNU.getSystemThreshold"><div class="refentry.separator"><hr /></div><a id="idp1347232"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>VISHNU.getSystemThreshold — gets a system threshold on a machine</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">ret, value=VISHNU.getSystemThreshold</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">options</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>string <var class="pdparam">sessionKey</var></code>;<br /><code>ThresholdOp <var class="pdparam">options</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an administrator to get the thresholds that may be defined on a machine. This may be used to check the parameters defined to monitor the machine.
Each time a threshold is reached, a mail is sent. So checking the values of the threshold is important for the administrator to make sure they will not get tons of emails.</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The session key.</p></dd><dt><span class="term"><span class="emphasis"><em>value</em></span></span></dt><dd><p>Output argument. The thresholds value.</p></dd><dt><span class="term"><span class="emphasis"><em>options</em></span></span></dt><dd><p>Input argument. The options for the threshold.</p></dd></dl></div></div><div class="refsect1" title="RETURNED OBJECTS"><a id="returned objects"></a><h2>RETURNED OBJECTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>errorCode (integer)</em></span></span></dt><dd><p>Output parameter. Contains 0 on success and the error code on failure.</p></dd><dt></dt><dd></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">SystemException("The database generated an error" [2])</span></dt><dd></dd><dt><span class="term">UserException("If a parameter is invalid" [10])</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="VISHNU.defineUserIdentifier"><div class="refentry.separator"><hr /></div><a id="idp1358448"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>VISHNU.defineUserIdentifier — defines the shape of the identifiers automatically generated for the users</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">ret=VISHNU.defineUserIdentifier</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">format</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>string <var class="pdparam">sessionKey</var></code>;<br /><code>string <var class="pdparam">format</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an administrator to define the format of the identifier that will be automatically generated for the users. Once the format is defined, each time a user is added, the format will be used to define its identifier.
The format can contain various variables, a variable is preceded by the '$' symbol. Moreover, the counter variable '$CPT' MUST be present in the format, otherwise it will be rejected.
The available variables are: 
$CPT: a counter
$NAME: The name of the user
$UNAME: The name of the user
$DAY: The day the user is added
$MONTH: The month the user is added
$YEAR: The year the user is added
$SITE: The site the user is
$TYPE: The 'U' symb to remind it is a user id</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The session key.</p></dd><dt><span class="term"><span class="emphasis"><em>format</em></span></span></dt><dd><p>Input argument. The new format to use.</p></dd></dl></div></div><div class="refsect1" title="RETURNED OBJECTS"><a id="returned objects"></a><h2>RETURNED OBJECTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>errorCode (integer)</em></span></span></dt><dd><p>Output parameter. Contains 0 on success and the error code on failure.</p></dd><dt></dt><dd></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">SystemException("The database generated an error" [2])</span></dt><dd></dd><dt><span class="term">UserException("If a parameter is invalid" [10])</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="VISHNU.defineMachineIdentifier"><div class="refentry.separator"><hr /></div><a id="idp1369136"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>VISHNU.defineMachineIdentifier — defines the shape of the identifiers automatically generated for the machines</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">ret=VISHNU.defineMachineIdentifier</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">format</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>string <var class="pdparam">sessionKey</var></code>;<br /><code>string <var class="pdparam">format</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an administrator to define the format of the identifier that will be automatically generated for the machines. Once the format is defined, each time a machine is added, the format will be used to define its identifier.
The format can contain various variables, a variable is preceded by the '$' symbol. Moreover, the counter variable '$CPT' MUST be present in the format, otherwise it will be rejected.
The available variables are: 
$CPT: a counter
$MANAME: The hostname of the machine
$NAME: The hostname of the machine
$DAY: The day the machine is added
$MONTH: The month the machine is added
$YEAR: The year the machine is added
$SITE: The site the machine is
$TYPE: The 'M' symb to remind it is a machine id</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The session key.</p></dd><dt><span class="term"><span class="emphasis"><em>format</em></span></span></dt><dd><p>Input argument. The new format to use.</p></dd></dl></div></div><div class="refsect1" title="RETURNED OBJECTS"><a id="returned objects"></a><h2>RETURNED OBJECTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>errorCode (integer)</em></span></span></dt><dd><p>Output parameter. Contains 0 on success and the error code on failure.</p></dd><dt></dt><dd></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">SystemException("The database generated an error" [2])</span></dt><dd></dd><dt><span class="term">UserException("If a parameter is invalid" [10])</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="VISHNU.defineJobIdentifier"><div class="refentry.separator"><hr /></div><a id="idp1379888"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>VISHNU.defineJobIdentifier — defines the shape of the identifiers automatically generated for the jobs</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">ret=VISHNU.defineJobIdentifier</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">format</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>string <var class="pdparam">sessionKey</var></code>;<br /><code>string <var class="pdparam">format</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an administrator to define the format of the identifier that will be automatically generated for the jobs submited through TMS. Once the format is defined, each time a job is submitted, the format will be used to define its identifier.
The format can contain various variables, a variable is preceded by the '$' symbol. Moreover, the counter variable '$CPT' MUST be present in the format, otherwise it will be rejected.
The available variables are: 
$CPT: a counter
$DAY: The day the job is submitted
$MONTH: The month the job is submitted
$YEAR: The year the job is submitted
$TYPE: The 'J' symb to remind it is a job id</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The session key.</p></dd><dt><span class="term"><span class="emphasis"><em>format</em></span></span></dt><dd><p>Input argument. The new format to use.</p></dd></dl></div></div><div class="refsect1" title="RETURNED OBJECTS"><a id="returned objects"></a><h2>RETURNED OBJECTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>errorCode (integer)</em></span></span></dt><dd><p>Output parameter. Contains 0 on success and the error code on failure.</p></dd><dt></dt><dd></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">SystemException("The database generated an error" [2])</span></dt><dd></dd><dt><span class="term">UserException("If a parameter is invalid" [10])</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="VISHNU.defineTransferIdentifier"><div class="refentry.separator"><hr /></div><a id="idp1390520"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>VISHNU.defineTransferIdentifier — defines the shape of the identifiers automatically generated for the file transfers</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">ret=VISHNU.defineTransferIdentifier</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">format</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>string <var class="pdparam">sessionKey</var></code>;<br /><code>string <var class="pdparam">format</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an administrator to define the format of the identifier that will be automatically generated for the file transfers. Once the format is defined, each time a file transfer is done, the format will be used to define its identifier.
The format can contain various variables, a variable is preceded by the '$' symbol. Moreover, the counter variable '$CPT' MUST be present in the format, otherwise it will be rejected.
The available variables are: 
$CPT: a counter
$DAY: The day the file transfer is done
$MONTH: The month the file transfer is done
$YEAR: The year the file transfer is done
$TYPE: The 'F' symb to remind it is a file transfer id</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The session key.</p></dd><dt><span class="term"><span class="emphasis"><em>format</em></span></span></dt><dd><p>Input argument. The new format to use.</p></dd></dl></div></div><div class="refsect1" title="RETURNED OBJECTS"><a id="returned objects"></a><h2>RETURNED OBJECTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>errorCode (integer)</em></span></span></dt><dd><p>Output parameter. Contains 0 on success and the error code on failure.</p></dd><dt></dt><dd></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">SystemException("The database generated an error" [2])</span></dt><dd></dd><dt><span class="term">UserException("If a parameter is invalid" [10])</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="VISHNU.defineAuthIdentifier"><div class="refentry.separator"><hr /></div><a id="idp1401200"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>VISHNU.defineAuthIdentifier — defines the shape of the identifiers automatically generated for the authentication system</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">ret=VISHNU.defineAuthIdentifier</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">format</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>string <var class="pdparam">sessionKey</var></code>;<br /><code>string <var class="pdparam">format</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an administrator to define the format of the identifier that will be automatically generated for the authentication. Once the format is defined, each time an authentication system is added, the format will be used to define its identifier.
The format can contain various variables, a variable is preceded by the '$' symbol. Moreover, the counter variable '$CPT' MUST be present in the format, otherwise it will be rejected.
The available variables are: 
$CPT: a counter
$DAY: The day the file transfer is done
$MONTH: The month the file transfer is done
$YEAR: The year the file transfer is done
$TYPE: The 'F' symb to remind it is a file transfer id</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The session key.</p></dd><dt><span class="term"><span class="emphasis"><em>format</em></span></span></dt><dd><p>Input argument. The new format to use.</p></dd></dl></div></div><div class="refsect1" title="RETURNED OBJECTS"><a id="returned objects"></a><h2>RETURNED OBJECTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>errorCode (integer)</em></span></span></dt><dd><p>Output parameter. Contains 0 on success and the error code on failure.</p></dd><dt></dt><dd></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">SystemException("The database generated an error" [2])</span></dt><dd></dd><dt><span class="term">UserException("If a parameter is invalid" [10])</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="VISHNU.loadShed"><div class="refentry.separator"><hr /></div><a id="idp1411880"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>VISHNU.loadShed — sheds load on a machine</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">ret=VISHNU.loadShed</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">machineId</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">loadShedType</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">op = SupervisorOp()</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>string <var class="pdparam">sessionKey</var></code>;<br /><code>string <var class="pdparam">machineId</var></code>;<br /><code>LoadShedType <var class="pdparam">loadShedType</var></code>;<br /><code>SupervisorOp <var class="pdparam">op = SupervisorOp()</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an administrator to shed load on a machine. Two modes are available: SOFT mode will cancel all the submitted jobs and file transfers for all VISHNU users (Note that jobs and file transfers not initiated through VISHNU will not be impacted). HARD mode will additionally stop all the VISHNU processes on the machine. If a user without administrator rights uses this function, all the user's jobs and file transfers will be cancelled on the machine. In the HARD mode, the stopped processes will not be automatically restarted.
Type values:
HARD = 1
SOFT   = 2</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The session key.</p></dd><dt><span class="term"><span class="emphasis"><em>machineId</em></span></span></dt><dd><p>Input argument. The id of the machine to stop.</p></dd><dt><span class="term"><span class="emphasis"><em>loadShedType</em></span></span></dt><dd><p>Input argument. Selects a load shedding mode (SOFT: stops all services and they can be restarted, HARD: stops all services, they cannot be restarted).</p></dd><dt><span class="term"><span class="emphasis"><em>op</em></span></span></dt><dd><p>Input argument. The option for the supervision.</p></dd></dl></div></div><div class="refsect1" title="RETURNED OBJECTS"><a id="returned objects"></a><h2>RETURNED OBJECTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>errorCode (integer)</em></span></span></dt><dd><p>Output parameter. Contains 0 on success and the error code on failure.</p></dd><dt></dt><dd></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">SystemException("The database generated an error" [2])</span></dt><dd></dd><dt><span class="term">UserException("If a parameter is invalid" [10])</span></dt><dd></dd><dt><span class="term">IMSVishnuException("If a component is unavailable" [301])</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="VISHNU.setUpdateFrequency"><div class="refentry.separator"><hr /></div><a id="idp1425552"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>VISHNU.setUpdateFrequency — sets the update frequency of the IMS tables</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">ret=VISHNU.setUpdateFrequency</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">freq</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>string <var class="pdparam">sessionKey</var></code>;<br /><code>int <var class="pdparam">freq</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an admin to set the update frequency. This frequency corresponds to how often the state of the machines is automatically polled by the IMS server. The value must be in seconds.</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The session key.</p></dd><dt><span class="term"><span class="emphasis"><em>freq</em></span></span></dt><dd><p>Input argument. Frequency the data are updated, in second.</p></dd></dl></div></div><div class="refsect1" title="RETURNED OBJECTS"><a id="returned objects"></a><h2>RETURNED OBJECTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>errorCode (integer)</em></span></span></dt><dd><p>Output parameter. Contains 0 on success and the error code on failure.</p></dd><dt></dt><dd></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">SystemException("The database generated an error" [2])</span></dt><dd></dd><dt><span class="term">UserException("If a parameter is invalid" [10])</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="VISHNU.stop"><div class="refentry.separator"><hr /></div><a id="idp1435728"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>VISHNU.stop — To stop (and do not try to relaunch) a SeD</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">ret=VISHNU.stop</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">machineId</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">op = SupervisorOp()</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>string <var class="pdparam">sessionKey</var></code>;<br /><code>string <var class="pdparam">machineId</var></code>;<br /><code>SupervisorOp <var class="pdparam">op = SupervisorOp()</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an admin to stop a VISHNU server on a machine. The stopped process will not be restarted automatically.
The important parameters in the process are the names and the machine.
The processName must be UMS, TMS, IMS or FMS , in upper case.
</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The session key.</p></dd><dt><span class="term"><span class="emphasis"><em>machineId</em></span></span></dt><dd><p>Input argument. The id of the machine where to restart.</p></dd><dt><span class="term"><span class="emphasis"><em>op</em></span></span></dt><dd><p>Input argument. The option for the supervision.</p></dd></dl></div></div><div class="refsect1" title="RETURNED OBJECTS"><a id="returned objects"></a><h2>RETURNED OBJECTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>errorCode (integer)</em></span></span></dt><dd><p>Output parameter. Contains 0 on success and the error code on failure.</p></dd><dt></dt><dd></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">SystemException("The database generated an error" [2])</span></dt><dd></dd><dt><span class="term">UserException("If a parameter is invalid" [10])</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="VISHNU.restart"><div class="refentry.separator"><hr /></div><a id="idp1447104"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>VISHNU.restart — To restart a SeD or a MA</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">ret=VISHNU.restart</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">machineId</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">op</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>string <var class="pdparam">sessionKey</var></code>;<br /><code>string <var class="pdparam">machineId</var></code>;<br /><code>SupervisorOp <var class="pdparam">op</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an admin to restart a VISHNU server on a machine. Warning when restarting a server, first it is tried to stop it, so if one is running it is stopped and then another is restarted.</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The session key.</p></dd><dt><span class="term"><span class="emphasis"><em>machineId</em></span></span></dt><dd><p>Input argument. The id of the machine where to restart.</p></dd><dt><span class="term"><span class="emphasis"><em>op</em></span></span></dt><dd><p>Input argument. The option for the restart.</p></dd></dl></div></div><div class="refsect1" title="RETURNED OBJECTS"><a id="returned objects"></a><h2>RETURNED OBJECTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>errorCode (integer)</em></span></span></dt><dd><p>Output parameter. Contains 0 on success and the error code on failure.</p></dd><dt></dt><dd></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">SystemException("The database generated an error" [2])</span></dt><dd></dd><dt><span class="term">UserException("If a parameter is invalid" [10])</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="VISHNU.defineWorkIdentifier"><div class="refentry.separator"><hr /></div><a id="idp1458392"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>VISHNU.defineWorkIdentifier — defines the shape of the identifiers automatically generated for the work</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">ret=VISHNU.defineWorkIdentifier</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">format</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>string <var class="pdparam">sessionKey</var></code>;<br /><code>string <var class="pdparam">format</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an administrator to define the format of the identifier that will be automatically generated for the work. Once the format is defined, each time a work is added, the format will be used to define its identifier.
The format can contain various variables, a variable is preceded by the '$' symbol. Moreover, the counter variable '$CPT' MUST be present in the format, otherwise it will be rejected.
The available variables are: 
$CPT: a counter
$DAY: The day the file transfer is done
$MONTH: The month the file transfer is done
$YEAR: The year the file transfer is done
$TYPE: The 'W' symb to remind it is a file transfer id
$NAME: The name of the work</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The session key.</p></dd><dt><span class="term"><span class="emphasis"><em>format</em></span></span></dt><dd><p>Input argument. The new format to use.</p></dd></dl></div></div><div class="refsect1" title="RETURNED OBJECTS"><a id="returned objects"></a><h2>RETURNED OBJECTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>errorCode (integer)</em></span></span></dt><dd><p>Output parameter. Contains 0 on success and the error code on failure.</p></dd><dt></dt><dd></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">SystemException("The database generated an error" [2])</span></dt><dd></dd><dt><span class="term">UserException("If a parameter is invalid" [10])</span></dt><dd></dd></dl></div></div></div></div></div></body></html>
